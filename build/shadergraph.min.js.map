{"version":3,"file":"shadergraph.min.js","mappings":"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,EAAI,CACb,CACF,EApXA,IAAIsO,EAAc,EAAQ,KACtBgC,EAAY,EAAQ,KACpBlC,EAAc,EAAQ,GACtBK,EAAgB,EAAQ,KACxBD,EAAgB,EAAQ,KAExBX,EAAS,IACT6B,EAAQ,KACRZ,EAAgB,EAChBE,EAAe,EACfpC,EAAe,EACfsC,EAAW,EACXE,EAAU,EACVI,EAAQ,EACRzL,EAAQ,EACRyM,EAAU,EACV5G,EAAU,EACVgG,EAAa,EACbE,EAAM,GACNR,EAAM,GAENS,EAAM,CACN,gBACA,eACA,eACA,WACA,UACA,QACA,QACA,UACA,UACA,aACA,MACA,U,gBClCJ,IAAIU,EAAO,EAAQ,GAInBA,EAAOA,EAAK3K,QAAQ4K,QAAO,SAAUC,GACnC,OAAQ,kBAAkB/J,KAAK+J,EACjC,IAEAlR,EAAOD,QAAUiR,EAAKxH,OAAO,CAEzB,cACA,gBACA,cACA,eACA,eACA,iBACA,eACA,gBACA,sBACA,6BACA,4BACA,6BACA,gCACA,kCACA,0BACA,+BACA,oBACA,2BACA,2BACA,0BACA,gBAGA,QACA,QACA,YACA,QACA,QACA,iBACA,kBACA,iBACA,kBACA,gBACA,kBACA,gBACA,kBACA,eACA,iBACA,eACA,YACA,cACA,UACA,UACA,cACA,cACA,aACA,gBACA,aACA,mBACA,oBACA,mBACA,iBACA,uBACA,cACA,oBACA,kBACA,yB,QCnEJxJ,EAAOD,QAAU,CAEf,MACE,OACA,MACA,MACA,OACA,OACA,OACA,QACA,MACA,QACA,OACA,OACA,UACA,WACA,MACA,QACA,MACA,OACA,cACA,QACA,QACA,eACA,2BACA,sBACA,kBACA,wBACA,eACA,gBACA,WACA,gBACA,0BACA,eACA,eACA,eACA,eACA,SACA,cACA,kBACA,mBACA,eACA,eACA,cACA,eACA,kBACA,gBACA,iBACA,4BACA,uBACA,mBACA,yBACA,gBACA,0BACA,wBACA,mBACA,iBACA,2BACA,wBACA,mBACA,kCACA,oBACA,kCACA,eACA,sBACA,0BACA,qBACA,sBACA,sBACA,gCACA,gCACA,qBACA,4BACA,qCACA,8BACA,+BACA,sCACA,+CACA,wCACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,YACA,kBACA,iBACA,kBACA,kBACA,kBACA,kBACA,WACA,gBACA,qBACA,eACA,cACA,sBACA,6BACA,sCACA,+BACA,oBACA,cACA,qBACA,mBACA,0BACA,mCACA,4BACA,YACA,cACA,mBACA,cACA,SACA,WACA,gBACA,MACA,OACA,iBACA,MACA,MACA,MACA,MACA,YACA,MACA,WACA,MACA,UACA,UACA,UACA,OACA,MACA,aACA,OACA,OACA,MACA,YACA,eACA,gBACA,mBACA,cACA,iBACA,kBACA,sBACA,oBACA,mBACA,uBACA,qB,gBCpJJ,IAAIiR,EAAO,EAAQ,KAEnBhR,EAAOD,QAAUiR,EAAK3K,QAAQmD,OAAO,CAClC,SACC,WACA,SACA,OACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,QACA,QACA,QACA,oBACA,iBACA,uBACA,aACA,aACA,eACA,kBACA,aACA,aACA,eACA,kBACA,WACA,WACA,WACA,YACA,WACA,cACA,gBACA,QACA,SACA,aACA,SACA,YACA,SACA,SACA,UACA,UACA,UACA,YACA,WACA,WACA,WACA,aACA,WACA,WACA,WACA,aACA,eACA,eACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,qBACA,qBACA,cACA,eACA,eACA,iBACA,uBACA,aACA,kBACA,aACA,kBACA,iBACA,iBACA,gBACA,iBACA,iBACA,cACA,eACA,eACA,mBACA,oBACA,qB,UCrFJxJ,EAAOD,QAAU,CAEb,YACA,QACA,UACA,OACA,YACA,QACA,UACA,UACA,QACA,WACA,KACA,MACA,QACA,KACA,OACA,KACA,MACA,QACA,QACA,MACA,OACA,OACA,OACA,OACA,QACA,UACA,SACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,QACA,QACA,QACA,QACA,QACA,YACA,YACA,YACA,cACA,kBACA,kBACA,SAGA,MACA,QACA,QAC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","sources":["webpack://ShaderGraph/webpack/universalModuleDefinition","webpack://ShaderGraph/./node_modules/@sicmutils/glsl-parser/direct.js","webpack://ShaderGraph/./node_modules/@sicmutils/glsl-parser/lib/expr.js","webpack://ShaderGraph/./node_modules/@sicmutils/glsl-parser/lib/index.js","webpack://ShaderGraph/./node_modules/@sicmutils/glsl-parser/lib/scope.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/index.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/lib/builtins-300es.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/lib/builtins.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/lib/literals-300es.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/lib/literals.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/lib/operators.js","webpack://ShaderGraph/./node_modules/glsl-tokenizer/string.js","webpack://ShaderGraph/./src/linker/priority.js","webpack://ShaderGraph/webpack/bootstrap","webpack://ShaderGraph/webpack/runtime/compat get default export","webpack://ShaderGraph/webpack/runtime/define property getters","webpack://ShaderGraph/webpack/runtime/hasOwnProperty shorthand","webpack://ShaderGraph/webpack/runtime/make namespace object","webpack://ShaderGraph/./src/graph/graph.js","webpack://ShaderGraph/./src/graph/outlet.js","webpack://ShaderGraph/./src/graph/node.js","webpack://ShaderGraph/./src/graph/index.js","webpack://ShaderGraph/./src/linker/snippet.js","webpack://ShaderGraph/./src/linker/assemble.js","webpack://ShaderGraph/./src/linker/program.js","webpack://ShaderGraph/./src/linker/link.js","webpack://ShaderGraph/./src/linker/layout.js","webpack://ShaderGraph/./src/linker/index.js","webpack://ShaderGraph/./src/block/block.js","webpack://ShaderGraph/./src/block/call.js","webpack://ShaderGraph/./src/block/callback.js","webpack://ShaderGraph/./src/block/isolate.js","webpack://ShaderGraph/./src/block/join.js","webpack://ShaderGraph/./src/visualize/serialize.js","webpack://ShaderGraph/./src/factory/hash.js","webpack://ShaderGraph/./src/visualize/markup.js","webpack://ShaderGraph/./src/visualize/index.js","webpack://ShaderGraph/./src/factory/factory.js","webpack://ShaderGraph/./src/factory/material.js","webpack://ShaderGraph/./src/factory/library.js","webpack://ShaderGraph/./src/factory/queue.js","webpack://ShaderGraph/./src/factory/cache.js","webpack://ShaderGraph/./src/glsl/compile.js","webpack://ShaderGraph/./node_modules/three/src/math/MathUtils.js","webpack://ShaderGraph/./node_modules/three/src/math/Vector2.js","webpack://ShaderGraph/./node_modules/three/src/math/Quaternion.js","webpack://ShaderGraph/./node_modules/three/src/math/Vector3.js","webpack://ShaderGraph/./node_modules/three/src/math/Vector4.js","webpack://ShaderGraph/./node_modules/three/src/math/Matrix3.js","webpack://ShaderGraph/./node_modules/three/src/constants.js","webpack://ShaderGraph/./node_modules/three/src/math/Matrix4.js","webpack://ShaderGraph/./src/glsl/decl.js","webpack://ShaderGraph/./src/glsl/constants.js","webpack://ShaderGraph/./src/glsl/parse.js","webpack://ShaderGraph/./src/glsl/generate.js","webpack://ShaderGraph/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ShaderGraph\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ShaderGraph\"] = factory();\n\telse\n\t\troot[\"ShaderGraph\"] = factory();\n})(self, () => {\nreturn ","var parse = require(\"./lib/index\");\n\nmodule.exports = parseArray;\n\nfunction parseArray(tokens) {\n  var parser = parse();\n\n  for (var i = 0; i < tokens.length; i++) {\n    parser(tokens[i]);\n  }\n\n  return parser(null);\n}\n","let state, token, tokens, idx;\n\nconst original_symbol = {\n  nud: function () {\n    return this.children && this.children.length ? this : fail(\"unexpected\")();\n  },\n  led: fail(\"missing operator\"),\n};\n\nconst symbol_table = {};\n\nfunction itself() {\n  return this;\n}\n\nsymbol(\"(ident)\").nud = itself;\nsymbol(\"(keyword)\").nud = itself;\nsymbol(\"(builtin)\").nud = itself;\nsymbol(\"(literal)\").nud = itself;\nsymbol(\"(end)\");\n\nsymbol(\":\");\nsymbol(\";\");\nsymbol(\",\");\nsymbol(\")\");\nsymbol(\"]\");\nsymbol(\"}\");\n\ninfixr(\"&&\", 30);\ninfixr(\"||\", 30);\ninfix(\"|\", 43);\ninfix(\"^\", 44);\ninfix(\"&\", 45);\ninfix(\"==\", 46);\ninfix(\"!=\", 46);\ninfix(\"<\", 47);\ninfix(\"<=\", 47);\ninfix(\">\", 47);\ninfix(\">=\", 47);\ninfix(\">>\", 48);\ninfix(\"<<\", 48);\ninfix(\"+\", 50);\ninfix(\"-\", 50);\ninfix(\"*\", 60);\ninfix(\"/\", 60);\ninfix(\"%\", 60);\ninfix(\"?\", 20, function (left) {\n  this.children = [left, expression(0), (advance(\":\"), expression(0))];\n  this.type = \"ternary\";\n  return this;\n});\ninfix(\".\", 80, function (left) {\n  token.type = \"literal\";\n  state.fake(token);\n  this.children = [left, token];\n  advance();\n  return this;\n});\ninfix(\"[\", 80, function (left) {\n  this.children = [left, expression(0)];\n  this.type = \"binary\";\n  advance(\"]\");\n  return this;\n});\ninfix(\"(\", 80, function (left) {\n  this.children = [left];\n  this.type = \"call\";\n\n  if (token.data !== \")\")\n    while (1) {\n      this.children.push(expression(0));\n      if (token.data !== \",\") break;\n      advance(\",\");\n    }\n  advance(\")\");\n  return this;\n});\n\nprefix(\"-\");\nprefix(\"+\");\nprefix(\"!\");\nprefix(\"~\");\nprefix(\"defined\");\nprefix(\"(\", function () {\n  this.type = \"group\";\n  this.children = [expression(0)];\n  advance(\")\");\n  return this;\n});\nprefix(\"++\");\nprefix(\"--\");\nsuffix(\"++\");\nsuffix(\"--\");\n\nassignment(\"=\");\nassignment(\"+=\");\nassignment(\"-=\");\nassignment(\"*=\");\nassignment(\"/=\");\nassignment(\"%=\");\nassignment(\"&=\");\nassignment(\"|=\");\nassignment(\"^=\");\nassignment(\">>=\");\nassignment(\"<<=\");\n\nmodule.exports = function (incoming_state, incoming_tokens) {\n  state = incoming_state;\n  tokens = incoming_tokens;\n  idx = 0;\n  let result;\n\n  if (!tokens.length) return;\n\n  advance();\n  result = expression(0);\n  result.parent = state[0];\n  emit(result);\n\n  if (idx < tokens.length) {\n    throw new Error(\"did not use all tokens\");\n  }\n\n  result.parent.children = [result];\n\n  function emit(node) {\n    state.unshift(node, false);\n    for (let i = 0, len = node.children.length; i < len; ++i) {\n      emit(node.children[i]);\n    }\n    state.shift();\n  }\n};\n\nfunction symbol(id, binding_power) {\n  let sym = symbol_table[id];\n  binding_power = binding_power || 0;\n  if (sym) {\n    if (binding_power > sym.lbp) {\n      sym.lbp = binding_power;\n    }\n  } else {\n    sym = Object.create(original_symbol);\n    sym.id = id;\n    sym.lbp = binding_power;\n    symbol_table[id] = sym;\n  }\n  return sym;\n}\n\nfunction expression(rbp) {\n  let left,\n    t = token;\n  advance();\n\n  left = t.nud();\n  while (rbp < token.lbp) {\n    t = token;\n    advance();\n    left = t.led(left);\n  }\n  return left;\n}\n\nfunction infix(id, bp, led) {\n  const sym = symbol(id, bp);\n  sym.led =\n    led ||\n    function (left) {\n      this.children = [left, expression(bp)];\n      this.type = \"binary\";\n      return this;\n    };\n}\n\nfunction infixr(id, bp, led) {\n  const sym = symbol(id, bp);\n  sym.led =\n    led ||\n    function (left) {\n      this.children = [left, expression(bp - 1)];\n      this.type = \"binary\";\n      return this;\n    };\n  return sym;\n}\n\nfunction prefix(id, nud) {\n  const sym = symbol(id);\n  sym.nud =\n    nud ||\n    function () {\n      this.children = [expression(70)];\n      this.type = \"unary\";\n      return this;\n    };\n  return sym;\n}\n\nfunction suffix(id) {\n  const sym = symbol(id, 150);\n  sym.led = function (left) {\n    this.children = [left];\n    this.type = \"suffix\";\n    return this;\n  };\n}\n\nfunction assignment(id) {\n  return infixr(id, 10, function (left) {\n    this.children = [left, expression(9)];\n    this.assignment = true;\n    this.type = \"assign\";\n    return this;\n  });\n}\n\nfunction advance(id) {\n  let next, value, type, output;\n\n  if (id && token.data !== id) {\n    return state.unexpected(\"expected `\" + id + \"`, got `\" + token.data + \"`\");\n  }\n\n  if (idx >= tokens.length) {\n    token = symbol_table[\"(end)\"];\n    return;\n  }\n\n  next = tokens[idx++];\n  value = next.data;\n  type = next.type;\n\n  if (type === \"ident\") {\n    output = state.scope.find(value) || state.create_node();\n    type = output.type;\n  } else if (type === \"builtin\") {\n    output = symbol_table[\"(builtin)\"];\n  } else if (type === \"keyword\") {\n    output = symbol_table[\"(keyword)\"];\n  } else if (type === \"operator\") {\n    output = symbol_table[value];\n    if (!output) {\n      return state.unexpected(\"unknown operator `\" + value + \"`\");\n    }\n  } else if (type === \"float\" || type === \"integer\") {\n    type = \"literal\";\n    output = symbol_table[\"(literal)\"];\n  } else {\n    return state.unexpected(\"unexpected token.\");\n  }\n\n  if (output) {\n    if (!output.nud) {\n      output.nud = itself;\n    }\n    if (!output.children) {\n      output.children = [];\n    }\n  }\n\n  output = Object.create(output);\n  output.token = next;\n  output.type = type;\n  if (!output.data) output.data = value;\n\n  return (token = output);\n}\n\nfunction fail(message) {\n  return function () {\n    return state.unexpected(message);\n  };\n}\n","module.exports = parser;\n\nconst full_parse_expr = require(\"./expr\"),\n  Scope = require(\"./scope\");\n\n// singleton!\nconst Advance = new Object();\n\nconst DEBUG = false;\n\nlet _ = 0,\n  IDENT = _++,\n  STMT = _++,\n  STMTLIST = _++,\n  STRUCT = _++,\n  FUNCTION = _++,\n  FUNCTIONARGS = _++,\n  DECL = _++,\n  DECLLIST = _++,\n  FORLOOP = _++,\n  WHILELOOP = _++,\n  IF = _++,\n  EXPR = _++,\n  PRECISION = _++,\n  COMMENT = _++,\n  PREPROCESSOR = _++,\n  KEYWORD = _++,\n  KEYWORD_OR_IDENT = _++,\n  RETURN = _++,\n  BREAK = _++,\n  CONTINUE = _++,\n  DISCARD = _++,\n  DOWHILELOOP = _++,\n  PLACEHOLDER = _++,\n  QUANTIFIER = _++;\n\nconst DECL_ALLOW_ASSIGN = 0x1,\n  DECL_ALLOW_COMMA = 0x2,\n  DECL_REQUIRE_NAME = 0x4,\n  DECL_ALLOW_INVARIANT = 0x8,\n  DECL_ALLOW_STORAGE = 0x10,\n  DECL_NO_INOUT = 0x20,\n  DECL_ALLOW_STRUCT = 0x40,\n  DECL_STATEMENT = 0xff,\n  DECL_FUNCTION =\n    DECL_STATEMENT &\n    ~(\n      DECL_ALLOW_ASSIGN |\n      DECL_ALLOW_COMMA |\n      DECL_NO_INOUT |\n      DECL_ALLOW_INVARIANT |\n      DECL_REQUIRE_NAME\n    ),\n  DECL_STRUCT =\n    DECL_STATEMENT &\n    ~(\n      DECL_ALLOW_ASSIGN |\n      DECL_ALLOW_INVARIANT |\n      DECL_ALLOW_STORAGE |\n      DECL_ALLOW_STRUCT\n    );\n\nconst QUALIFIERS = [\"const\", \"attribute\", \"uniform\", \"varying\"];\n\nconst NO_ASSIGN_ALLOWED = false,\n  NO_COMMA_ALLOWED = false;\n\n// map of tokens to stmt types\nconst token_map = {\n  \"block-comment\": COMMENT,\n  \"line-comment\": COMMENT,\n  preprocessor: PREPROCESSOR,\n};\n\n// map of stmt types to human\nconst stmt_type = (_ = [\n  \"ident\",\n  \"stmt\",\n  \"stmtlist\",\n  \"struct\",\n  \"function\",\n  \"functionargs\",\n  \"decl\",\n  \"decllist\",\n  \"forloop\",\n  \"whileloop\",\n  \"if\",\n  \"expr\",\n  \"precision\",\n  \"comment\",\n  \"preprocessor\",\n  \"keyword\",\n  \"keyword_or_ident\",\n  \"return\",\n  \"break\",\n  \"continue\",\n  \"discard\",\n  \"do-while\",\n  \"placeholder\",\n  \"quantifier\",\n]);\n\nfunction parser() {\n  const stmtlist = n(STMTLIST),\n    stmt = n(STMT),\n    decllist = n(DECLLIST),\n    precision = n(PRECISION),\n    ident = n(IDENT),\n    keyword_or_ident = n(KEYWORD_OR_IDENT),\n    fn = n(FUNCTION),\n    fnargs = n(FUNCTIONARGS),\n    forstmt = n(FORLOOP),\n    ifstmt = n(IF),\n    whilestmt = n(WHILELOOP),\n    returnstmt = n(RETURN),\n    dowhilestmt = n(DOWHILELOOP),\n    quantifier = n(QUANTIFIER);\n\n  let parse_struct,\n    parse_precision,\n    parse_quantifier,\n    parse_forloop,\n    parse_if,\n    parse_return,\n    parse_whileloop,\n    parse_dowhileloop,\n    parse_function,\n    parse_function_args;\n\n  let check = arguments.length ? [].slice.call(arguments) : [],\n    complete = false,\n    ended = false,\n    depth = 0,\n    state = [],\n    nodes = [],\n    tokens = [],\n    whitespace = [],\n    errored = false,\n    program,\n    token,\n    node;\n\n  // setup state\n  state.shift = special_shift;\n  state.unshift = special_unshift;\n  state.fake = special_fake;\n  state.unexpected = unexpected;\n  state.scope = new Scope(state);\n  state.create_node = function () {\n    const n = mknode(IDENT, token);\n    n.parent = reader.program;\n    return n;\n  };\n\n  setup_stative_parsers();\n\n  // setup root node\n  node = stmtlist();\n  node.expecting = \"(eof)\";\n  node.mode = STMTLIST;\n  node.token = { type: \"(program)\", data: \"(program)\" };\n  program = node;\n\n  reader.program = program;\n  reader.scope = function (scope) {\n    if (arguments.length === 1) {\n      state.scope = scope;\n    }\n    return state.scope;\n  };\n\n  state.unshift(node);\n  return reader;\n\n  function reader(data) {\n    if (data === null) {\n      return end(), program;\n    }\n\n    nodes = [];\n    write(data);\n    return nodes;\n  }\n\n  // stream functions ---------------------------------------------\n\n  function write(input) {\n    if (\n      input.type === \"whitespace\" ||\n      input.type === \"line-comment\" ||\n      input.type === \"block-comment\"\n    ) {\n      whitespace.push(input);\n      return;\n    }\n    tokens.push(input);\n    token = token || tokens[0];\n\n    if (token && whitespace.length) {\n      token.preceding = token.preceding || [];\n      token.preceding = token.preceding.concat(whitespace);\n      whitespace = [];\n    }\n\n    while (take())\n      switch (state[0].mode) {\n        case STMT:\n          parse_stmt();\n          break;\n        case STMTLIST:\n          parse_stmtlist();\n          break;\n        case DECL:\n          parse_decl();\n          break;\n        case DECLLIST:\n          parse_decllist();\n          break;\n        case EXPR:\n          parse_expr();\n          break;\n        case STRUCT:\n          parse_struct(true, true);\n          break;\n        case PRECISION:\n          parse_precision();\n          break;\n        case IDENT:\n          parse_ident();\n          break;\n        case KEYWORD:\n          parse_keyword();\n          break;\n        case KEYWORD_OR_IDENT:\n          parse_keyword_or_ident();\n          break;\n        case FUNCTION:\n          parse_function();\n          break;\n        case FUNCTIONARGS:\n          parse_function_args();\n          break;\n        case FORLOOP:\n          parse_forloop();\n          break;\n        case WHILELOOP:\n          parse_whileloop();\n          break;\n        case DOWHILELOOP:\n          parse_dowhileloop();\n          break;\n        case RETURN:\n          parse_return();\n          break;\n        case IF:\n          parse_if();\n          break;\n        case QUANTIFIER:\n          parse_quantifier();\n          break;\n      }\n  }\n\n  function end(tokens) {\n    if (arguments.length) {\n      write(tokens);\n    }\n\n    if (state.length > 1) {\n      unexpected(\"unexpected EOF\");\n      return;\n    }\n\n    complete = true;\n  }\n\n  function take() {\n    if (errored || !state.length) return false;\n\n    return (token = tokens[0]);\n  }\n\n  // ----- state manipulation --------\n\n  function special_fake(x) {\n    state.unshift(x);\n    state.shift();\n  }\n\n  function special_unshift(_node, add_child) {\n    _node.parent = state[0];\n\n    const ret = [].unshift.call(this, _node);\n\n    add_child = add_child === undefined ? true : add_child;\n\n    if (DEBUG) {\n      let pad = \"\";\n      for (let i = 0, len = this.length - 1; i < len; ++i) {\n        pad += \" |\";\n      }\n      console.log(pad, \"\\\\\" + _node.type, _node.token.data);\n    }\n\n    if (add_child && node !== _node) node.children.push(_node);\n    node = _node;\n\n    return ret;\n  }\n\n  function special_shift() {\n    let _node = [].shift.call(this),\n      okay = check[this.length],\n      emit = false;\n\n    if (DEBUG) {\n      let pad = \"\";\n      for (let i = 0, len = this.length; i < len; ++i) {\n        pad += \" |\";\n      }\n      console.log(pad, \"/\" + _node.type);\n    }\n\n    if (check.length) {\n      if (typeof check[0] === \"function\") {\n        emit = check[0](_node);\n      } else if (okay !== undefined) {\n        emit = okay.test ? okay.test(_node.type) : okay === _node.type;\n      }\n    } else {\n      emit = true;\n    }\n\n    if (emit && !errored) nodes.push(_node);\n\n    node = _node.parent;\n    return _node;\n  }\n\n  // parse states ---------------\n\n  function parse_stmtlist() {\n    // determine the type of the statement\n    // and then start parsing\n    return stative(function () {\n      state.scope.enter();\n      return Advance;\n    }, normal_mode)();\n\n    function normal_mode() {\n      if (token.data === state[0].expecting) {\n        return state.scope.exit(), state.shift();\n      }\n      switch (token.type) {\n        case \"preprocessor\":\n          state.fake(adhoc());\n          tokens.shift();\n          return;\n        default:\n          state.unshift(stmt());\n          return;\n      }\n    }\n  }\n\n  function parse_stmt() {\n    if (state[0].brace) {\n      if (token.data !== \"}\") {\n        return unexpected(\"expected `}`, got \" + token.data);\n      }\n      state[0].brace = false;\n      return tokens.shift(), state.shift();\n    }\n    switch (token.type) {\n      case \"eof\":\n        return got_eof();\n      case \"keyword\":\n        switch (token.data) {\n          case \"for\":\n            return state.unshift(forstmt());\n          case \"if\":\n            return state.unshift(ifstmt());\n          case \"while\":\n            return state.unshift(whilestmt());\n          case \"do\":\n            return state.unshift(dowhilestmt());\n          case \"break\":\n            return state.fake(mknode(BREAK, token)), tokens.shift();\n          case \"continue\":\n            return state.fake(mknode(CONTINUE, token)), tokens.shift();\n          case \"discard\":\n            return state.fake(mknode(DISCARD, token)), tokens.shift();\n          case \"return\":\n            return state.unshift(returnstmt());\n          case \"precision\":\n            return state.unshift(precision());\n        }\n        return state.unshift(decl(DECL_STATEMENT));\n      case \"ident\":\n        var lookup;\n        if ((lookup = state.scope.find(token.data))) {\n          if (lookup.parent.type === \"struct\") {\n            // this is strictly untrue, you could have an\n            // expr that starts with a struct constructor.\n            //      ... sigh\n            return state.unshift(decl(DECL_STATEMENT));\n          }\n          return state.unshift(expr(\";\"));\n        }\n      case \"operator\":\n        if (token.data === \"{\") {\n          state[0].brace = true;\n          const n = stmtlist();\n          n.expecting = \"}\";\n          return tokens.shift(), state.unshift(n);\n        }\n        if (token.data === \";\") {\n          return tokens.shift(), state.shift();\n        }\n      default:\n        return state.unshift(expr(\";\"));\n    }\n  }\n\n  function got_eof() {\n    if (ended) errored = true;\n    ended = true;\n    return state.shift();\n  }\n\n  function parse_decl() {\n    const stmt = state[0];\n\n    return stative(\n      invariant_or_not,\n      storage_or_not,\n      parameter_or_not,\n      precision_or_not,\n      struct_or_type,\n      maybe_name,\n      maybe_lparen, // lparen means we're a function\n      is_decllist,\n      done\n    )();\n\n    function invariant_or_not() {\n      if (token.data === \"invariant\") {\n        if (stmt.flags & DECL_ALLOW_INVARIANT) {\n          state.unshift(keyword());\n          return Advance;\n        } else {\n          return unexpected(\"`invariant` is not allowed here\");\n        }\n      } else {\n        state.fake(mknode(PLACEHOLDER, { data: \"\", position: token.position }));\n        return Advance;\n      }\n    }\n\n    function storage_or_not() {\n      if (is_storage(token)) {\n        if (stmt.flags & DECL_ALLOW_STORAGE) {\n          state.unshift(keyword());\n          return Advance;\n        } else {\n          return unexpected(\"storage is not allowed here\");\n        }\n      } else {\n        state.fake(mknode(PLACEHOLDER, { data: \"\", position: token.position }));\n        return Advance;\n      }\n    }\n\n    function parameter_or_not() {\n      if (is_parameter(token)) {\n        if (!(stmt.flags & DECL_NO_INOUT)) {\n          state.unshift(keyword());\n          return Advance;\n        } else {\n          return unexpected(\"parameter is not allowed here\");\n        }\n      } else {\n        state.fake(mknode(PLACEHOLDER, { data: \"\", position: token.position }));\n        return Advance;\n      }\n    }\n\n    function precision_or_not() {\n      if (is_precision(token)) {\n        state.unshift(keyword());\n        return Advance;\n      } else {\n        state.fake(mknode(PLACEHOLDER, { data: \"\", position: token.position }));\n        return Advance;\n      }\n    }\n\n    function struct_or_type() {\n      if (token.data === \"struct\") {\n        if (!(stmt.flags & DECL_ALLOW_STRUCT)) {\n          return unexpected(\"cannot nest structs\");\n        }\n        state.unshift(struct());\n        return Advance;\n      }\n\n      if (token.type === \"keyword\") {\n        state.unshift(keyword());\n        return Advance;\n      }\n\n      const lookup = state.scope.find(token.data);\n\n      if (lookup) {\n        state.fake(Object.create(lookup));\n        tokens.shift();\n        return Advance;\n      }\n      return unexpected(\n        \"expected user defined type, struct or keyword, got \" + token.data\n      );\n    }\n\n    function maybe_name() {\n      if (token.data === \",\" && !(stmt.flags & DECL_ALLOW_COMMA)) {\n        return state.shift();\n      }\n\n      if (token.data === \"[\") {\n        // oh lord.\n        state.unshift(quantifier());\n        return;\n      }\n\n      if (token.data === \")\") return state.shift();\n\n      if (token.data === \";\") {\n        return stmt.stage + 3;\n      }\n\n      if (token.type !== \"ident\" && token.type !== \"builtin\") {\n        return unexpected(\"expected identifier, got \" + token.data);\n      }\n\n      stmt.collected_name = tokens.shift();\n      return Advance;\n    }\n\n    function maybe_lparen() {\n      if (token.data === \"(\") {\n        tokens.unshift(stmt.collected_name);\n        delete stmt.collected_name;\n        state.unshift(fn());\n        return stmt.stage + 2;\n      }\n      return Advance;\n    }\n\n    function is_decllist() {\n      tokens.unshift(stmt.collected_name);\n      delete stmt.collected_name;\n      state.unshift(decllist());\n      return Advance;\n    }\n\n    function done() {\n      return state.shift();\n    }\n  }\n\n  function parse_decllist() {\n    // grab ident\n\n    if (token.type === \"ident\" || token.type === \"builtin\") {\n      const name = token.data;\n      state.unshift(ident());\n      state.scope.define(name);\n      return;\n    }\n\n    if (token.type === \"operator\") {\n      if (token.data === \",\") {\n        // multi-decl!\n        if (!(state[1].flags & DECL_ALLOW_COMMA)) {\n          return state.shift();\n        }\n\n        return tokens.shift();\n      } else if (token.data === \"=\") {\n        if (!(state[1].flags & DECL_ALLOW_ASSIGN))\n          return unexpected(\"`=` is not allowed here.\");\n\n        tokens.shift();\n\n        state.unshift(expr(\",\", \";\"));\n        return;\n      } else if (token.data === \"[\") {\n        state.unshift(quantifier());\n        return;\n      }\n    }\n    return state.shift();\n  }\n\n  function parse_keyword_or_ident() {\n    if (token.type === \"keyword\") {\n      state[0].type = \"keyword\";\n      state[0].mode = KEYWORD;\n      return;\n    }\n\n    if (token.type === \"ident\") {\n      state[0].type = \"ident\";\n      state[0].mode = IDENT;\n      return;\n    }\n\n    return unexpected(\n      \"expected keyword or user-defined name, got \" + token.data\n    );\n  }\n\n  function parse_keyword() {\n    if (token.type !== \"keyword\") {\n      return unexpected(\"expected keyword, got \" + token.data);\n    }\n\n    return state.shift(), tokens.shift();\n  }\n\n  function parse_ident() {\n    if (token.type !== \"ident\" && token.type !== \"builtin\") {\n      return unexpected(\"expected user-defined name, got \" + token.data);\n    }\n\n    state[0].data = token.data;\n    return state.shift(), tokens.shift();\n  }\n\n  function parse_expr() {\n    const expecting = state[0].expecting;\n\n    state[0].tokens = state[0].tokens || [];\n\n    if (state[0].parenlevel === undefined) {\n      state[0].parenlevel = 0;\n      state[0].bracelevel = 0;\n    }\n    if (state[0].parenlevel < 1 && expecting.indexOf(token.data) > -1) {\n      return parseexpr(state[0].tokens);\n    }\n    if (token.data === \"(\") {\n      ++state[0].parenlevel;\n    } else if (token.data === \")\") {\n      --state[0].parenlevel;\n    }\n\n    switch (token.data) {\n      case \"{\":\n        ++state[0].bracelevel;\n        break;\n      case \"}\":\n        --state[0].bracelevel;\n        break;\n      case \"(\":\n        ++state[0].parenlevel;\n        break;\n      case \")\":\n        --state[0].parenlevel;\n        break;\n    }\n\n    if (state[0].parenlevel < 0) return unexpected(\"unexpected `)`\");\n    if (state[0].bracelevel < 0) return unexpected(\"unexpected `}`\");\n\n    state[0].tokens.push(tokens.shift());\n    return;\n\n    function parseexpr(tokens) {\n      try {\n        full_parse_expr(state, tokens);\n      } catch (err) {\n        errored = true;\n        throw err;\n      }\n\n      return state.shift();\n    }\n  }\n\n  // node types ---------------\n\n  function n(type) {\n    // this is a function factory that suffices for most kinds of expressions and statements\n    return function () {\n      return mknode(type, token);\n    };\n  }\n\n  function adhoc() {\n    return mknode(token_map[token.type], token, node);\n  }\n\n  function decl(flags) {\n    const _ = mknode(DECL, token, node);\n    _.flags = flags;\n\n    return _;\n  }\n\n  function struct(allow_assign, allow_comma) {\n    const _ = mknode(STRUCT, token, node);\n    _.allow_assign = allow_assign === undefined ? true : allow_assign;\n    _.allow_comma = allow_comma === undefined ? true : allow_comma;\n    return _;\n  }\n\n  function expr() {\n    const n = mknode(EXPR, token, node);\n\n    n.expecting = [].slice.call(arguments);\n    return n;\n  }\n\n  function keyword(default_value) {\n    let t = token;\n    if (default_value) {\n      t = { type: \"(implied)\", data: \"(default)\", position: t.position };\n    }\n    return mknode(KEYWORD, t, node);\n  }\n\n  // utils ----------------------------\n\n  function unexpected(str) {\n    errored = true;\n    throw new Error(\n      (str || \"unexpected \" + state) + \" at line \" + state[0].token.line\n    );\n  }\n\n  function assert(type, data) {\n    return (\n      1,\n      assert_null_string_or_array(type, token.type) &&\n        assert_null_string_or_array(data, token.data)\n    );\n  }\n\n  function assert_null_string_or_array(x, y) {\n    switch (typeof x) {\n      case \"string\":\n        if (y !== x) {\n          unexpected(\"expected `\" + x + \"`, got \" + y + \"\\n\" + token.data);\n        }\n        return !errored;\n\n      case \"object\":\n        if (x && x.indexOf(y) === -1) {\n          unexpected(\"expected one of `\" + x.join(\"`, `\") + \"`, got \" + y);\n        }\n        return !errored;\n    }\n    return true;\n  }\n\n  // stative ----------------------------\n\n  function stative() {\n    let steps = [].slice.call(arguments),\n      step,\n      result;\n\n    return function () {\n      const current = state[0];\n\n      current.stage || (current.stage = 0);\n\n      step = steps[current.stage];\n      if (!step) return unexpected(\"parser in undefined state!\");\n\n      result = step();\n\n      if (result === Advance) return ++current.stage;\n      if (result === undefined) return;\n      current.stage = result;\n    };\n  }\n\n  function advance(op, t) {\n    t = t || \"operator\";\n    return function () {\n      if (!assert(t, op)) return;\n\n      const last = tokens.shift(),\n        children = state[0].children,\n        last_node = children[children.length - 1];\n\n      if (last_node && last_node.token && last.preceding) {\n        last_node.token.succeeding = last_node.token.succeeding || [];\n        last_node.token.succeeding = last_node.token.succeeding.concat(\n          last.preceding\n        );\n      }\n      return Advance;\n    };\n  }\n\n  function advance_expr(until) {\n    return function () {\n      state.unshift(expr(until));\n      return Advance;\n    };\n  }\n\n  function advance_ident(declare) {\n    return declare\n      ? function () {\n          const name = token.data;\n          return (\n            assert(\"ident\") &&\n            (state.unshift(ident()), state.scope.define(name), Advance)\n          );\n        }\n      : function () {\n          if (!assert(\"ident\")) return;\n\n          const s = Object.create(state.scope.find(token.data));\n          s.token = token;\n\n          return tokens.shift(), Advance;\n        };\n  }\n\n  function advance_stmtlist() {\n    return function () {\n      const n = stmtlist();\n      n.expecting = \"}\";\n      return state.unshift(n), Advance;\n    };\n  }\n\n  function maybe_stmtlist(skip) {\n    return function () {\n      const current = state[0].stage;\n      if (token.data !== \"{\") {\n        return state.unshift(stmt()), current + skip;\n      }\n      return tokens.shift(), Advance;\n    };\n  }\n\n  function popstmt() {\n    return function () {\n      return state.shift(), state.shift();\n    };\n  }\n\n  function setup_stative_parsers() {\n    // could also be\n    // struct { } decllist\n    parse_struct = stative(\n      advance(\"struct\", \"keyword\"),\n      function () {\n        if (token.data === \"{\") {\n          state.fake(\n            mknode(IDENT, { data: \"\", position: token.position, type: \"ident\" })\n          );\n          return Advance;\n        }\n\n        return advance_ident(true)();\n      },\n      function () {\n        state.scope.enter();\n        return Advance;\n      },\n      advance(\"{\"),\n      function () {\n        if (token.type === \"preprocessor\") {\n          state.fake(adhoc());\n          tokens.shift();\n          return;\n        }\n        if (token.data === \"}\") {\n          state.scope.exit();\n          tokens.shift();\n          return state.shift();\n        }\n        if (token.data === \";\") {\n          tokens.shift();\n          return;\n        }\n        state.unshift(decl(DECL_STRUCT));\n      }\n    );\n\n    parse_precision = stative(\n      function () {\n        return tokens.shift(), Advance;\n      },\n      function () {\n        return (\n          assert(\"keyword\", [\"lowp\", \"mediump\", \"highp\"]) &&\n          (state.unshift(keyword()), Advance)\n        );\n      },\n      function () {\n        return state.unshift(keyword()), Advance;\n      },\n      function () {\n        return state.shift();\n      }\n    );\n\n    parse_quantifier = stative(\n      advance(\"[\"),\n      advance_expr(\"]\"),\n      advance(\"]\"),\n      function () {\n        return state.shift();\n      }\n    );\n\n    parse_forloop = stative(\n      advance(\"for\", \"keyword\"),\n      advance(\"(\"),\n      function () {\n        let lookup;\n        if (token.type === \"ident\") {\n          if (!(lookup = state.scope.find(token.data))) {\n            lookup = state.create_node();\n          }\n\n          if (lookup.parent.type === \"struct\") {\n            return state.unshift(decl(DECL_STATEMENT)), Advance;\n          }\n        } else if (token.type === \"builtin\" || token.type === \"keyword\") {\n          return state.unshift(decl(DECL_STATEMENT)), Advance;\n        }\n        return advance_expr(\";\")();\n      },\n      advance(\";\"),\n      advance_expr(\";\"),\n      advance(\";\"),\n      advance_expr(\")\"),\n      advance(\")\"),\n      maybe_stmtlist(3),\n      advance_stmtlist(),\n      advance(\"}\"),\n      popstmt()\n    );\n\n    parse_if = stative(\n      advance(\"if\", \"keyword\"),\n      advance(\"(\"),\n      advance_expr(\")\"),\n      advance(\")\"),\n      maybe_stmtlist(3),\n      advance_stmtlist(),\n      advance(\"}\"),\n      function () {\n        if (token.data === \"else\") {\n          return tokens.shift(), state.unshift(stmt()), Advance;\n        }\n        return popstmt()();\n      },\n      popstmt()\n    );\n\n    parse_return = stative(\n      advance(\"return\", \"keyword\"),\n      function () {\n        if (token.data === \";\") return Advance;\n        return state.unshift(expr(\";\")), Advance;\n      },\n      function () {\n        tokens.shift(), popstmt()();\n      }\n    );\n\n    parse_whileloop = stative(\n      advance(\"while\", \"keyword\"),\n      advance(\"(\"),\n      advance_expr(\")\"),\n      advance(\")\"),\n      maybe_stmtlist(3),\n      advance_stmtlist(),\n      advance(\"}\"),\n      popstmt()\n    );\n\n    parse_dowhileloop = stative(\n      advance(\"do\", \"keyword\"),\n      maybe_stmtlist(3),\n      advance_stmtlist(),\n      advance(\"}\"),\n      advance(\"while\", \"keyword\"),\n      advance(\"(\"),\n      advance_expr(\")\"),\n      advance(\")\"),\n      popstmt()\n    );\n\n    parse_function = stative(\n      function () {\n        for (let i = 1, len = state.length; i < len; ++i)\n          if (state[i].mode === FUNCTION) {\n            return unexpected(\n              \"function definition is not allowed within another function\"\n            );\n          }\n\n        return Advance;\n      },\n      function () {\n        if (!assert(\"ident\")) return;\n\n        const name = token.data,\n          lookup = state.scope.find(name);\n\n        state.unshift(ident());\n        state.scope.define(name);\n\n        state.scope.enter(lookup ? lookup.scope : null);\n        return Advance;\n      },\n      advance(\"(\"),\n      function () {\n        return state.unshift(fnargs()), Advance;\n      },\n      advance(\")\"),\n      function () {\n        // forward decl\n        if (token.data === \";\") {\n          return state.scope.exit(), state.shift(), state.shift();\n        }\n        return Advance;\n      },\n      advance(\"{\"),\n      advance_stmtlist(),\n      advance(\"}\"),\n      function () {\n        state.scope.exit();\n        return Advance;\n      },\n      function () {\n        return state.shift(), state.shift(), state.shift();\n      }\n    );\n\n    parse_function_args = stative(\n      function () {\n        if (token.data === \"void\") {\n          state.fake(keyword());\n          tokens.shift();\n          return Advance;\n        }\n        if (token.data === \")\") {\n          state.shift();\n          return;\n        }\n        if (token.data === \"struct\") {\n          state.unshift(struct(NO_ASSIGN_ALLOWED, NO_COMMA_ALLOWED));\n          return Advance;\n        }\n        state.unshift(decl(DECL_FUNCTION));\n        return Advance;\n      },\n      function () {\n        if (token.data === \",\") {\n          tokens.shift();\n          return 0;\n        }\n        if (token.data === \")\") {\n          state.shift();\n          return;\n        }\n        unexpected(\"expected one of `,` or `)`, got \" + token.data);\n      }\n    );\n  }\n}\n\nfunction mknode(mode, sourcetoken) {\n  return {\n    mode: mode,\n    token: sourcetoken,\n    children: [],\n    type: stmt_type[mode],\n    id: (Math.random() * 0xffffffff).toString(16),\n  };\n}\n\nfunction is_storage(token) {\n  return (\n    token.data === \"const\" ||\n    token.data === \"attribute\" ||\n    token.data === \"uniform\" ||\n    token.data === \"varying\"\n  );\n}\n\nfunction is_parameter(token) {\n  return token.data === \"in\" || token.data === \"inout\" || token.data === \"out\";\n}\n\nfunction is_precision(token) {\n  return (\n    token.data === \"highp\" || token.data === \"mediump\" || token.data === \"lowp\"\n  );\n}\n","module.exports = scope;\n\nfunction scope(state) {\n  if (this.constructor !== scope) return new scope(state);\n\n  this.state = state;\n  this.scopes = [];\n  this.current = null;\n}\n\nconst cons = scope,\n  proto = cons.prototype;\n\nproto.enter = function (s) {\n  this.scopes.push((this.current = this.state[0].scope = s || {}));\n};\n\nproto.exit = function () {\n  this.scopes.pop();\n  this.current = this.scopes[this.scopes.length - 1];\n};\n\nproto.define = function (str) {\n  this.current[str] = this.state[0];\n};\n\nproto.find = function (name, fail) {\n  for (let i = this.scopes.length - 1; i > -1; --i) {\n    if (this.scopes[i].hasOwnProperty(name)) {\n      return this.scopes[i][name];\n    }\n  }\n\n  return null;\n};\n","module.exports = tokenize\r\n\r\nvar literals100 = require('./lib/literals')\r\n  , operators = require('./lib/operators')\r\n  , builtins100 = require('./lib/builtins')\r\n  , literals300es = require('./lib/literals-300es')\r\n  , builtins300es = require('./lib/builtins-300es')\r\n\r\nvar NORMAL = 999          // <-- never emitted\r\n  , TOKEN = 9999          // <-- never emitted\r\n  , BLOCK_COMMENT = 0\r\n  , LINE_COMMENT = 1\r\n  , PREPROCESSOR = 2\r\n  , OPERATOR = 3\r\n  , INTEGER = 4\r\n  , FLOAT = 5\r\n  , IDENT = 6\r\n  , BUILTIN = 7\r\n  , KEYWORD = 8\r\n  , WHITESPACE = 9\r\n  , EOF = 10\r\n  , HEX = 11\r\n\r\nvar map = [\r\n    'block-comment'\r\n  , 'line-comment'\r\n  , 'preprocessor'\r\n  , 'operator'\r\n  , 'integer'\r\n  , 'float'\r\n  , 'ident'\r\n  , 'builtin'\r\n  , 'keyword'\r\n  , 'whitespace'\r\n  , 'eof'\r\n  , 'integer'\r\n]\r\n\r\nfunction tokenize(opt) {\r\n  var i = 0\r\n    , total = 0\r\n    , mode = NORMAL\r\n    , c\r\n    , last\r\n    , content = []\r\n    , tokens = []\r\n    , token_idx = 0\r\n    , token_offs = 0\r\n    , line = 1\r\n    , col = 0\r\n    , start = 0\r\n    , isnum = false\r\n    , isoperator = false\r\n    , input = ''\r\n    , len\r\n\r\n  opt = opt || {}\r\n  var allBuiltins = builtins100\r\n  var allLiterals = literals100\r\n  if (opt.version === '300 es') {\r\n    allBuiltins = builtins300es\r\n    allLiterals = literals300es\r\n  }\r\n\r\n  // cache by name\r\n  var builtinsDict = {}, literalsDict = {}\r\n  for (var i = 0; i < allBuiltins.length; i++) {\r\n    builtinsDict[allBuiltins[i]] = true\r\n  }\r\n  for (var i = 0; i < allLiterals.length; i++) {\r\n    literalsDict[allLiterals[i]] = true\r\n  }\r\n\r\n  return function(data) {\r\n    tokens = []\r\n    if (data !== null) return write(data)\r\n    return end()\r\n  }\r\n\r\n  function token(data) {\r\n    if (data.length) {\r\n      tokens.push({\r\n        type: map[mode]\r\n      , data: data\r\n      , position: start\r\n      , line: line\r\n      , column: col\r\n      })\r\n    }\r\n  }\r\n\r\n  function write(chunk) {\r\n    i = 0\r\n\r\n    if (chunk.toString) chunk = chunk.toString()\r\n\r\n    input += chunk.replace(/\\r\\n/g, '\\n')\r\n    len = input.length\r\n\r\n\r\n    var last\r\n\r\n    while(c = input[i], i < len) {\r\n      last = i\r\n\r\n      switch(mode) {\r\n        case BLOCK_COMMENT: i = block_comment(); break\r\n        case LINE_COMMENT: i = line_comment(); break\r\n        case PREPROCESSOR: i = preprocessor(); break\r\n        case OPERATOR: i = operator(); break\r\n        case INTEGER: i = integer(); break\r\n        case HEX: i = hex(); break\r\n        case FLOAT: i = decimal(); break\r\n        case TOKEN: i = readtoken(); break\r\n        case WHITESPACE: i = whitespace(); break\r\n        case NORMAL: i = normal(); break\r\n      }\r\n\r\n      if(last !== i) {\r\n        switch(input[last]) {\r\n          case '\\n': col = 0; ++line; break\r\n          default: ++col; break\r\n        }\r\n      }\r\n    }\r\n\r\n    total += i\r\n    input = input.slice(i)\r\n    return tokens\r\n  }\r\n\r\n  function end(chunk) {\r\n    if(content.length) {\r\n      token(content.join(''))\r\n    }\r\n\r\n    mode = EOF\r\n    token('(eof)')\r\n    return tokens\r\n  }\r\n\r\n  function normal() {\r\n    content = content.length ? [] : content\r\n\r\n    if(last === '/' && c === '*') {\r\n      start = total + i - 1\r\n      mode = BLOCK_COMMENT\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if(last === '/' && c === '/') {\r\n      start = total + i - 1\r\n      mode = LINE_COMMENT\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if(c === '#') {\r\n      mode = PREPROCESSOR\r\n      start = total + i\r\n      return i\r\n    }\r\n\r\n    if(/\\s/.test(c)) {\r\n      mode = WHITESPACE\r\n      start = total + i\r\n      return i\r\n    }\r\n\r\n    isnum = /\\d/.test(c)\r\n    isoperator = /[^\\w_]/.test(c)\r\n\r\n    start = total + i\r\n    mode = isnum ? INTEGER : isoperator ? OPERATOR : TOKEN\r\n    return i\r\n  }\r\n\r\n  function whitespace() {\r\n    if(/[^\\s]/g.test(c)) {\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function preprocessor() {\r\n    if((c === '\\r' || c === '\\n') && last !== '\\\\') {\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function line_comment() {\r\n    return preprocessor()\r\n  }\r\n\r\n  function block_comment() {\r\n    if(c === '/' && last === '*') {\r\n      content.push(c)\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i + 1\r\n    }\r\n\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function operator() {\r\n    if(last === '.' && /\\d/.test(c)) {\r\n      mode = FLOAT\r\n      return i\r\n    }\r\n\r\n    if(last === '/' && c === '*') {\r\n      mode = BLOCK_COMMENT\r\n      return i\r\n    }\r\n\r\n    if(last === '/' && c === '/') {\r\n      mode = LINE_COMMENT\r\n      return i\r\n    }\r\n\r\n    if(c === '.' && content.length) {\r\n      while(determine_operator(content));\r\n\r\n      mode = FLOAT\r\n      return i\r\n    }\r\n\r\n    if(c === ';' || c === ')' || c === '(') {\r\n      if(content.length) while(determine_operator(content));\r\n      token(c)\r\n      mode = NORMAL\r\n      return i + 1\r\n    }\r\n\r\n    var is_composite_operator = content.length === 2 && c !== '='\r\n    if(/[\\w_\\d\\s]/.test(c) || is_composite_operator) {\r\n      while(determine_operator(content));\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function determine_operator(buf) {\r\n    var j = 0\r\n      , idx\r\n      , res\r\n\r\n    do {\r\n      idx = operators.indexOf(buf.slice(0, buf.length + j).join(''))\r\n      res = operators[idx]\r\n\r\n      if(idx === -1) {\r\n        if(j-- + buf.length > 0) continue\r\n        res = buf.slice(0, 1).join('')\r\n      }\r\n\r\n      token(res)\r\n\r\n      start += res.length\r\n      content = content.slice(res.length)\r\n      return content.length\r\n    } while(1)\r\n  }\r\n\r\n  function hex() {\r\n    if(/[^a-fA-F0-9]/.test(c)) {\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function integer() {\r\n    if(c === '.') {\r\n      content.push(c)\r\n      mode = FLOAT\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if(/[eE]/.test(c)) {\r\n      content.push(c)\r\n      mode = FLOAT\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if(c === 'x' && content.length === 1 && content[0] === '0') {\r\n      mode = HEX\r\n      content.push(c)\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if(/[^\\d]/.test(c)) {\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function decimal() {\r\n    if(c === 'f') {\r\n      content.push(c)\r\n      last = c\r\n      i += 1\r\n    }\r\n\r\n    if(/[eE]/.test(c)) {\r\n      content.push(c)\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if ((c === '-' || c === '+') && /[eE]/.test(last)) {\r\n      content.push(c)\r\n      last = c\r\n      return i + 1\r\n    }\r\n\r\n    if(/[^\\d]/.test(c)) {\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n\r\n  function readtoken() {\r\n    if(/[^\\d\\w_]/.test(c)) {\r\n      var contentstr = content.join('')\r\n      if(literalsDict[contentstr]) {\r\n        mode = KEYWORD\r\n      } else if(builtinsDict[contentstr]) {\r\n        mode = BUILTIN\r\n      } else {\r\n        mode = IDENT\r\n      }\r\n      token(content.join(''))\r\n      mode = NORMAL\r\n      return i\r\n    }\r\n    content.push(c)\r\n    last = c\r\n    return i + 1\r\n  }\r\n}\r\n","// 300es builtins/reserved words that were previously valid in v100\r\nvar v100 = require('./builtins')\r\n\r\n// The texture2D|Cube functions have been removed\r\n// And the gl_ features are updated\r\nv100 = v100.slice().filter(function (b) {\r\n  return !/^(gl\\_|texture)/.test(b)\r\n})\r\n\r\nmodule.exports = v100.concat([\r\n  // the updated gl_ constants\r\n    'gl_VertexID'\r\n  , 'gl_InstanceID'\r\n  , 'gl_Position'\r\n  , 'gl_PointSize'\r\n  , 'gl_FragCoord'\r\n  , 'gl_FrontFacing'\r\n  , 'gl_FragDepth'\r\n  , 'gl_PointCoord'\r\n  , 'gl_MaxVertexAttribs'\r\n  , 'gl_MaxVertexUniformVectors'\r\n  , 'gl_MaxVertexOutputVectors'\r\n  , 'gl_MaxFragmentInputVectors'\r\n  , 'gl_MaxVertexTextureImageUnits'\r\n  , 'gl_MaxCombinedTextureImageUnits'\r\n  , 'gl_MaxTextureImageUnits'\r\n  , 'gl_MaxFragmentUniformVectors'\r\n  , 'gl_MaxDrawBuffers'\r\n  , 'gl_MinProgramTexelOffset'\r\n  , 'gl_MaxProgramTexelOffset'\r\n  , 'gl_DepthRangeParameters'\r\n  , 'gl_DepthRange'\r\n\r\n  // other builtins\r\n  , 'trunc'\r\n  , 'round'\r\n  , 'roundEven'\r\n  , 'isnan'\r\n  , 'isinf'\r\n  , 'floatBitsToInt'\r\n  , 'floatBitsToUint'\r\n  , 'intBitsToFloat'\r\n  , 'uintBitsToFloat'\r\n  , 'packSnorm2x16'\r\n  , 'unpackSnorm2x16'\r\n  , 'packUnorm2x16'\r\n  , 'unpackUnorm2x16'\r\n  , 'packHalf2x16'\r\n  , 'unpackHalf2x16'\r\n  , 'outerProduct'\r\n  , 'transpose'\r\n  , 'determinant'\r\n  , 'inverse'\r\n  , 'texture'\r\n  , 'textureSize'\r\n  , 'textureProj'\r\n  , 'textureLod'\r\n  , 'textureOffset'\r\n  , 'texelFetch'\r\n  , 'texelFetchOffset'\r\n  , 'textureProjOffset'\r\n  , 'textureLodOffset'\r\n  , 'textureProjLod'\r\n  , 'textureProjLodOffset'\r\n  , 'textureGrad'\r\n  , 'textureGradOffset'\r\n  , 'textureProjGrad'\r\n  , 'textureProjGradOffset'\r\n])\r\n","module.exports = [\r\n  // Keep this list sorted\r\n  'abs'\r\n  , 'acos'\r\n  , 'all'\r\n  , 'any'\r\n  , 'asin'\r\n  , 'atan'\r\n  , 'ceil'\r\n  , 'clamp'\r\n  , 'cos'\r\n  , 'cross'\r\n  , 'dFdx'\r\n  , 'dFdy'\r\n  , 'degrees'\r\n  , 'distance'\r\n  , 'dot'\r\n  , 'equal'\r\n  , 'exp'\r\n  , 'exp2'\r\n  , 'faceforward'\r\n  , 'floor'\r\n  , 'fract'\r\n  , 'gl_BackColor'\r\n  , 'gl_BackLightModelProduct'\r\n  , 'gl_BackLightProduct'\r\n  , 'gl_BackMaterial'\r\n  , 'gl_BackSecondaryColor'\r\n  , 'gl_ClipPlane'\r\n  , 'gl_ClipVertex'\r\n  , 'gl_Color'\r\n  , 'gl_DepthRange'\r\n  , 'gl_DepthRangeParameters'\r\n  , 'gl_EyePlaneQ'\r\n  , 'gl_EyePlaneR'\r\n  , 'gl_EyePlaneS'\r\n  , 'gl_EyePlaneT'\r\n  , 'gl_Fog'\r\n  , 'gl_FogCoord'\r\n  , 'gl_FogFragCoord'\r\n  , 'gl_FogParameters'\r\n  , 'gl_FragColor'\r\n  , 'gl_FragCoord'\r\n  , 'gl_FragData'\r\n  , 'gl_FragDepth'\r\n  , 'gl_FragDepthEXT'\r\n  , 'gl_FrontColor'\r\n  , 'gl_FrontFacing'\r\n  , 'gl_FrontLightModelProduct'\r\n  , 'gl_FrontLightProduct'\r\n  , 'gl_FrontMaterial'\r\n  , 'gl_FrontSecondaryColor'\r\n  , 'gl_LightModel'\r\n  , 'gl_LightModelParameters'\r\n  , 'gl_LightModelProducts'\r\n  , 'gl_LightProducts'\r\n  , 'gl_LightSource'\r\n  , 'gl_LightSourceParameters'\r\n  , 'gl_MaterialParameters'\r\n  , 'gl_MaxClipPlanes'\r\n  , 'gl_MaxCombinedTextureImageUnits'\r\n  , 'gl_MaxDrawBuffers'\r\n  , 'gl_MaxFragmentUniformComponents'\r\n  , 'gl_MaxLights'\r\n  , 'gl_MaxTextureCoords'\r\n  , 'gl_MaxTextureImageUnits'\r\n  , 'gl_MaxTextureUnits'\r\n  , 'gl_MaxVaryingFloats'\r\n  , 'gl_MaxVertexAttribs'\r\n  , 'gl_MaxVertexTextureImageUnits'\r\n  , 'gl_MaxVertexUniformComponents'\r\n  , 'gl_ModelViewMatrix'\r\n  , 'gl_ModelViewMatrixInverse'\r\n  , 'gl_ModelViewMatrixInverseTranspose'\r\n  , 'gl_ModelViewMatrixTranspose'\r\n  , 'gl_ModelViewProjectionMatrix'\r\n  , 'gl_ModelViewProjectionMatrixInverse'\r\n  , 'gl_ModelViewProjectionMatrixInverseTranspose'\r\n  , 'gl_ModelViewProjectionMatrixTranspose'\r\n  , 'gl_MultiTexCoord0'\r\n  , 'gl_MultiTexCoord1'\r\n  , 'gl_MultiTexCoord2'\r\n  , 'gl_MultiTexCoord3'\r\n  , 'gl_MultiTexCoord4'\r\n  , 'gl_MultiTexCoord5'\r\n  , 'gl_MultiTexCoord6'\r\n  , 'gl_MultiTexCoord7'\r\n  , 'gl_Normal'\r\n  , 'gl_NormalMatrix'\r\n  , 'gl_NormalScale'\r\n  , 'gl_ObjectPlaneQ'\r\n  , 'gl_ObjectPlaneR'\r\n  , 'gl_ObjectPlaneS'\r\n  , 'gl_ObjectPlaneT'\r\n  , 'gl_Point'\r\n  , 'gl_PointCoord'\r\n  , 'gl_PointParameters'\r\n  , 'gl_PointSize'\r\n  , 'gl_Position'\r\n  , 'gl_ProjectionMatrix'\r\n  , 'gl_ProjectionMatrixInverse'\r\n  , 'gl_ProjectionMatrixInverseTranspose'\r\n  , 'gl_ProjectionMatrixTranspose'\r\n  , 'gl_SecondaryColor'\r\n  , 'gl_TexCoord'\r\n  , 'gl_TextureEnvColor'\r\n  , 'gl_TextureMatrix'\r\n  , 'gl_TextureMatrixInverse'\r\n  , 'gl_TextureMatrixInverseTranspose'\r\n  , 'gl_TextureMatrixTranspose'\r\n  , 'gl_Vertex'\r\n  , 'greaterThan'\r\n  , 'greaterThanEqual'\r\n  , 'inversesqrt'\r\n  , 'length'\r\n  , 'lessThan'\r\n  , 'lessThanEqual'\r\n  , 'log'\r\n  , 'log2'\r\n  , 'matrixCompMult'\r\n  , 'max'\r\n  , 'min'\r\n  , 'mix'\r\n  , 'mod'\r\n  , 'normalize'\r\n  , 'not'\r\n  , 'notEqual'\r\n  , 'pow'\r\n  , 'radians'\r\n  , 'reflect'\r\n  , 'refract'\r\n  , 'sign'\r\n  , 'sin'\r\n  , 'smoothstep'\r\n  , 'sqrt'\r\n  , 'step'\r\n  , 'tan'\r\n  , 'texture2D'\r\n  , 'texture2DLod'\r\n  , 'texture2DProj'\r\n  , 'texture2DProjLod'\r\n  , 'textureCube'\r\n  , 'textureCubeLod'\r\n  , 'texture2DLodEXT'\r\n  , 'texture2DProjLodEXT'\r\n  , 'textureCubeLodEXT'\r\n  , 'texture2DGradEXT'\r\n  , 'texture2DProjGradEXT'\r\n  , 'textureCubeGradEXT'\r\n]\r\n","var v100 = require('./literals')\r\n\r\nmodule.exports = v100.slice().concat([\r\n   'layout'\r\n  , 'centroid'\r\n  , 'smooth'\r\n  , 'case'\r\n  , 'mat2x2'\r\n  , 'mat2x3'\r\n  , 'mat2x4'\r\n  , 'mat3x2'\r\n  , 'mat3x3'\r\n  , 'mat3x4'\r\n  , 'mat4x2'\r\n  , 'mat4x3'\r\n  , 'mat4x4'\r\n  , 'uvec2'\r\n  , 'uvec3'\r\n  , 'uvec4'\r\n  , 'samplerCubeShadow'\r\n  , 'sampler2DArray'\r\n  , 'sampler2DArrayShadow'\r\n  , 'isampler2D'\r\n  , 'isampler3D'\r\n  , 'isamplerCube'\r\n  , 'isampler2DArray'\r\n  , 'usampler2D'\r\n  , 'usampler3D'\r\n  , 'usamplerCube'\r\n  , 'usampler2DArray'\r\n  , 'coherent'\r\n  , 'restrict'\r\n  , 'readonly'\r\n  , 'writeonly'\r\n  , 'resource'\r\n  , 'atomic_uint'\r\n  , 'noperspective'\r\n  , 'patch'\r\n  , 'sample'\r\n  , 'subroutine'\r\n  , 'common'\r\n  , 'partition'\r\n  , 'active'\r\n  , 'filter'\r\n  , 'image1D'\r\n  , 'image2D'\r\n  , 'image3D'\r\n  , 'imageCube'\r\n  , 'iimage1D'\r\n  , 'iimage2D'\r\n  , 'iimage3D'\r\n  , 'iimageCube'\r\n  , 'uimage1D'\r\n  , 'uimage2D'\r\n  , 'uimage3D'\r\n  , 'uimageCube'\r\n  , 'image1DArray'\r\n  , 'image2DArray'\r\n  , 'iimage1DArray'\r\n  , 'iimage2DArray'\r\n  , 'uimage1DArray'\r\n  , 'uimage2DArray'\r\n  , 'image1DShadow'\r\n  , 'image2DShadow'\r\n  , 'image1DArrayShadow'\r\n  , 'image2DArrayShadow'\r\n  , 'imageBuffer'\r\n  , 'iimageBuffer'\r\n  , 'uimageBuffer'\r\n  , 'sampler1DArray'\r\n  , 'sampler1DArrayShadow'\r\n  , 'isampler1D'\r\n  , 'isampler1DArray'\r\n  , 'usampler1D'\r\n  , 'usampler1DArray'\r\n  , 'isampler2DRect'\r\n  , 'usampler2DRect'\r\n  , 'samplerBuffer'\r\n  , 'isamplerBuffer'\r\n  , 'usamplerBuffer'\r\n  , 'sampler2DMS'\r\n  , 'isampler2DMS'\r\n  , 'usampler2DMS'\r\n  , 'sampler2DMSArray'\r\n  , 'isampler2DMSArray'\r\n  , 'usampler2DMSArray'\r\n])\r\n","module.exports = [\r\n  // current\r\n    'precision'\r\n  , 'highp'\r\n  , 'mediump'\r\n  , 'lowp'\r\n  , 'attribute'\r\n  , 'const'\r\n  , 'uniform'\r\n  , 'varying'\r\n  , 'break'\r\n  , 'continue'\r\n  , 'do'\r\n  , 'for'\r\n  , 'while'\r\n  , 'if'\r\n  , 'else'\r\n  , 'in'\r\n  , 'out'\r\n  , 'inout'\r\n  , 'float'\r\n  , 'int'\r\n  , 'uint'\r\n  , 'void'\r\n  , 'bool'\r\n  , 'true'\r\n  , 'false'\r\n  , 'discard'\r\n  , 'return'\r\n  , 'mat2'\r\n  , 'mat3'\r\n  , 'mat4'\r\n  , 'vec2'\r\n  , 'vec3'\r\n  , 'vec4'\r\n  , 'ivec2'\r\n  , 'ivec3'\r\n  , 'ivec4'\r\n  , 'bvec2'\r\n  , 'bvec3'\r\n  , 'bvec4'\r\n  , 'sampler1D'\r\n  , 'sampler2D'\r\n  , 'sampler3D'\r\n  , 'samplerCube'\r\n  , 'sampler1DShadow'\r\n  , 'sampler2DShadow'\r\n  , 'struct'\r\n\r\n  // future\r\n  , 'asm'\r\n  , 'class'\r\n  , 'union'\r\n  , 'enum'\r\n  , 'typedef'\r\n  , 'template'\r\n  , 'this'\r\n  , 'packed'\r\n  , 'goto'\r\n  , 'switch'\r\n  , 'default'\r\n  , 'inline'\r\n  , 'noinline'\r\n  , 'volatile'\r\n  , 'public'\r\n  , 'static'\r\n  , 'extern'\r\n  , 'external'\r\n  , 'interface'\r\n  , 'long'\r\n  , 'short'\r\n  , 'double'\r\n  , 'half'\r\n  , 'fixed'\r\n  , 'unsigned'\r\n  , 'input'\r\n  , 'output'\r\n  , 'hvec2'\r\n  , 'hvec3'\r\n  , 'hvec4'\r\n  , 'dvec2'\r\n  , 'dvec3'\r\n  , 'dvec4'\r\n  , 'fvec2'\r\n  , 'fvec3'\r\n  , 'fvec4'\r\n  , 'sampler2DRect'\r\n  , 'sampler3DRect'\r\n  , 'sampler2DRectShadow'\r\n  , 'sizeof'\r\n  , 'cast'\r\n  , 'namespace'\r\n  , 'using'\r\n]\r\n","module.exports = [\r\n    '<<='\r\n  , '>>='\r\n  , '++'\r\n  , '--'\r\n  , '<<'\r\n  , '>>'\r\n  , '<='\r\n  , '>='\r\n  , '=='\r\n  , '!='\r\n  , '&&'\r\n  , '||'\r\n  , '+='\r\n  , '-='\r\n  , '*='\r\n  , '/='\r\n  , '%='\r\n  , '&='\r\n  , '^^'\r\n  , '^='\r\n  , '|='\r\n  , '('\r\n  , ')'\r\n  , '['\r\n  , ']'\r\n  , '.'\r\n  , '!'\r\n  , '~'\r\n  , '*'\r\n  , '/'\r\n  , '%'\r\n  , '+'\r\n  , '-'\r\n  , '<'\r\n  , '>'\r\n  , '&'\r\n  , '^'\r\n  , '|'\r\n  , '?'\r\n  , ':'\r\n  , '='\r\n  , ','\r\n  , ';'\r\n  , '{'\r\n  , '}'\r\n]\r\n","var tokenize = require('./index')\r\n\r\nmodule.exports = tokenizeString\r\n\r\nfunction tokenizeString(str, opt) {\r\n  var generator = tokenize(opt)\r\n  var tokens = []\r\n\r\n  tokens = tokens.concat(generator(str))\r\n  tokens = tokens.concat(generator(null))\r\n\r\n  return tokens\r\n}\r\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS202: Simplify dynamic range loops\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nexports.make = function (x) {\n  if (x == null) {\n    x = [];\n  }\n  if (!(x instanceof Array)) {\n    x = [+x != null ? +x : 0];\n  }\n  return x;\n};\n\nexports.nest = (a, b) => a.concat(b);\n\nexports.compare = function (a, b) {\n  const n = Math.min(a.length, b.length);\n  for (\n    let i = 0, end = n, asc = 0 <= end;\n    asc ? i < end : i > end;\n    asc ? i++ : i--\n  ) {\n    const p = a[i];\n    const q = b[i];\n    if (p > q) {\n      return -1;\n    }\n    if (p < q) {\n      return 1;\n    }\n  }\n  a = a.length;\n  b = b.length;\n  if (a > b) {\n    return -1;\n  } else if (a < b) {\n    return 1;\n  } else {\n    return 0;\n  }\n};\n\nexports.max = function (a, b) {\n  if (exports.compare(a, b) > 0) {\n    return b;\n  } else {\n    return a;\n  }\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n/*\n  Graph of nodes with outlets\n*/\nexport class Graph {\n  static initClass() {\n    this.index = 0;\n\n    this.IN = 0;\n    this.OUT = 1;\n  }\n  // eslint-disable-next-line no-unused-vars\n  static id(name) {\n    return ++Graph.index;\n  }\n\n  constructor(nodes, parent = null) {\n    this.parent = parent;\n    this.id = Graph.id();\n    this.nodes = [];\n    nodes && this.add(nodes);\n  }\n\n  inputs() {\n    const inputs = [];\n    for (const node of Array.from(this.nodes)) {\n      for (const outlet of Array.from(node.inputs)) {\n        if (outlet.input === null) {\n          inputs.push(outlet);\n        }\n      }\n    }\n    return inputs;\n  }\n\n  outputs() {\n    const outputs = [];\n    for (const node of Array.from(this.nodes)) {\n      for (const outlet of Array.from(node.outputs)) {\n        if (outlet.output.length === 0) {\n          outputs.push(outlet);\n        }\n      }\n    }\n    return outputs;\n  }\n\n  getIn(name) {\n    return Array.from(this.inputs()).filter(\n      (outlet) => outlet.name === name\n    )[0];\n  }\n  getOut(name) {\n    return Array.from(this.outputs()).filter(\n      (outlet) => outlet.name === name\n    )[0];\n  }\n\n  add(node, ignore) {\n    if (node.length) {\n      for (const _node of Array.from(node)) {\n        this.add(_node);\n      }\n      return;\n    }\n\n    if (node.graph && !ignore) {\n      throw new Error(\"Adding node to two graphs at once\");\n    }\n\n    node.graph = this;\n    this.nodes.push(node);\n  }\n\n  remove(node, ignore) {\n    if (node.length) {\n      for (const _node of Array.from(node)) {\n        this.remove(_node);\n      }\n      return;\n    }\n\n    if (node.graph !== this) {\n      throw new Error(\"Removing node from wrong graph.\");\n    }\n\n    ignore || node.disconnect();\n\n    this.nodes.splice(this.nodes.indexOf(node), 1);\n    node.graph = null;\n  }\n\n  adopt(node) {\n    if (node.length) {\n      for (const _node of Array.from(node)) {\n        this.adopt(_node);\n      }\n      return;\n    }\n\n    node.graph.remove(node, true);\n    this.add(node, true);\n  }\n}\nGraph.initClass();\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Graph } from \"./graph\";\n\n/*\n  In/out outlet on node\n*/\nexport class Outlet {\n  static initClass() {\n    this.index = 0;\n  }\n  static make(outlet, extra) {\n    if (extra == null) {\n      extra = {};\n    }\n    const meta = extra;\n    if (outlet.meta != null) {\n      for (const key in outlet.meta) {\n        const value = outlet.meta[key];\n        meta[key] = value;\n      }\n    }\n    return new Outlet(\n      outlet.inout,\n      outlet.name,\n      outlet.hint,\n      outlet.type,\n      meta\n    );\n  }\n  static id(name) {\n    return `_io_${++Outlet.index}_${name}`;\n  }\n\n  static hint(name) {\n    name = name.replace(/^_io_[0-9]+_/, \"\");\n    name = name.replace(/_i_o$/, \"\");\n    return (name = name.replace(/(In|Out|Inout|InOut)$/, \"\"));\n  }\n\n  constructor(inout, name, hint, type, meta, id) {\n    this.inout = inout;\n    this.name = name;\n    this.hint = hint;\n    this.type = type;\n    if (meta == null) {\n      meta = {};\n    }\n    this.meta = meta;\n    this.id = id;\n    if (this.hint == null) {\n      this.hint = Outlet.hint(this.name);\n    }\n\n    this.node = null;\n    this.input = null;\n    this.output = [];\n    if (this.id == null) {\n      this.id = Outlet.id(this.hint);\n    }\n  }\n\n  // Change into given outlet without touching connections\n  morph(outlet) {\n    this.inout = outlet.inout;\n    this.name = outlet.name;\n    this.hint = outlet.hint;\n    this.type = outlet.type;\n    return (this.meta = outlet.meta);\n  }\n\n  // Copy with unique name and cloned metadata\n  dupe(name) {\n    if (name == null) {\n      name = this.id;\n    }\n    const outlet = Outlet.make(this);\n    outlet.name = name;\n    return outlet;\n  }\n\n  // Connect to given outlet\n  connect(outlet) {\n    // Auto-reverse in/out to out/in\n    if (this.inout === Graph.IN && outlet.inout === Graph.OUT) {\n      return outlet.connect(this);\n    }\n\n    // Disallow bad combinations\n    if (this.inout !== Graph.OUT || outlet.inout !== Graph.IN) {\n      throw new Error(\"Can only connect out to in.\");\n    }\n\n    // Check for existing connection\n    if (outlet.input === this) {\n      return;\n    }\n\n    // Disconnect existing connections\n    outlet.disconnect();\n\n    // Add new connection.\n    outlet.input = this;\n    return this.output.push(outlet);\n  }\n\n  // Disconnect given outlet (or all)\n  disconnect(outlet) {\n    // Disconnect input from the other side.\n    if (this.input) {\n      this.input.disconnect(this);\n    }\n\n    if (this.output.length) {\n      if (outlet) {\n        // Remove one outgoing connection.\n        const index = this.output.indexOf(outlet);\n        if (index >= 0) {\n          this.output.splice(index, 1);\n          return (outlet.input = null);\n        }\n      } else {\n        // Remove all outgoing connections.\n        for (outlet of Array.from(this.output)) {\n          outlet.input = null;\n        }\n        return (this.output = []);\n      }\n    }\n  }\n}\nOutlet.initClass();\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Graph } from \"./graph\";\nimport { Outlet } from \"./outlet\";\n\n/*\n Node in graph.\n*/\nexport class Node {\n  static initClass() {\n    this.index = 0;\n  }\n  static id(_name) {\n    return ++Node.index;\n  }\n\n  constructor(owner, outlets) {\n    this.owner = owner;\n    this.graph = null;\n    this.inputs = [];\n    this.outputs = [];\n    this.all = [];\n    this.outlets = null;\n    this.id = Node.id();\n\n    this.setOutlets(outlets);\n  }\n\n  // Retrieve input\n  getIn(name) {\n    return Array.from(this.inputs).filter((outlet) => outlet.name === name)[0];\n  }\n\n  // Retrieve output\n  getOut(name) {\n    return Array.from(this.outputs).filter((outlet) => outlet.name === name)[0];\n  }\n\n  // Retrieve by name\n  get(name) {\n    return this.getIn(name) || this.getOut(name);\n  }\n\n  // Set new outlet definition\n  setOutlets(outlets) {\n    if (outlets != null) {\n      // First init\n      let outlet;\n      if (this.outlets == null) {\n        this.outlets = {};\n        for (outlet of Array.from(outlets)) {\n          if (!(outlet instanceof Outlet)) {\n            outlet = Outlet.make(outlet);\n          }\n          this._add(outlet);\n        }\n        return;\n      }\n\n      // Return new/old outlet matching hash key\n      const hash = (\n        outlet // Match by name, direction and type.\n      ) => [outlet.name, outlet.inout, outlet.type].join(\"-\");\n\n      // Build hash of new outlets\n      const match = {};\n      for (outlet of Array.from(outlets)) {\n        match[hash(outlet)] = true;\n      }\n\n      // Remove missing outlets, record matches\n      for (let key in this.outlets) {\n        outlet = this.outlets[key];\n        key = hash(outlet);\n        if (match[key]) {\n          match[key] = outlet;\n        } else {\n          this._remove(outlet);\n        }\n      }\n\n      // Insert new outlets\n      for (outlet of Array.from(outlets)) {\n        // Find match by hash\n        const existing = match[hash(outlet)];\n        if (existing instanceof Outlet) {\n          // Update existing outlets in place to retain connections.\n          this._morph(existing, outlet);\n        } else {\n          // Spawn new outlet\n          if (!(outlet instanceof Outlet)) {\n            outlet = Outlet.make(outlet);\n          }\n          this._add(outlet);\n        }\n      }\n\n      this;\n    }\n    return this.outlets;\n  }\n\n  // Connect to the target node by matching up inputs and outputs.\n  connect(node, empty, force) {\n    let dest, dests, hint, source, type;\n    const outlets = {};\n    const hints = {};\n\n    const typeHint = (outlet) => type + \"/\" + outlet.hint;\n\n    // Hash the types/hints of available target outlets.\n    for (dest of Array.from(node.inputs)) {\n      // Only autoconnect if not already connected\n      let list;\n      if (!force && dest.input) {\n        continue;\n      }\n\n      // Match outlets by type/name hint, then type/position key\n      ({ type } = dest);\n      hint = typeHint(dest);\n\n      if (!hints[hint]) {\n        hints[hint] = dest;\n      }\n      outlets[type] = list = outlets[type] || [];\n      list.push(dest);\n    }\n\n    // Available source outlets\n    let sources = this.outputs;\n\n    // Ignore connected source if only matching empties.\n    sources = sources.filter((outlet) => !(empty && outlet.output.length));\n\n    // Match hints first\n    for (source of Array.from(sources.slice())) {\n      // Match outlets by type and name\n      ({ type } = source);\n      hint = typeHint(source);\n      dests = outlets[type];\n\n      // Connect if found\n      if ((dest = hints[hint])) {\n        source.connect(dest);\n\n        // Remove from potential set\n        delete hints[hint];\n        dests.splice(dests.indexOf(dest), 1);\n        sources.splice(sources.indexOf(source), 1);\n      }\n    }\n\n    // Match what's left\n    if (!sources.length) {\n      return this;\n    }\n    for (source of Array.from(sources.slice())) {\n      ({ type } = source);\n      dests = outlets[type];\n\n      // Match outlets by type and order\n      if (dests && dests.length) {\n        // Link up and remove from potential set\n        source.connect(dests.shift());\n      }\n    }\n\n    return this;\n  }\n\n  // Disconnect entire node\n  disconnect(_node) {\n    let outlet;\n    for (outlet of Array.from(this.inputs)) {\n      outlet.disconnect();\n    }\n    for (outlet of Array.from(this.outputs)) {\n      outlet.disconnect();\n    }\n\n    return this;\n  }\n\n  // Return hash key for outlet\n  _key(outlet) {\n    return [outlet.name, outlet.inout].join(\"-\");\n  }\n\n  // Add outlet object to node\n  _add(outlet) {\n    const key = this._key(outlet);\n\n    // Sanity checks\n    if (outlet.node) {\n      throw new Error(\"Adding outlet to two nodes at once.\");\n    }\n    if (this.outlets[key]) {\n      throw new Error(`Adding two identical outlets to same node. (${key})`);\n    }\n\n    // Link back outlet\n    outlet.node = this;\n\n    // Add to name hash and inout list\n    if (outlet.inout === Graph.IN) {\n      this.inputs.push(outlet);\n    }\n    if (outlet.inout === Graph.OUT) {\n      this.outputs.push(outlet);\n    }\n    this.all.push(outlet);\n    return (this.outlets[key] = outlet);\n  }\n\n  // Morph outlet to other\n  _morph(existing, outlet) {\n    let key = this._key(outlet);\n    delete this.outlets[key];\n\n    existing.morph(outlet);\n\n    key = this._key(outlet);\n    return (this.outlets[key] = outlet);\n  }\n\n  // Remove outlet object from node.\n  _remove(outlet) {\n    const key = this._key(outlet);\n\n    // Sanity checks\n    if (outlet.node !== this) {\n      throw new Error(\"Removing outlet from wrong node.\");\n    }\n\n    // Disconnect outlet.\n    outlet.disconnect();\n\n    // Unlink outlet.\n    outlet.node = null;\n\n    // Remove from name list and inout list.\n    delete this.outlets[key];\n    if (outlet.inout === Graph.IN) {\n      this.inputs.splice(this.inputs.indexOf(outlet), 1);\n    }\n    if (outlet.inout === Graph.OUT) {\n      this.outputs.splice(this.outputs.indexOf(outlet), 1);\n    }\n    this.all.splice(this.all.indexOf(outlet), 1);\n    return this;\n  }\n}\nNode.initClass();\n","import { Graph } from \"./graph\";\nexport const { IN, OUT } = Graph;\n\nexport * from \"./graph\";\nexport * from \"./node\";\nexport * from \"./outlet\";\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nexport class Snippet {\n  static initClass() {\n    this.index = 0;\n  }\n  static namespace() {\n    return `_sn_${++Snippet.index}_`;\n  }\n\n  static load(language, name, code) {\n    const program = language.parse(name, code);\n    const [sigs, compiler] = Array.from(language.compile(program));\n    return new Snippet(language, sigs, compiler, name, code);\n  }\n\n  constructor(language, _signatures, _compiler, _name, _original) {\n    this.language = language;\n    this._signatures = _signatures;\n    this._compiler = _compiler;\n    this._name = _name;\n    this._original = _original;\n    this.namespace = null;\n    this.code = null;\n\n    this.main = null;\n    this.entry = null;\n\n    this.uniforms = null;\n    this.externals = null;\n    this.symbols = null;\n    this.attributes = null;\n    this.varyings = null;\n\n    // Tidy up object for export\n    if (!this.language) {\n      delete this.language;\n    }\n    if (!this._signatures) {\n      delete this._signatures;\n    }\n    if (!this._compiler) {\n      delete this._compiler;\n    }\n    if (!this._original) {\n      delete this._original;\n    }\n\n    // Insert snippet name if not provided\n    if (!this._name) {\n      this._name =\n        this._signatures != null ? this._signatures.main.name : undefined;\n    }\n  }\n\n  clone() {\n    return new Snippet(\n      this.language,\n      this._signatures,\n      this._compiler,\n      this._name,\n      this._original\n    );\n  }\n\n  bind(config, uniforms, namespace, defines) {\n    // Alt syntax (namespace, uniforms, defines)\n    let def, left;\n    let v;\n    if (uniforms === \"\" + uniforms) {\n      [namespace, uniforms, defines] = Array.from([\n        uniforms,\n        namespace != null ? namespace : {},\n        defines != null ? defines : {},\n      ]);\n      // Alt syntax (uniforms, defines)\n    } else if (namespace !== \"\" + namespace) {\n      [defines, namespace] = Array.from([\n        namespace != null ? namespace : {},\n        undefined,\n      ]);\n    }\n\n    // Prepare data structure\n    this.main = this._signatures.main;\n    this.namespace =\n      (left = namespace != null ? namespace : this.namespace) != null\n        ? left\n        : Snippet.namespace();\n    this.entry = this.namespace + this.main.name;\n\n    this.uniforms = {};\n    this.varyings = {};\n    this.attributes = {};\n    this.externals = {};\n    this.symbols = [];\n    const exist = {};\n    const exceptions = {};\n\n    // Handle globals and locals for prefixing\n    const global = function (name) {\n      exceptions[name] = true;\n      return name;\n    };\n    const local = (name) => {\n      return this.namespace + name;\n    };\n\n    // Apply config\n    if (config.globals) {\n      for (const key of Array.from(config.globals)) {\n        global(key);\n      }\n    }\n    const _u = config.globalUniforms ? global : local;\n    const _v = config.globalVaryings ? global : local;\n    const _a = config.globalAttributes ? global : local;\n    const _e = local;\n\n    // Build finalized properties\n    const x = (def) => {\n      return (exist[def.name] = true);\n    };\n    const u = (def, name) => {\n      return (this.uniforms[_u(name != null ? name : def.name)] = def);\n    };\n    v = (def) => {\n      return (this.varyings[_v(def.name)] = def);\n    };\n    const a = (def) => {\n      return (this.attributes[_a(def.name)] = def);\n    };\n    const e = (def) => {\n      const name = _e(def.name);\n      this.externals[name] = def;\n      return this.symbols.push(name);\n    };\n\n    const redef = (def) => ({\n      type: def.type,\n      name: def.name,\n      value: def.value,\n    });\n\n    for (def of Array.from(this._signatures.uniform)) {\n      x(def);\n    }\n    for (def of Array.from(this._signatures.uniform)) {\n      u(redef(def));\n    }\n    for (def of Array.from(this._signatures.varying)) {\n      v(redef(def));\n    }\n    for (def of Array.from(this._signatures.external)) {\n      e(def);\n    }\n    for (def of Array.from(this._signatures.attribute)) {\n      a(redef(def));\n    }\n    for (const name in uniforms) {\n      def = uniforms[name];\n      if (exist[name]) {\n        u(def, name);\n      }\n    }\n\n    this.body = this.code = this._compiler(this.namespace, exceptions, defines);\n\n    // Adds defs to original snippet for inspection\n    if (defines) {\n      const defs = (() => {\n        const result = [];\n        for (const k in defines) {\n          v = defines[k];\n          result.push(`#define ${k} ${v}`);\n        }\n        return result;\n      })().join(\"\\n\");\n      if (defs.length) {\n        this._original = [\n          defs,\n          \"//----------------------------------------\",\n          this._original,\n        ].join(\"\\n\");\n      }\n    }\n\n    return null;\n  }\n}\nSnippet.initClass();\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport * as Graph from \"../graph\";\nimport * as Priority from \"./priority\";\n\n/*\n  Program assembler\n\n  Builds composite program that can act as new module/snippet\n  Unconnected input/outputs and undefined callbacks are exposed in the new global/main scope\n  If there is only one call with an identical call signature, a #define is output instead.\n*/\nexport const assemble = function (language, namespace, calls, requires) {\n  const generate = language;\n\n  const externals = {};\n  const symbols = [];\n  const uniforms = {};\n  const varyings = {};\n  const attributes = {};\n  const library = {};\n\n  const process = function () {\n    let body;\n    let ns;\n    for (ns in requires) {\n      const r = requires[ns];\n      required(r.node, r.module);\n    }\n\n    [body, calls] = Array.from(handle(calls));\n    if (namespace != null) {\n      body.entry = namespace;\n    }\n    const main = generate.build(body, calls);\n\n    const sorted = (() => {\n      const result = [];\n      for (ns in library) {\n        const lib = library[ns];\n        result.push(lib);\n      }\n      return result;\n    })().sort((a, b) => Priority.compare(a.priority, b.priority));\n    const includes = sorted.map((x) => x.code);\n    includes.push(main.code);\n    const code = generate.lines(includes);\n\n    // Build new virtual snippet\n    return {\n      namespace: main.name,\n      library, // Included library functions\n      body: main.code, // Snippet body\n      code, // Complete snippet (tests/debug)\n      main, // Function signature\n      entry: main.name, // Entry point name\n      symbols,\n      externals,\n      uniforms,\n      varyings,\n      attributes,\n    };\n  };\n\n  // Sort and process calls\n  const handle = (calls) => {\n    let c;\n    calls = (() => {\n      const result = [];\n      for (const ns in calls) {\n        c = calls[ns];\n        result.push(c);\n      }\n      return result;\n    })();\n    calls.sort((a, b) => b.priority - a.priority);\n\n    // Call module in DAG chain\n    const call = (node, module, priority) => {\n      include(node, module, priority);\n      const { main } = module;\n      const { entry } = module;\n\n      const _lookup = (name) => lookup(node, name);\n      const _dangling = (name) => isDangling(node, name);\n      return generate.call(_lookup, _dangling, entry, main.signature, body);\n    };\n\n    const body = generate.body();\n    for (c of Array.from(calls)) {\n      call(c.node, c.module, c.priority);\n    }\n\n    return [body, calls];\n  };\n\n  // Adopt given code as a library at given priority\n  const adopt = function (namespace, code, priority) {\n    const record = library[namespace];\n    if (record != null) {\n      return (record.priority = Priority.max(record.priority, priority));\n    } else {\n      return (library[namespace] = { code, priority });\n    }\n  };\n\n  // Include snippet for a call\n  const include = function (node, module, priority) {\n    let def, key;\n    priority = Priority.make(priority);\n\n    // Adopt snippet's libraries\n    for (const ns in module.library) {\n      const lib = module.library[ns];\n      adopt(ns, lib.code, Priority.nest(priority, lib.priority));\n    }\n\n    // Adopt snippet body as library\n    adopt(module.namespace, module.body, priority);\n\n    // Adopt GL vars\n    for (key in module.uniforms) {\n      def = module.uniforms[key];\n      uniforms[key] = def;\n    }\n    for (key in module.varyings) {\n      def = module.varyings[key];\n      varyings[key] = def;\n    }\n    for (key in module.attributes) {\n      def = module.attributes[key];\n      attributes[key] = def;\n    }\n\n    return required(node, module);\n  };\n\n  const required = (\n    node,\n    module // Adopt external symbols\n  ) =>\n    (() => {\n      const result = [];\n      for (const key of Array.from(module.symbols)) {\n        const ext = module.externals[key];\n        if (isDangling(node, ext.name)) {\n          const copy = {};\n          for (const k in ext) {\n            const v = ext[k];\n            copy[k] = v;\n          }\n          copy.name = lookup(node, ext.name);\n          externals[key] = copy;\n          result.push(symbols.push(key));\n        } else {\n          result.push(undefined);\n        }\n      }\n      return result;\n    })();\n\n  // Check for dangling input/output\n  const isDangling = function (node, name) {\n    const outlet = node.get(name);\n\n    if (outlet.inout === Graph.IN) {\n      return outlet.input === null;\n    } else if (outlet.inout === Graph.OUT) {\n      return outlet.output.length === 0;\n    }\n  };\n\n  // Look up unique name for outlet\n  const lookup = function (node, name) {\n    // Traverse graph edge\n    let outlet = node.get(name);\n    if (!outlet) {\n      return null;\n    }\n\n    if (outlet.input) {\n      outlet = outlet.input;\n    }\n    ({ name } = outlet);\n\n    return outlet.id;\n  };\n\n  return process();\n};\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Snippet } from \"./snippet\";\nimport { assemble } from \"./assemble\";\n\n/*\n  Program assembly model\n\n  Snippets are added to its queue, registering calls and code includes.\n  Calls are de-duped and scheduled at the earliest point required for correct data flow.\n\n  When assemble() is called, it builds a main() function to\n  execute all calls in final order.\n\n  The result is a new instance of Snippet that acts as if it\n  was parsed from the combined source of the component\n  nodes.\n*/\nexport class Program {\n  static initClass() {\n    this.index = 0;\n  }\n  static entry() {\n    return `_pg_${++Program.index}_`;\n  }\n\n  // Program starts out empty, ready to compile starting from a particular block\n  constructor(language, namespace, graph) {\n    this.language = language;\n    this.namespace = namespace;\n    this.graph = graph;\n    this.calls = {};\n    this.requires = {};\n  }\n\n  // Call a given module at certain priority\n  call(node, module, priority) {\n    let exists;\n    const ns = module.namespace;\n\n    // Merge all calls down into one with the right priority\n    if ((exists = this.calls[ns])) {\n      exists.priority = Math.max(exists.priority, priority);\n    } else {\n      this.calls[ns] = { node, module, priority };\n    }\n\n    return this;\n  }\n\n  // Require a given (callback) module's externals\n  require(node, module) {\n    const ns = module.namespace;\n    return (this.requires[ns] = { node, module });\n  }\n\n  // Compile queued ops into result\n  assemble() {\n    const data = assemble(\n      this.language,\n      this.namespace != null ? this.namespace : Program.entry,\n      this.calls,\n      this.requires\n    );\n    const snippet = new Snippet();\n    for (const key in data) {\n      snippet[key] = data[key];\n    }\n    snippet.graph = this.graph;\n    return snippet;\n  }\n}\nProgram.initClass();\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport * as Graph from \"../graph\";\nimport * as Priority from \"./priority\";\n\n/*\n Callback linker\n\n Imports given modules and generates linkages for registered callbacks.\n\n Builds composite program with single module as exported entry point\n*/\n\nexport const link = function (language, links, modules, exported) {\n  const generate = language;\n  let includes = [];\n\n  const symbols = [];\n  const externals = {};\n  const uniforms = {};\n  const attributes = {};\n  const varyings = {};\n  const library = {};\n\n  const process = function () {\n    const exports = generate.links(links);\n\n    const header = [];\n    if (exports.defs != null) {\n      header.push(exports.defs);\n    }\n    if (exports.bodies != null) {\n      header.push(exports.bodies);\n    }\n\n    for (const m of Array.from(modules)) {\n      include(m.node, m.module, m.priority);\n    }\n    const sorted = (() => {\n      const result = [];\n      for (const ns in library) {\n        const lib = library[ns];\n        result.push(lib);\n      }\n      return result;\n    })().sort((a, b) => Priority.compare(a.priority, b.priority));\n    includes = sorted.map((x) => x.code);\n\n    let code = generate.lines(includes);\n    code = generate.defuse(code);\n    if (header.length) {\n      code = [generate.lines(header), code].join(\"\\n\");\n    }\n    code = generate.hoist(code);\n    code = generate.dedupe(code);\n\n    // Export module's externals\n    const e = exported;\n    return {\n      namespace: e.main.name,\n      code, // Complete snippet (tests/debug)\n      main: e.main, // Function signature\n      entry: e.main.name, // Entry point name\n      externals,\n      uniforms,\n      attributes,\n      varyings,\n    };\n  };\n\n  // Adopt given code as a library at given priority\n  const adopt = function (namespace, code, priority) {\n    const record = library[namespace];\n    if (record != null) {\n      return (record.priority = Priority.max(record.priority, priority));\n    } else {\n      return (library[namespace] = { code, priority });\n    }\n  };\n\n  // Include piece of code\n  const include = function (node, module, priority) {\n    let def, key;\n    priority = Priority.make(priority);\n\n    // Adopt snippet's libraries\n    for (const ns in module.library) {\n      const lib = module.library[ns];\n      adopt(ns, lib.code, Priority.nest(priority, lib.priority));\n    }\n\n    // Adopt snippet body as library\n    adopt(module.namespace, module.body, priority);\n\n    // Adopt externals\n    for (key in module.uniforms) {\n      def = module.uniforms[key];\n      uniforms[key] = def;\n    }\n    for (key in module.varyings) {\n      def = module.varyings[key];\n      varyings[key] = def;\n    }\n    for (key in module.attributes) {\n      def = module.attributes[key];\n      attributes[key] = def;\n    }\n\n    return (() => {\n      const result = [];\n      for (key of Array.from(module.symbols)) {\n        const ext = module.externals[key];\n        if (isDangling(node, ext.name)) {\n          externals[key] = ext;\n          result.push(symbols.push(key));\n        } else {\n          result.push(undefined);\n        }\n      }\n      return result;\n    })();\n  };\n\n  // Check for dangling input/output\n  const isDangling = function (node, name) {\n    const outlet = node.get(name);\n\n    if (!outlet) {\n      const module =\n        (node.owner.snippet != null ? node.owner.snippet._name : undefined) !=\n        null\n          ? node.owner.snippet != null\n            ? node.owner.snippet._name\n            : undefined\n          : node.owner.namespace;\n      throw new Error(\n        `Unable to link program. Unlinked callback \\`${name}\\` on \\`${module}\\``\n      );\n    }\n\n    if (outlet.inout === Graph.IN) {\n      return outlet.input === null;\n    } else if (outlet.inout === Graph.OUT) {\n      return outlet.output.length === 0;\n    }\n  };\n\n  return process();\n};\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Snippet } from \"./snippet\";\nimport { link } from \"./link\";\n\nconst debug = false;\n\n/*\n  Program linkage layout\n\n  Entry points are added to its dependency graph\n  Callbacks are linked either with a go-between function\n  or a #define if the signatures are identical.\n*/\nexport class Layout {\n  constructor(language, graph) {\n    this.language = language;\n    this.graph = graph;\n    this.links = [];\n    this.includes = [];\n    this.modules = {};\n    this.visits = {};\n  }\n\n  // Link up a given named external to this module's entry point\n  callback(node, module, priority, name, external) {\n    return this.links.push({ node, module, priority, name, external });\n  }\n\n  // Include this module of code\n  include(node, module, priority) {\n    let m;\n    if ((m = this.modules[module.namespace]) != null) {\n      return (m.priority = Math.max(priority, m.priority));\n    } else {\n      this.modules[module.namespace] = true;\n      return this.includes.push({ node, module, priority });\n    }\n  }\n\n  // Visit each namespace at most once to avoid infinite recursion\n  visit(namespace) {\n    debug && console.log(\"Visit\", namespace, !this.visits[namespace]);\n    if (this.visits[namespace]) {\n      return false;\n    }\n    return (this.visits[namespace] = true);\n  }\n\n  // Compile queued ops into result\n  link(module) {\n    const data = link(this.language, this.links, this.includes, module);\n    const snippet = new Snippet();\n    for (const key in data) {\n      snippet[key] = data[key];\n    }\n    snippet.graph = this.graph;\n    return snippet;\n  }\n}\n","import { Snippet } from \"./snippet\";\n\nexport const { load } = Snippet;\n\nexport * from \"./snippet\";\nexport * from \"./program\";\nexport * from \"./layout\";\nexport * from \"./assemble\";\nexport * from \"./link\";\nexport * from \"./priority\";\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS103: Rewrite code to no longer use __guard__, or convert again using --optional-chaining\n * DS104: Avoid inline assignments\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n\nimport * as Graph from \"../graph\";\nimport { Program, Layout } from \"../linker\";\n\nconst debug = false;\n\nexport class Block {\n  static previous(outlet) {\n    return outlet.input != null ? outlet.input.node.owner : undefined;\n  }\n\n  constructor(delay) {\n    // Subclasses can pass `delay` to allow them to initialize before they call\n    // `@construct`.\n    if (delay == null) {\n      delay = false;\n    }\n    if (!delay) {\n      this.construct();\n    }\n  }\n\n  construct() {\n    let left;\n    if (this.namespace == null) {\n      this.namespace = Program.entry();\n    }\n    return (this.node = new Graph.Node(\n      this,\n      (left =\n        typeof this.makeOutlets === \"function\"\n          ? this.makeOutlets()\n          : undefined) != null\n        ? left\n        : {}\n    ));\n  }\n\n  refresh() {\n    let left;\n    return this.node.setOutlets(\n      (left =\n        typeof this.makeOutlets === \"function\"\n          ? this.makeOutlets()\n          : undefined) != null\n        ? left\n        : {}\n    );\n  }\n\n  clone() {\n    return new Block();\n  }\n\n  // Compile a new program starting from this block\n  compile(language, namespace) {\n    const program = new Program(\n      language,\n      namespace != null ? namespace : Program.entry(),\n      this.node.graph\n    );\n    this.call(program, 0);\n    return program.assemble();\n  }\n\n  // Link up programs into a layout, starting from this block\n  link(language, namespace) {\n    const module = this.compile(language, namespace);\n\n    const layout = new Layout(language, this.node.graph);\n    this._include(module, layout, 0);\n    this.export(layout, 0);\n    return layout.link(module);\n  }\n\n  // Subclassed methods\n  call(_program, _depth) {}\n  callback(_layout, _depth, _name, _external, _outlet) {}\n  export(_layout, _depth) {}\n\n  // Info string for debugging\n  _info(suffix) {\n    let string =\n      (this.node.owner.snippet != null\n        ? this.node.owner.snippet._name\n        : undefined) != null\n        ? this.node.owner.snippet != null\n          ? this.node.owner.snippet._name\n          : undefined\n        : this.node.owner.namespace;\n    if (suffix != null) {\n      return (string += \".\" + suffix);\n    }\n  }\n\n  // Create an outlet for a signature definition\n  _outlet(def, props) {\n    const outlet = Graph.Outlet.make(def, props);\n    outlet.meta.def = def;\n    return outlet;\n  }\n\n  // Make a call to this module in the given program\n  _call(module, program, depth) {\n    return program.call(this.node, module, depth);\n  }\n\n  // Require this module's dependencies in the given program\n  _require(module, program) {\n    return program.require(this.node, module);\n  }\n\n  // Make a call to all connected inputs\n  _inputs(module, program, depth) {\n    return (() => {\n      const result = [];\n      for (const arg of Array.from(module.main.signature)) {\n        const outlet = this.node.get(arg.name);\n        result.push(\n          __guard__(Block.previous(outlet), (x) => x.call(program, depth + 1))\n        );\n      }\n      return result;\n    })();\n  }\n\n  // Insert callback to this module in the given layout\n  _callback(module, layout, depth, name, external, outlet) {\n    return layout.callback(this.node, module, depth, name, external, outlet);\n  }\n\n  // Include this module in the given layout\n  _include(module, layout, depth) {\n    return layout.include(this.node, module, depth);\n  }\n\n  // Link this module's connected callbacks\n  _link(module, layout, depth) {\n    debug && console.log(\"block::_link\", this.toString(), module.namespace);\n    return (() => {\n      const result = [];\n      for (const key of Array.from(module.symbols)) {\n        const ext = module.externals[key];\n        let outlet = this.node.get(ext.name);\n        if (!outlet) {\n          throw new OutletError(\n            `External not found on ${this._info(ext.name)}`\n          );\n        }\n\n        if (outlet.meta.child != null) {\n          continue;\n        }\n\n        let parent = outlet;\n\n        // eslint-disable-next-line prefer-const\n        let block;\n        while (!block && parent) {\n          [parent, outlet] = Array.from([outlet.meta.parent, parent]);\n        }\n\n        block = Block.previous(outlet);\n        if (!block) {\n          throw new OutletError(\n            `Missing connection on ${this._info(ext.name)}`\n          );\n        }\n\n        debug && console.log(\"callback -> \", this.toString(), ext.name, outlet);\n        block.callback(layout, depth + 1, key, ext, outlet.input);\n        result.push(\n          block != null ? block.export(layout, depth + 1) : undefined\n        );\n      }\n      return result;\n    })();\n  }\n\n  // Trace backwards to discover callbacks further up\n  _trace(module, layout, depth) {\n    debug && console.log(\"block::_trace\", this.toString(), module.namespace);\n    return (() => {\n      const result = [];\n      for (const arg of Array.from(module.main.signature)) {\n        const outlet = this.node.get(arg.name);\n        result.push(\n          __guard__(Block.previous(outlet), (x) => x.export(layout, depth + 1))\n        );\n      }\n      return result;\n    })();\n  }\n}\n\nconst OutletError = function (message) {\n  const e = new Error(message);\n  e.name = \"OutletError\";\n  return e;\n};\n\nOutletError.prototype = new Error();\n\nfunction __guard__(value, transform) {\n  return typeof value !== \"undefined\" && value !== null\n    ? transform(value)\n    : undefined;\n}\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Block } from \"./block\";\n\nexport class Call extends Block {\n  constructor(snippet) {\n    super(true);\n\n    this.snippet = snippet;\n    this.namespace = snippet.namespace;\n    this.construct();\n  }\n\n  clone() {\n    return new Call(this.snippet);\n  }\n\n  makeOutlets() {\n    const main = this.snippet.main.signature;\n    const { externals } = this.snippet;\n    const { symbols } = this.snippet;\n\n    const params = Array.from(main).map((outlet) =>\n      this._outlet(outlet, { callback: false })\n    );\n    const callbacks = Array.from(symbols).map((key) =>\n      this._outlet(externals[key], { callback: true })\n    );\n\n    return params.concat(callbacks);\n  }\n\n  call(program, depth) {\n    this._call(this.snippet, program, depth);\n    return this._inputs(this.snippet, program, depth);\n  }\n\n  export(layout, depth) {\n    if (!layout.visit(this.namespace, depth)) {\n      return;\n    }\n\n    this._link(this.snippet, layout, depth);\n    return this._trace(this.snippet, layout, depth);\n  }\n}\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Graph } from \"../graph\";\nimport { Block } from \"./block\";\n\n/*\n  Re-use a subgraph as a callback\n*/\nexport class Callback extends Block {\n  constructor(graph) {\n    super(true);\n    this.graph = graph;\n    this.construct();\n  }\n\n  refresh() {\n    super.refresh();\n    return delete this.subroutine;\n  }\n\n  clone() {\n    return new Callback(this.graph);\n  }\n\n  makeOutlets() {\n    let outlet;\n    this.make();\n\n    const outlets = [];\n    let ins = [];\n    let outs = [];\n\n    // Pass-through existing callbacks\n    // Collect open inputs/outputs\n    const handle = (outlet, list) => {\n      if (outlet.meta.callback) {\n        if (outlet.inout === Graph.IN) {\n          // Dupe outlet and create two-way link between cloned outlets\n          const dupe = outlet.dupe();\n          if (dupe.meta.child == null) {\n            dupe.meta.child = outlet;\n          }\n          outlet.meta.parent = dupe;\n\n          return outlets.push(dupe);\n        }\n      } else {\n        return list.push(outlet.type);\n      }\n    };\n\n    for (outlet of Array.from(this.graph.inputs())) {\n      handle(outlet, ins);\n    }\n    for (outlet of Array.from(this.graph.outputs())) {\n      handle(outlet, outs);\n    }\n\n    // Merge inputs/outputs into new callback signature\n    ins = ins.join(\",\");\n    outs = outs.join(\",\");\n    const type = `(${ins})(${outs})`;\n\n    outlets.push({\n      name: \"callback\",\n      type,\n      inout: Graph.OUT,\n      meta: {\n        callback: true,\n        def: this.subroutine.main,\n      },\n    });\n\n    return outlets;\n  }\n\n  make() {\n    return (this.subroutine = this.graph.compile(this.namespace));\n  }\n\n  export(layout, depth) {\n    if (!layout.visit(this.namespace, depth)) {\n      return;\n    }\n\n    this._link(this.subroutine, layout, depth);\n    return this.graph.export(layout, depth);\n  }\n\n  call(program, depth) {\n    return this._require(this.subroutine, program, depth);\n  }\n\n  callback(layout, depth, name, external, outlet) {\n    this._include(this.subroutine, layout, depth);\n    return this._callback(\n      this.subroutine,\n      layout,\n      depth,\n      name,\n      external,\n      outlet\n    );\n  }\n}\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Graph } from \"../graph\";\nimport { Block } from \"./block\";\n\n/*\n  Isolate a subgraph as a single node\n*/\nexport class Isolate extends Block {\n  constructor(graph) {\n    super(true);\n    this.graph = graph;\n    this.construct();\n  }\n\n  refresh() {\n    super.refresh();\n    return delete this.subroutine;\n  }\n\n  clone() {\n    return new Isolate(this.graph);\n  }\n\n  makeOutlets() {\n    this.make();\n\n    const outlets = [];\n\n    const seen = {};\n    const done = {};\n    for (const set of [\"inputs\", \"outputs\"]) {\n      for (const outlet of Array.from(this.graph[set]())) {\n        // Preserve name of 'return' and 'callback' outlets\n        let name = undefined;\n        if (\n          [\"return\", \"callback\"].includes(outlet.hint) &&\n          outlet.inout === Graph.OUT\n        ) {\n          name = outlet.hint;\n        }\n\n        // Unless it already exists\n        if (seen[name] != null) {\n          name = undefined;\n        }\n\n        // Dupe outlet and remember link to original\n        const dupe = outlet.dupe(name);\n        if (dupe.meta.child == null) {\n          dupe.meta.child = outlet;\n        }\n        outlet.meta.parent = dupe;\n        if (name != null) {\n          seen[name] = true;\n        }\n        done[outlet.name] = dupe;\n\n        outlets.push(dupe);\n      }\n    }\n\n    return outlets;\n  }\n\n  make() {\n    return (this.subroutine = this.graph.compile(this.namespace));\n  }\n\n  call(program, depth) {\n    this._call(this.subroutine, program, depth);\n    return this._inputs(this.subroutine, program, depth);\n  }\n\n  export(layout, depth) {\n    if (!layout.visit(this.namespace, depth)) {\n      return;\n    }\n\n    // Link up with normal inputs\n    this._link(this.subroutine, layout, depth);\n    this._trace(this.subroutine, layout, depth);\n\n    // Export callbacks needed to call the subroutine\n    return this.graph.export(layout, depth);\n  }\n\n  callback(layout, depth, name, external, outlet) {\n    outlet = outlet.meta.child;\n    return outlet.node.owner.callback(layout, depth, name, external, outlet);\n  }\n}\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Block } from \"./block\";\n\n/*\n  Join multiple disconnected nodes\n*/\nexport class Join extends Block {\n  constructor(nodes) {\n    super(true);\n    this.nodes = nodes;\n    this.construct();\n  }\n\n  clone() {\n    return new Join(this.nodes);\n  }\n\n  makeOutlets() {\n    return [];\n  }\n\n  call(program, depth) {\n    return (() => {\n      const result = [];\n      for (const node of Array.from(this.nodes)) {\n        const block = node.owner;\n        result.push(block.call(program, depth));\n      }\n      return result;\n    })();\n  }\n\n  export(layout, depth) {\n    return (() => {\n      const result = [];\n      for (const node of Array.from(this.nodes)) {\n        const block = node.owner;\n        result.push(block.export(layout, depth));\n      }\n      return result;\n    })();\n  }\n}\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n// Dump graph for debug/visualization purposes\nimport * as Block from \"../block\";\n\nexport const serialize = function (graph) {\n  const nodes = [];\n  const links = [];\n\n  for (const node of Array.from(graph.nodes)) {\n    let outlet;\n    const record = {\n      // Data\n      id: node.id,\n      name: null,\n      type: null,\n      depth: null,\n      graph: null,\n      inputs: [],\n      outputs: [],\n    };\n\n    nodes.push(record);\n\n    const { inputs } = record;\n    const { outputs } = record;\n\n    const block = node.owner;\n\n    if (block instanceof Block.Call) {\n      record.name = block.snippet._name;\n      record.type = \"call\";\n      record.code = block.snippet._original;\n    } else if (block instanceof Block.Callback) {\n      record.name = \"Callback\";\n      record.type = \"callback\";\n      record.graph = serialize(block.graph);\n    } else if (block instanceof Block.Isolate) {\n      record.name = \"Isolate\";\n      record.type = \"isolate\";\n      record.graph = serialize(block.graph);\n    } else if (block instanceof Block.Join) {\n      record.name = \"Join\";\n      record.type = \"join\";\n    } else if (block != null) {\n      if (record.name == null) {\n        record.name = block.name != null ? block.name : block.type;\n      }\n      if (record.type == null) {\n        record.type = block.type;\n      }\n      if (record.code == null) {\n        record.code = block.code;\n      }\n      if (block.graph != null) {\n        record.graph = serialize(block.graph);\n      }\n    }\n\n    const format = function (type) {\n      type = type.replace(\")(\", \")(\");\n      return (type = type.replace(\"()\", \"\"));\n    };\n\n    for (outlet of Array.from(node.inputs)) {\n      inputs.push({\n        id: outlet.id,\n        name: outlet.name,\n        type: format(outlet.type),\n        open: outlet.input == null,\n      });\n    }\n\n    for (outlet of Array.from(node.outputs)) {\n      outputs.push({\n        id: outlet.id,\n        name: outlet.name,\n        type: format(outlet.type),\n        open: !outlet.output.length,\n      });\n\n      for (const other of Array.from(outlet.output)) {\n        links.push({\n          from: node.id,\n          out: outlet.id,\n          to: other.node.id,\n          in: other.id,\n          type: format(outlet.type),\n        });\n      }\n    }\n  }\n\n  return { nodes, links };\n};\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n// Hash string into a 32-bit key (murmurhash3)\nconst c1 = 0xcc9e2d51;\nconst c2 = 0x1b873593;\nconst c3 = 0xe6546b64;\nconst c4 = 0x85ebca6b;\nconst c5 = 0xc2b2ae35;\n\n// Fix imul in old/broken browsers\nlet imul = function (a, b) {\n  const ah = (a >>> 16) & 0xffff;\n  const al = a & 0xffff;\n  const bh = (b >>> 16) & 0xffff;\n  const bl = b & 0xffff;\n  return (al * bl + (((ah * bl + al * bh) << 16) >>> 0)) | 0;\n};\n\nif (Math.imul != null) {\n  const test = Math.imul(0xffffffff, 5);\n  if (test === -5) {\n    ({ imul } = Math);\n  }\n}\n\nexport const hash = function (string) {\n  let h;\n  const n = string.length;\n  let m = Math.floor(n / 2);\n  let j = (h = 0);\n\n  const next = () => string.charCodeAt(j++);\n  const iterate = function (a, b) {\n    let k = a | (b << 16); // two utf-16 words\n    k ^= k << 9; // whitening for ascii-only strings\n\n    k = imul(k, c1);\n    k = (k << 15) | (k >>> 17);\n    k = imul(k, c2);\n\n    h ^= k;\n\n    h = (h << 13) | (h >>> 19);\n    h = imul(h, 5);\n    return (h = (h + c3) | 0);\n  };\n\n  while (m--) {\n    iterate(next(), next());\n  }\n  if (n & 1) {\n    iterate(next(), 0);\n  }\n\n  h ^= n;\n  h ^= h >>> 16;\n  h = imul(h, c4);\n  h ^= h >>> 13;\n  h = imul(h, c5);\n\n  return (h ^= h >>> 16);\n};\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { hash } from \"../factory/hash\";\n\nconst trim = (string) => (\"\" + string).replace(/^\\s+|\\s+$/g, \"\");\n\nconst cssColor = (r, g, b, alpha) =>\n  \"rgba(\" + [r, g, b, alpha].join(\", \") + \")\";\n\nconst hashColor = function (string, alpha) {\n  if (alpha == null) {\n    alpha = 1;\n  }\n  const color = hash(string) ^ 0x123456;\n\n  let r = color & 0xff;\n  let g = (color >>> 8) & 0xff;\n  let b = (color >>> 16) & 0xff;\n\n  const max = Math.max(r, g, b);\n  const norm = 140 / max;\n  const min = Math.round(max / 3);\n\n  r = Math.min(255, Math.round(norm * Math.max(r, min)));\n  g = Math.min(255, Math.round(norm * Math.max(g, min)));\n  b = Math.min(255, Math.round(norm * Math.max(b, min)));\n\n  return cssColor(r, g, b, alpha);\n};\n\nconst escapeText = function (string) {\n  string = string != null ? string : \"\";\n  return string\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/'/g, \"&#39;\")\n    .replace(/\"/g, \"&quot;\");\n};\n\nexport const process = function (data) {\n  const links = [];\n  const el = _markup(data, links);\n  el.update = () => connect(el, links);\n  _activate(el);\n  return el;\n};\n\nconst _activate = function (el) {\n  const codes = el.querySelectorAll(\".shadergraph-code\");\n  return Array.from(codes).map((code) =>\n    (function () {\n      const popup = code;\n      popup.parentNode.classList.add(\"shadergraph-has-code\");\n      return popup.parentNode.addEventListener(\n        \"click\",\n        (_event) =>\n          (popup.style.display = {\n            block: \"none\",\n            none: \"block\",\n          }[popup.style.display || \"none\"])\n      );\n    })()\n  );\n};\n\nconst _order = function (data) {\n  let link, node;\n  const nodeMap = {};\n  const linkMap = {};\n  for (node of Array.from(data.nodes)) {\n    nodeMap[node.id] = node;\n  }\n\n  for (link of Array.from(data.links)) {\n    if (linkMap[link.from] == null) {\n      linkMap[link.from] = [];\n    }\n    linkMap[link.from].push(link);\n  }\n\n  const recurse = function (node, depth) {\n    let next;\n    if (depth == null) {\n      depth = 0;\n    }\n    node.depth = Math.max(node.depth != null ? node.depth : 0, depth);\n    if ((next = linkMap[node.id])) {\n      for (link of Array.from(next)) {\n        recurse(nodeMap[link.to], depth + 1);\n      }\n    }\n    return null;\n  };\n\n  for (node of Array.from(data.nodes)) {\n    if (node.depth == null) {\n      recurse(node);\n    }\n  }\n\n  return null;\n};\n\nconst _markup = function (data, links) {\n  let column;\n  _order(data);\n\n  const wrapper = document.createElement(\"div\");\n  wrapper.classList.add(\"shadergraph-graph\");\n\n  const columns = [];\n  const outlets = {};\n\n  for (const node of Array.from(data.nodes)) {\n    let outlet;\n    const block = document.createElement(\"div\");\n    block.classList.add(\"shadergraph-node\");\n    block.classList.add(`shadergraph-node-${node.type}`);\n\n    block.innerHTML = `\\\n<div class=\"shadergraph-header\">${escapeText(node.name)}</div>\\\n`;\n\n    const addOutlet = function (outlet, inout) {\n      const color = hashColor(outlet.type);\n\n      const div = document.createElement(\"div\");\n      div.classList.add(\"shadergraph-outlet\");\n      div.classList.add(`shadergraph-outlet-${inout}`);\n      div.innerHTML = `\\\n<div class=\"shadergraph-point\" style=\"background: ${color}\"></div>\n<div class=\"shadergraph-type\" style=\"color: ${color}\">${escapeText(\n        outlet.type\n      )}</div>\n<div class=\"shadergraph-name\">${escapeText(outlet.name)}</div>\\\n`;\n      block.appendChild(div);\n\n      return (outlets[outlet.id] = div.querySelector(\".shadergraph-point\"));\n    };\n\n    for (outlet of Array.from(node.inputs)) {\n      addOutlet(outlet, \"in\");\n    }\n    for (outlet of Array.from(node.outputs)) {\n      addOutlet(outlet, \"out\");\n    }\n\n    if (node.graph != null) {\n      block.appendChild(_markup(node.graph, links));\n    } else {\n      const clear = document.createElement(\"div\");\n      clear.classList.add(\"shadergraph-clear\");\n      block.appendChild(clear);\n    }\n\n    if (node.code != null) {\n      const div = document.createElement(\"div\");\n      div.classList.add(\"shadergraph-code\");\n      div.innerHTML = escapeText(trim(node.code));\n      block.appendChild(div);\n    }\n\n    column = columns[node.depth];\n    if (column == null) {\n      column = document.createElement(\"div\");\n      column.classList.add(\"shadergraph-column\");\n      columns[node.depth] = column;\n    }\n    column.appendChild(block);\n  }\n\n  for (column of Array.from(columns)) {\n    if (column != null) {\n      wrapper.appendChild(column);\n    }\n  }\n\n  for (const link of Array.from(data.links)) {\n    const color = hashColor(link.type);\n\n    links.push({\n      color,\n      out: outlets[link.out],\n      in: outlets[link.in],\n    });\n  }\n\n  return wrapper;\n};\n\nconst sqr = (x) => x * x;\n\nconst path = function (x1, y1, x2, y2) {\n  let h;\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  const d = Math.sqrt(sqr(dx) + sqr(dy));\n\n  const vert = Math.abs(dy) > Math.abs(dx);\n  if (vert) {\n    const mx = (x1 + x2) / 2;\n    const my = (y1 + y2) / 2;\n\n    const f = dy > 0 ? 0.3 : -0.3;\n    h = Math.min(Math.abs(dx) / 2, 20 + d / 8);\n\n    return [\n      \"M\",\n      x1,\n      y1,\n      \"C\",\n      x1 + h,\n      y1 + \",\",\n      mx,\n      my - d * f,\n      mx,\n      my,\n      \"C\",\n      mx,\n      my + d * f,\n      x2 - h,\n      y2 + \",\",\n      x2,\n      y2,\n    ].join(\" \");\n  } else {\n    h = Math.min(Math.abs(dx) / 2.5, 20 + d / 4);\n\n    return [\"M\", x1, y1, \"C\", x1 + h, y1 + \",\", x2 - h, y2 + \",\", x2, y2].join(\n      \" \"\n    );\n  }\n};\n\nconst makeSVG = function (tag) {\n  if (tag == null) {\n    tag = \"svg\";\n  }\n  return document.createElementNS(\"http://www.w3.org/2000/svg\", tag);\n};\n\nconst connect = function (element, links) {\n  let link;\n  if (element.parentNode == null) {\n    return;\n  }\n\n  const ref = element.getBoundingClientRect();\n\n  for (link of Array.from(links)) {\n    const a = link.out.getBoundingClientRect();\n    const b = link.in.getBoundingClientRect();\n\n    link.coords = {\n      x1: (a.left + a.right) / 2 - ref.left,\n      y1: (a.top + a.bottom) / 2 - ref.top,\n      x2: (b.left + b.right) / 2 - ref.left,\n      y2: (b.top + b.bottom) / 2 - ref.top,\n    };\n  }\n\n  let svg = element.querySelector(\"svg\");\n  if (svg != null) {\n    element.removeChild(svg);\n  }\n\n  let box = element;\n  while (box.parentNode && box.offsetHeight === 0) {\n    box = box.parentNode;\n  }\n\n  svg = makeSVG();\n  svg.setAttribute(\"width\", box.offsetWidth);\n  svg.setAttribute(\"height\", box.offsetHeight);\n\n  for (link of Array.from(links)) {\n    const c = link.coords;\n\n    const line = makeSVG(\"path\");\n    line.setAttribute(\"d\", path(c.x1, c.y1, c.x2, c.y2));\n    line.setAttribute(\"stroke\", link.color);\n    line.setAttribute(\"stroke-width\", 3);\n    line.setAttribute(\"fill\", \"transparent\");\n    svg.appendChild(line);\n  }\n\n  return element.appendChild(svg);\n};\n\nexport const overlay = function (contents) {\n  const div = document.createElement(\"div\");\n  div.setAttribute(\"class\", \"shadergraph-overlay\");\n\n  const close = document.createElement(\"div\");\n  close.setAttribute(\"class\", \"shadergraph-close\");\n  close.innerHTML = \"&times;\";\n\n  const view = document.createElement(\"div\");\n  view.setAttribute(\"class\", \"shadergraph-view\");\n\n  const inside = document.createElement(\"div\");\n  inside.setAttribute(\"class\", \"shadergraph-inside\");\n\n  inside.appendChild(contents);\n  view.appendChild(inside);\n  div.appendChild(view);\n  div.appendChild(close);\n\n  close.addEventListener(\"click\", () => div.parentNode.removeChild(div));\n\n  return div;\n};\n\nconst wrap = function (markup) {\n  if (markup instanceof Node) {\n    return markup;\n  }\n  const p = document.createElement(\"span\");\n  p.innerText = markup != null ? markup : \"\";\n  return p;\n};\n\nexport const merge = function (markup) {\n  if (markup.length !== 1) {\n    let el;\n    const div = document.createElement(\"div\");\n    for (el of Array.from(markup)) {\n      div.appendChild(wrap(el));\n    }\n    div.update = () =>\n      (() => {\n        const result = [];\n        for (el of Array.from(markup)) {\n          result.push(\n            typeof el.update === \"function\" ? el.update() : undefined\n          );\n        }\n        return result;\n      })();\n    return div;\n  } else {\n    return wrap(markup[0]);\n  }\n};\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n\nimport { serialize as _serialize } from \"./serialize\";\nimport * as _markup from \"./markup\";\n\nexport const serialize = _serialize;\nexport const markup = _markup;\n\nconst _visualize = function (graph) {\n  if (!graph) {\n    return;\n  }\n  if (!graph.nodes) {\n    return graph;\n  }\n\n  const data = serialize(graph);\n  return markup.process(data);\n};\n\nconst resolve = function (arg) {\n  if (arg == null) {\n    return arg;\n  }\n  if (arg instanceof Array) {\n    return arg.map(resolve);\n  }\n  if (arg.vertex != null && arg.fragment != null) {\n    return [resolve(arg.vertex, resolve(arg.fragment))];\n  }\n  if (arg._graph != null) {\n    return arg._graph;\n  }\n  if (arg.graph != null) {\n    return arg.graph;\n  }\n  return arg;\n};\n\nconst merge = function (args) {\n  let out = [];\n  for (const arg of Array.from(args)) {\n    if (arg instanceof Array) {\n      out = out.concat(merge(arg));\n    } else if (arg != null) {\n      out.push(arg);\n    }\n  }\n  return out;\n};\n\nexport const visualize = function () {\n  const list = merge(resolve([].slice.call(arguments)));\n  return markup.merge(\n    Array.from(list)\n      .filter((graph) => graph)\n      .map((graph) => _visualize(graph))\n  );\n};\n\nexport const inspect = function () {\n  const contents = visualize.apply(null, arguments);\n  const element = markup.overlay(contents);\n\n  for (const el of Array.from(\n    document.querySelectorAll(\".shadergraph-overlay\")\n  )) {\n    el.remove();\n  }\n  document.body.appendChild(element);\n  contents.update();\n\n  return element;\n};\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Graph } from \"../graph\";\nimport * as Block from \"../block\";\nimport * as Visualize from \"../visualize\";\n\n/*\n  Chainable factory\n\n  Exposes methods to build a graph incrementally\n*/\nexport class Factory {\n  constructor(language, fetch, config) {\n    this.language = language;\n    this.fetch = fetch;\n    this.config = config;\n    this.graph();\n  }\n\n  // Combined call/concat shortcut\n  pipe(name, uniforms, namespace, defines) {\n    if (name instanceof Factory) {\n      this._concat(name);\n    } else if (name != null) {\n      this._call(name, uniforms, namespace, defines);\n    }\n    return this;\n  }\n\n  // Old name\n  call(name, uniforms, namespace, defines) {\n    return this.pipe(name, uniforms, namespace, defines);\n  }\n\n  // Combined callback/import shortcut\n  require(name, uniforms, namespace, defines) {\n    if (name instanceof Factory) {\n      this._import(name);\n    } else if (name != null) {\n      this.callback();\n      this._call(name, uniforms, namespace, defines);\n      this.end();\n    }\n    return this;\n  }\n\n  // Old name\n  import(name, uniforms, namespace, defines) {\n    return this.require(name, uniforms, namespace, defines);\n  }\n\n  // Create parallel branches that connect as one block to the end\n  // (one outgoing connection per outlet)\n  split() {\n    this._group(\"_combine\", true);\n    return this;\n  }\n\n  // Create parallel branches that fan out from the end\n  // (multiple outgoing connections per outlet)\n  fan() {\n    this._group(\"_combine\", false);\n    return this;\n  }\n\n  // Create isolated subgraph\n  isolate() {\n    this._group(\"_isolate\");\n    return this;\n  }\n\n  // Create callback subgraph\n  callback() {\n    this._group(\"_callback\");\n    return this;\n  }\n\n  // Next branch in group\n  next() {\n    this._next();\n    return this;\n  }\n\n  // Connect branches to previous tail and add pass-through from end\n  pass() {\n    const pass = this._stack[2].end;\n    this.end();\n    this._state.end = this._state.end.concat(pass);\n    return this;\n  }\n\n  // Leave nested branches and join up with main graph,\n  // applying stored op along the way\n  end() {\n    const [sub, main] = Array.from(this._exit());\n    const { op } = sub;\n    if (this[op]) {\n      this[op](sub, main);\n    }\n    return this;\n  }\n\n  // Old name\n  join() {\n    return this.end();\n  }\n\n  // Return finalized graph / reset factory\n  graph() {\n    // Pop remaining stack\n    while ((this._stack != null ? this._stack.length : undefined) > 1) {\n      this.end();\n    }\n\n    // Remember terminating node(s) of graph\n    if (this._graph) {\n      this._tail(this._state, this._graph);\n    }\n\n    const graph = this._graph;\n\n    this._graph = new Graph();\n    this._state = new State();\n    this._stack = [this._state];\n\n    return graph;\n  }\n\n  // Compile shortcut (graph is thrown away)\n  compile(namespace) {\n    if (namespace == null) {\n      namespace = \"main\";\n    }\n    return this.graph().compile(namespace);\n  }\n\n  // Link shortcut (graph is thrown away)\n  link(namespace) {\n    if (namespace == null) {\n      namespace = \"main\";\n    }\n    return this.graph().link(namespace);\n  }\n\n  // Serialize for debug\n  serialize() {\n    return Visualize.serialize(this._graph);\n  }\n\n  // Return true if empty\n  empty() {\n    return this._graph.nodes.length === 0;\n  }\n\n  // Concatenate existing factory onto tail\n  // Retains original factory\n  _concat(factory) {\n    // Ignore empty concat\n    let block;\n    if (factory._state.nodes.length === 0) {\n      return this;\n    }\n\n    this._tail(factory._state, factory._graph);\n\n    try {\n      block = new Block.Isolate(factory._graph);\n    } catch (error) {\n      if (this.config.autoInspect) {\n        Visualize.inspect(error, this._graph, factory);\n      }\n      throw error;\n    }\n\n    this._auto(block);\n    return this;\n  }\n\n  // Add existing factory as callback\n  // Retains original factory\n  _import(factory) {\n    // Check for empty require\n    let block;\n    if (factory._state.nodes.length === 0) {\n      throw \"Can't import empty callback\";\n    }\n\n    this._tail(factory._state, factory._graph);\n\n    try {\n      block = new Block.Callback(factory._graph);\n    } catch (error) {\n      if (this.config.autoInspect) {\n        Visualize.inspect(error, this._graph, factory);\n      }\n      throw error;\n    }\n\n    this._auto(block);\n    return this;\n  }\n\n  // Connect parallel branches to tail\n  _combine(sub, main) {\n    for (const to of Array.from(sub.start)) {\n      for (const from of Array.from(main.end)) {\n        from.connect(to, sub.multi);\n      }\n    }\n\n    main.end = sub.end;\n    return (main.nodes = main.nodes.concat(sub.nodes));\n  }\n\n  // Make subgraph and connect to tail\n  _isolate(sub, _main) {\n    if (sub.nodes.length) {\n      let block;\n      const subgraph = this._subgraph(sub);\n      this._tail(sub, subgraph);\n\n      try {\n        block = new Block.Isolate(subgraph);\n      } catch (error) {\n        if (this.config.autoInspect) {\n          Visualize.inspect(error, this._graph, subgraph);\n        }\n        throw error;\n      }\n\n      return this._auto(block);\n    }\n  }\n\n  // Convert to callback and connect to tail\n  _callback(sub, _main) {\n    if (sub.nodes.length) {\n      let block;\n      const subgraph = this._subgraph(sub);\n      this._tail(sub, subgraph);\n\n      try {\n        block = new Block.Callback(subgraph);\n      } catch (error) {\n        if (this.config.autoInspect) {\n          Visualize.inspect(error, this._graph, subgraph);\n        }\n        throw error;\n      }\n\n      return this._auto(block);\n    }\n  }\n\n  // Create next call block\n  _call(name, uniforms, namespace, defines) {\n    const snippet = this.fetch(name);\n    snippet.bind(this.config, uniforms, namespace, defines);\n    const block = new Block.Call(snippet);\n    return this._auto(block);\n  }\n\n  // Move current state into subgraph\n  _subgraph(sub) {\n    const subgraph = new Graph(null, this._graph);\n    subgraph.adopt(sub.nodes);\n    return subgraph;\n  }\n\n  // Finalize graph tail\n  _tail(state, graph) {\n    // Merge (unique) terminating ends into single tail node if needed\n    let tail = state.end.concat(state.tail);\n    tail = tail.filter((node, i) => tail.indexOf(node) === i);\n\n    if (tail.length > 1) {\n      tail = new Block.Join(tail);\n      tail = [tail.node];\n      this._graph.add(tail);\n    }\n\n    // Save single endpoint\n    graph.tail = tail[0];\n    state.end = tail;\n    state.tail = [];\n\n    if (!graph.tail) {\n      throw new Error(\"Cannot finalize empty graph\");\n    }\n\n    // Add compile/link/export/inspect shortcut methods\n    graph.compile = (namespace) => {\n      if (namespace == null) {\n        namespace = \"main\";\n      }\n      try {\n        return graph.tail.owner.compile(this.language, namespace);\n      } catch (error) {\n        if (this.config.autoInspect) {\n          graph.inspect(error);\n        }\n        throw error;\n      }\n    };\n\n    graph.link = (namespace) => {\n      if (namespace == null) {\n        namespace = \"main\";\n      }\n      try {\n        return graph.tail.owner.link(this.language, namespace);\n      } catch (error) {\n        if (this.config.autoInspect) {\n          graph.inspect(error);\n        }\n        throw error;\n      }\n    };\n\n    graph.export = (layout, depth) => {\n      return graph.tail.owner.export(layout, depth);\n    };\n\n    return (graph.inspect = (message = null) =>\n      Visualize.inspect(message, graph));\n  }\n\n  // Create group for branches or callbacks\n  _group(op, multi) {\n    this._push(op, multi); // Accumulator\n    this._push(); // Current\n    return this;\n  }\n\n  // Merge branch into accumulator and reset state\n  _next() {\n    const sub = this._pop();\n\n    this._state.start = this._state.start.concat(sub.start);\n    this._state.end = this._state.end.concat(sub.end);\n    this._state.nodes = this._state.nodes.concat(sub.nodes);\n    this._state.tail = this._state.tail.concat(sub.tail);\n\n    return this._push();\n  }\n\n  // Exit nested branches\n  _exit() {\n    this._next();\n    this._pop();\n    return [this._pop(), this._state];\n  }\n\n  // State stack\n  _push(op, multi) {\n    this._stack.unshift(new State(op, multi));\n    return (this._state = this._stack[0]);\n  }\n\n  _pop() {\n    let left;\n    this._state = this._stack[1];\n    if (this._state == null) {\n      this._state = new State();\n    }\n    return (left = this._stack.shift()) != null ? left : new State();\n  }\n\n  // Auto append or insert depending on whether we have inputs\n  _auto(block) {\n    if (block.node.inputs.length) {\n      return this._append(block);\n    } else {\n      return this._insert(block);\n    }\n  }\n\n  // Add block and connect to end\n  _append(block) {\n    let end;\n    const { node } = block;\n    this._graph.add(node);\n\n    for (end of Array.from(this._state.end)) {\n      end.connect(node);\n    }\n\n    if (!this._state.start.length) {\n      this._state.start = [node];\n    }\n    this._state.end = [node];\n\n    this._state.nodes.push(node);\n    if (!node.outputs.length) {\n      this._state.tail.push(node);\n    }\n  }\n\n  // Add block and connect to start\n  _prepend(block) {\n    let start;\n    const { node } = block;\n    this._graph.add(node);\n\n    for (start of Array.from(this._state.start)) {\n      node.connect(start);\n    }\n\n    if (!this._state.end.length) {\n      this._state.end = [node];\n    }\n    this._state.start = [node];\n\n    this._state.nodes.push(node);\n    if (!node.outputs.length) {\n      this._state.tail.push(node);\n    }\n  }\n\n  // Insert loose block\n  _insert(block) {\n    const { node } = block;\n    this._graph.add(node);\n\n    this._state.start.push(node);\n    this._state.end.push(node);\n\n    this._state.nodes.push(node);\n    if (!node.outputs.length) {\n      return this._state.tail.push(node);\n    }\n  }\n}\n\nclass State {\n  constructor(op = null, multi, start, end, nodes, tail) {\n    this.op = op;\n    if (multi == null) {\n      multi = false;\n    }\n    this.multi = multi;\n    if (start == null) {\n      start = [];\n    }\n    this.start = start;\n    if (end == null) {\n      end = [];\n    }\n    this.end = end;\n    if (nodes == null) {\n      nodes = [];\n    }\n    this.nodes = nodes;\n    if (tail == null) {\n      tail = [];\n    }\n    this.tail = tail;\n  }\n}\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n\nimport * as Visualize from \"../visualize\";\n\nconst debug = false;\n\nconst tick = function () {\n  const now = +new Date();\n  return function (label) {\n    const delta = +new Date() - now;\n    console.log(label, delta + \" ms\");\n    return delta;\n  };\n};\n\nexport class Material {\n  constructor(vertex, fragment) {\n    this.vertex = vertex;\n    this.fragment = fragment;\n    if (debug) {\n      this.tock = tick();\n    }\n  }\n\n  build(options) {\n    return this.link(options);\n  }\n\n  link(options) {\n    if (options == null) {\n      options = {};\n    }\n    const uniforms = {};\n    const varyings = {};\n    const attributes = {};\n\n    const vertex = this.vertex.link(\"main\");\n    const fragment = this.fragment.link(\"main\");\n\n    for (const shader of [vertex, fragment]) {\n      for (const key in shader.uniforms) {\n        const value = shader.uniforms[key];\n        uniforms[key] = value;\n      }\n      for (const key in shader.varyings) {\n        const value = shader.varyings[key];\n        varyings[key] = value;\n      }\n      for (const key in shader.attributes) {\n        const value = shader.attributes[key];\n        attributes[key] = value;\n      }\n    }\n\n    options.vertexShader = vertex.code;\n    options.vertexGraph = vertex.graph;\n    options.fragmentShader = fragment.code;\n    options.fragmentGraph = fragment.graph;\n    options.attributes = attributes;\n    options.uniforms = uniforms;\n    options.varyings = varyings;\n    options.inspect = () =>\n      Visualize.inspect(\n        \"Vertex Shader\",\n        vertex,\n        \"Fragment Shader\",\n        fragment.graph\n      );\n\n    if (debug) {\n      this.tock(\"Material build\");\n    }\n\n    return options;\n  }\n\n  inspect() {\n    return Visualize.inspect(\n      \"Vertex Shader\",\n      this.vertex,\n      \"Fragment Shader\",\n      this.fragment.graph\n    );\n  }\n}\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n/*\n  Snippet library\n\n  Takes:\n    - Hash of snippets: named library\n    - (name) -> getter: dynamic lookup\n    - nothing:          no library, only pass in inline source code\n\n  If 'name' contains any of \"{;(#\" it is assumed to be direct GLSL code.\n*/\nexport const library = function (language, snippets, load) {\n  let callback = null;\n  let used = {};\n\n  if (snippets != null) {\n    if (typeof snippets === \"function\") {\n      callback = (name) => load(language, name, snippets(name));\n    } else if (typeof snippets === \"object\") {\n      callback = function (name) {\n        if (snippets[name] == null) {\n          throw new Error(`Unknown snippet \\`${name}\\``);\n        }\n        return load(language, name, snippets[name]);\n      };\n    }\n  }\n\n  const inline = (code) => load(language, \"\", code);\n\n  if (callback == null) {\n    return inline;\n  }\n\n  const fetch = function (name) {\n    if (name.match(/[{;]/)) {\n      return inline(name);\n    }\n    used[name] = true;\n    return callback(name);\n  };\n\n  fetch.used = function (_used) {\n    if (_used == null) {\n      _used = used;\n    }\n    return (used = _used);\n  };\n\n  return fetch;\n};\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n// Least-recently-used queue for key expiry via linked list\nexport const queue = function (limit) {\n  if (limit == null) {\n    limit = 100;\n  }\n  const map = {};\n\n  let head = null;\n  let tail = null;\n  let count = 0;\n\n  // Insert at front\n  const add = function (item) {\n    item.prev = null;\n    item.next = head;\n\n    if (head != null) {\n      head.prev = item;\n    }\n\n    head = item;\n    if (tail == null) {\n      return (tail = item);\n    }\n  };\n\n  // Remove from list\n  const remove = function (item) {\n    const { prev } = item;\n    const { next } = item;\n\n    if (prev != null) {\n      prev.next = next;\n    }\n    if (next != null) {\n      next.prev = prev;\n    }\n\n    if (head === item) {\n      head = next;\n    }\n    if (tail === item) {\n      return (tail = prev);\n    }\n  };\n\n  // Push key to top of list\n  return function (key) {\n    let dead, item;\n    if ((item = map[key]) && item !== head) {\n      // Already in queue\n      remove(item);\n      add(item);\n    } else {\n      // Check capacity\n      if (count === limit) {\n        // Pop tail\n        dead = tail.key;\n        remove(tail);\n\n        // Expire key\n        delete map[dead];\n      } else {\n        count++;\n      }\n\n      // Replace head\n      item = { next: head, prev: null, key };\n      add(item);\n\n      // Map record for lookup\n      map[key] = item;\n    }\n\n    // Return expired key\n    return dead;\n  };\n};\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n/*\n  Cache decorator\n  Fetches snippets once, clones for reuse\n  Inline code is hashed to avoid bloat\n*/\nimport { queue } from \"./queue\";\nimport { hash } from \"./hash\";\n\nexport const cache = function (fetch) {\n  const cached = {};\n  const push = queue(100);\n\n  // Snippet factory\n  return function (name) {\n    const key = name.length > 32 ? \"##\" + hash(name).toString(16) : name;\n\n    // Push new key onto queue, see if an old key expired\n    const expire = push(key);\n    if (expire != null) {\n      delete cached[expire];\n    }\n\n    // Clone cached snippet\n    if (cached[key] == null) {\n      cached[key] = fetch(name);\n    }\n    return cached[key].clone();\n  };\n};\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n/*\n  Compile snippet back into GLSL, but with certain symbols replaced by prefixes / placeholders\n*/\n\nexport const compile = function (program) {\n  const { code, signatures } = program;\n\n  // Prepare list of placeholders\n  const placeholders = replaced(signatures);\n\n  // Compile\n  const assembler = string_compiler(code, placeholders);\n\n  return [signatures, assembler];\n};\n\nconst replaced = function (signatures) {\n  const out = {};\n  const s = (sig) => (out[sig.name] = true);\n\n  s(signatures.main);\n\n  // Prefix all global symbols\n  for (const key of [\n    \"external\",\n    \"internal\",\n    \"varying\",\n    \"uniform\",\n    \"attribute\",\n  ]) {\n    for (const sig of signatures[key]) {\n      s(sig);\n    }\n  }\n\n  return out;\n};\n\n/*\nString-replacement based compiler\n*/\nconst string_compiler = function (code, placeholders) {\n  // Make regexp for finding placeholders\n  // Replace on word boundaries\n  let key;\n  const re = new RegExp(\n    \"\\\\b(\" +\n      (() => {\n        const result = [];\n        for (key in placeholders) {\n          result.push(key);\n        }\n        return result;\n      })().join(\"|\") +\n      \")\\\\b\",\n    \"g\"\n  );\n\n  // Strip comments\n  code = code.replace(/\\/\\/[^\\n]*/g, \"\");\n  code = code.replace(/\\/\\*([^*]|\\*[^/])*\\*\\//g, \"\");\n\n  // Strip all preprocessor commands (lazy)\n  //code = code.replace /^#[^\\n]*/mg, ''\n\n  // Assembler function that takes namespace prefix and exceptions\n  // and returns GLSL source code\n  return function (prefix, exceptions, defines) {\n    let key;\n    if (prefix == null) {\n      prefix = \"\";\n    }\n    if (exceptions == null) {\n      exceptions = {};\n    }\n    if (defines == null) {\n      defines = {};\n    }\n    const replace = {};\n    for (key in placeholders) {\n      replace[key] = exceptions[key] != null ? key : prefix + key;\n    }\n\n    const compiled = code.replace(re, (key) => replace[key]);\n\n    const defs = (() => {\n      const result1 = [];\n      for (key in defines) {\n        const value = defines[key];\n        result1.push(`#define ${key} ${value}`);\n      }\n      return result1;\n    })();\n    if (defs.length) {\n      defs.push(\"\");\n    }\n    return defs.join(\"\\n\") + compiled;\n  };\n};\n","const _lut = [ '00', '01', '02', '03', '04', '05', '06', '07', '08', '09', '0a', '0b', '0c', '0d', '0e', '0f', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '1a', '1b', '1c', '1d', '1e', '1f', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '2a', '2b', '2c', '2d', '2e', '2f', '30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '3a', '3b', '3c', '3d', '3e', '3f', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '4a', '4b', '4c', '4d', '4e', '4f', '50', '51', '52', '53', '54', '55', '56', '57', '58', '59', '5a', '5b', '5c', '5d', '5e', '5f', '60', '61', '62', '63', '64', '65', '66', '67', '68', '69', '6a', '6b', '6c', '6d', '6e', '6f', '70', '71', '72', '73', '74', '75', '76', '77', '78', '79', '7a', '7b', '7c', '7d', '7e', '7f', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '8a', '8b', '8c', '8d', '8e', '8f', '90', '91', '92', '93', '94', '95', '96', '97', '98', '99', '9a', '9b', '9c', '9d', '9e', '9f', 'a0', 'a1', 'a2', 'a3', 'a4', 'a5', 'a6', 'a7', 'a8', 'a9', 'aa', 'ab', 'ac', 'ad', 'ae', 'af', 'b0', 'b1', 'b2', 'b3', 'b4', 'b5', 'b6', 'b7', 'b8', 'b9', 'ba', 'bb', 'bc', 'bd', 'be', 'bf', 'c0', 'c1', 'c2', 'c3', 'c4', 'c5', 'c6', 'c7', 'c8', 'c9', 'ca', 'cb', 'cc', 'cd', 'ce', 'cf', 'd0', 'd1', 'd2', 'd3', 'd4', 'd5', 'd6', 'd7', 'd8', 'd9', 'da', 'db', 'dc', 'dd', 'de', 'df', 'e0', 'e1', 'e2', 'e3', 'e4', 'e5', 'e6', 'e7', 'e8', 'e9', 'ea', 'eb', 'ec', 'ed', 'ee', 'ef', 'f0', 'f1', 'f2', 'f3', 'f4', 'f5', 'f6', 'f7', 'f8', 'f9', 'fa', 'fb', 'fc', 'fd', 'fe', 'ff' ];\n\nlet _seed = 1234567;\n\n\nconst DEG2RAD = Math.PI / 180;\nconst RAD2DEG = 180 / Math.PI;\n\n// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\nfunction generateUUID() {\n\n\tconst d0 = Math.random() * 0xffffffff | 0;\n\tconst d1 = Math.random() * 0xffffffff | 0;\n\tconst d2 = Math.random() * 0xffffffff | 0;\n\tconst d3 = Math.random() * 0xffffffff | 0;\n\tconst uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t// .toLowerCase() here flattens concatenated strings to save heap memory space.\n\treturn uuid.toLowerCase();\n\n}\n\nfunction clamp( value, min, max ) {\n\n\treturn Math.max( min, Math.min( max, value ) );\n\n}\n\n// compute euclidean modulo of m % n\n// https://en.wikipedia.org/wiki/Modulo_operation\nfunction euclideanModulo( n, m ) {\n\n\treturn ( ( n % m ) + m ) % m;\n\n}\n\n// Linear mapping from range <a1, a2> to range <b1, b2>\nfunction mapLinear( x, a1, a2, b1, b2 ) {\n\n\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n}\n\n// https://www.gamedev.net/tutorials/programming/general-and-gameplay-programming/inverse-lerp-a-super-useful-yet-often-overlooked-function-r5230/\nfunction inverseLerp( x, y, value ) {\n\n\tif ( x !== y ) {\n\n\t\treturn ( value - x ) / ( y - x );\n\n\t} else {\n\n\t\treturn 0;\n\n\t}\n\n}\n\n// https://en.wikipedia.org/wiki/Linear_interpolation\nfunction lerp( x, y, t ) {\n\n\treturn ( 1 - t ) * x + t * y;\n\n}\n\n// http://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/\nfunction damp( x, y, lambda, dt ) {\n\n\treturn lerp( x, y, 1 - Math.exp( - lambda * dt ) );\n\n}\n\n// https://www.desmos.com/calculator/vcsjnyz7x4\nfunction pingpong( x, length = 1 ) {\n\n\treturn length - Math.abs( euclideanModulo( x, length * 2 ) - length );\n\n}\n\n// http://en.wikipedia.org/wiki/Smoothstep\nfunction smoothstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * ( 3 - 2 * x );\n\n}\n\nfunction smootherstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n}\n\n// Random integer from <low, high> interval\nfunction randInt( low, high ) {\n\n\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n}\n\n// Random float from <low, high> interval\nfunction randFloat( low, high ) {\n\n\treturn low + Math.random() * ( high - low );\n\n}\n\n// Random float from <-range/2, range/2> interval\nfunction randFloatSpread( range ) {\n\n\treturn range * ( 0.5 - Math.random() );\n\n}\n\n// Deterministic pseudo-random float in the interval [ 0, 1 ]\nfunction seededRandom( s ) {\n\n\tif ( s !== undefined ) _seed = s;\n\n\t// Mulberry32 generator\n\n\tlet t = _seed += 0x6D2B79F5;\n\n\tt = Math.imul( t ^ t >>> 15, t | 1 );\n\n\tt ^= t + Math.imul( t ^ t >>> 7, t | 61 );\n\n\treturn ( ( t ^ t >>> 14 ) >>> 0 ) / 4294967296;\n\n}\n\nfunction degToRad( degrees ) {\n\n\treturn degrees * DEG2RAD;\n\n}\n\nfunction radToDeg( radians ) {\n\n\treturn radians * RAD2DEG;\n\n}\n\nfunction isPowerOfTwo( value ) {\n\n\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n}\n\nfunction ceilPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction floorPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction setQuaternionFromProperEuler( q, a, b, c, order ) {\n\n\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n\n\t// rotations are applied to the axes in the order specified by 'order'\n\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n\t// angles are in radians\n\n\tconst cos = Math.cos;\n\tconst sin = Math.sin;\n\n\tconst c2 = cos( b / 2 );\n\tconst s2 = sin( b / 2 );\n\n\tconst c13 = cos( ( a + c ) / 2 );\n\tconst s13 = sin( ( a + c ) / 2 );\n\n\tconst c1_3 = cos( ( a - c ) / 2 );\n\tconst s1_3 = sin( ( a - c ) / 2 );\n\n\tconst c3_1 = cos( ( c - a ) / 2 );\n\tconst s3_1 = sin( ( c - a ) / 2 );\n\n\tswitch ( order ) {\n\n\t\tcase 'XYX':\n\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YZY':\n\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZXZ':\n\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'XZX':\n\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YXY':\n\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZYZ':\n\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order );\n\n\t}\n\n}\n\nfunction denormalize( value, array ) {\n\n\tswitch ( array.constructor ) {\n\n\t\tcase Float32Array:\n\n\t\t\treturn value;\n\n\t\tcase Uint32Array:\n\n\t\t\treturn value / 4294967295.0;\n\n\t\tcase Uint16Array:\n\n\t\t\treturn value / 65535.0;\n\n\t\tcase Uint8Array:\n\n\t\t\treturn value / 255.0;\n\n\t\tcase Int32Array:\n\n\t\t\treturn Math.max( value / 2147483647.0, - 1.0 );\n\n\t\tcase Int16Array:\n\n\t\t\treturn Math.max( value / 32767.0, - 1.0 );\n\n\t\tcase Int8Array:\n\n\t\t\treturn Math.max( value / 127.0, - 1.0 );\n\n\t\tdefault:\n\n\t\t\tthrow new Error( 'Invalid component type.' );\n\n\t}\n\n}\n\nfunction normalize( value, array ) {\n\n\tswitch ( array.constructor ) {\n\n\t\tcase Float32Array:\n\n\t\t\treturn value;\n\n\t\tcase Uint32Array:\n\n\t\t\treturn Math.round( value * 4294967295.0 );\n\n\t\tcase Uint16Array:\n\n\t\t\treturn Math.round( value * 65535.0 );\n\n\t\tcase Uint8Array:\n\n\t\t\treturn Math.round( value * 255.0 );\n\n\t\tcase Int32Array:\n\n\t\t\treturn Math.round( value * 2147483647.0 );\n\n\t\tcase Int16Array:\n\n\t\t\treturn Math.round( value * 32767.0 );\n\n\t\tcase Int8Array:\n\n\t\t\treturn Math.round( value * 127.0 );\n\n\t\tdefault:\n\n\t\t\tthrow new Error( 'Invalid component type.' );\n\n\t}\n\n}\n\nconst MathUtils = {\n\tDEG2RAD: DEG2RAD,\n\tRAD2DEG: RAD2DEG,\n\tgenerateUUID: generateUUID,\n\tclamp: clamp,\n\teuclideanModulo: euclideanModulo,\n\tmapLinear: mapLinear,\n\tinverseLerp: inverseLerp,\n\tlerp: lerp,\n\tdamp: damp,\n\tpingpong: pingpong,\n\tsmoothstep: smoothstep,\n\tsmootherstep: smootherstep,\n\trandInt: randInt,\n\trandFloat: randFloat,\n\trandFloatSpread: randFloatSpread,\n\tseededRandom: seededRandom,\n\tdegToRad: degToRad,\n\tradToDeg: radToDeg,\n\tisPowerOfTwo: isPowerOfTwo,\n\tceilPowerOfTwo: ceilPowerOfTwo,\n\tfloorPowerOfTwo: floorPowerOfTwo,\n\tsetQuaternionFromProperEuler: setQuaternionFromProperEuler,\n\tnormalize: normalize,\n\tdenormalize: denormalize\n};\n\nexport {\n\tDEG2RAD,\n\tRAD2DEG,\n\tgenerateUUID,\n\tclamp,\n\teuclideanModulo,\n\tmapLinear,\n\tinverseLerp,\n\tlerp,\n\tdamp,\n\tpingpong,\n\tsmoothstep,\n\tsmootherstep,\n\trandInt,\n\trandFloat,\n\trandFloatSpread,\n\tseededRandom,\n\tdegToRad,\n\tradToDeg,\n\tisPowerOfTwo,\n\tceilPowerOfTwo,\n\tfloorPowerOfTwo,\n\tsetQuaternionFromProperEuler,\n\tnormalize,\n\tdenormalize,\n\tMathUtils\n};\n","import { clamp } from './MathUtils.js';\n\nclass Vector2 {\n\n\tconstructor( x = 0, y = 0 ) {\n\n\t\tVector2.prototype.isVector2 = true;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.x;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.x = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.y;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.y = value;\n\n\t}\n\n\tset( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v ) {\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v ) {\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = clamp( this.x, min.x, max.x );\n\t\tthis.y = clamp( this.y, min.y, max.y );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = clamp( this.x, minVal, maxVal );\n\t\tthis.y = clamp( this.y, minVal, maxVal );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( clamp( length, min, max ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = Math.trunc( this.x );\n\t\tthis.y = Math.trunc( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tangle() {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tconst angle = Math.atan2( - this.y, - this.x ) + Math.PI;\n\n\t\treturn angle;\n\n\t}\n\n\tangleTo( v ) {\n\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tconst theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( clamp( theta, - 1, 1 ) );\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t}\n\n\trotateAround( center, angle ) {\n\n\t\tconst c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tconst x = this.x - center.x;\n\t\tconst y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\n\t}\n\n}\n\nexport { Vector2 };\n","import { clamp } from './MathUtils.js';\n\nclass Quaternion {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tthis.isQuaternion = true;\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t}\n\n\tstatic slerpFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tlet x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( t === 0 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x0;\n\t\t\tdst[ dstOffset + 1 ] = y0;\n\t\t\tdst[ dstOffset + 2 ] = z0;\n\t\t\tdst[ dstOffset + 3 ] = w0;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( t === 1 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x1;\n\t\t\tdst[ dstOffset + 1 ] = y1;\n\t\t\tdst[ dstOffset + 2 ] = z1;\n\t\t\tdst[ dstOffset + 3 ] = w1;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tlet s = 1 - t;\n\t\t\tconst cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tconst sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tconst tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tconst f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n\tstatic multiplyQuaternionsFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1 ) {\n\n\t\tconst x0 = src0[ srcOffset0 ];\n\t\tconst y0 = src0[ srcOffset0 + 1 ];\n\t\tconst z0 = src0[ srcOffset0 + 2 ];\n\t\tconst w0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 ];\n\t\tconst y1 = src1[ srcOffset1 + 1 ];\n\t\tconst z1 = src1[ srcOffset1 + 2 ];\n\t\tconst w1 = src1[ srcOffset1 + 3 ];\n\n\t\tdst[ dstOffset ] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\n\t\tdst[ dstOffset + 1 ] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\n\t\tdst[ dstOffset + 2 ] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\n\t\tdst[ dstOffset + 3 ] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\n\n\t\treturn dst;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget w() {\n\n\t\treturn this._w;\n\n\t}\n\n\tset w( value ) {\n\n\t\tthis._w = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t}\n\n\tcopy( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromEuler( euler, update = true ) {\n\n\t\tconst x = euler._x, y = euler._y, z = euler._z, order = euler._order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c1 = cos( x / 2 );\n\t\tconst c2 = cos( y / 2 );\n\t\tconst c3 = cos( z / 2 );\n\n\t\tconst s1 = sin( x / 2 );\n\t\tconst s2 = sin( y / 2 );\n\t\tconst s3 = sin( z / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tif ( update === true ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAxisAngle( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tconst halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\tconst s = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromUnitVectors( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tlet r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < Number.EPSILON ) {\n\n\t\t\t// vFrom and vTo point in opposite directions\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t}\n\n\tangleTo( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t}\n\n\trotateTowards( q, step ) {\n\n\t\tconst angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tconst t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\treturn this.set( 0, 0, 0, 1 );\n\n\t}\n\n\tinvert() {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t}\n\n\tconjugate() {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t}\n\n\tnormalize() {\n\n\t\tlet l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t}\n\n\tpremultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t}\n\n\tmultiplyQuaternions( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tconst qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tconst qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerp( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tconst x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tlet cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tconst s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize(); // normalize calls _onChangeCallback()\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tconst halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tconst ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerpQuaternions( qa, qb, t ) {\n\n\t\treturn this.copy( qa ).slerp( qb, t );\n\n\t}\n\n\trandom() {\n\n\t\t// sets this quaternion to a uniform random unit quaternnion\n\n\t\t// Ken Shoemake\n\t\t// Uniform random rotations\n\t\t// D. Kirk, editor, Graphics Gems III, pages 124-132. Academic Press, New York, 1992.\n\n\t\tconst theta1 = 2 * Math.PI * Math.random();\n\t\tconst theta2 = 2 * Math.PI * Math.random();\n\n\t\tconst x0 = Math.random();\n\t\tconst r1 = Math.sqrt( 1 - x0 );\n\t\tconst r2 = Math.sqrt( x0 );\n\n\t\treturn this.set(\n\t\t\tr1 * Math.sin( theta1 ),\n\t\t\tr1 * Math.cos( theta1 ),\n\t\t\tr2 * Math.sin( theta2 ),\n\t\t\tr2 * Math.cos( theta2 ),\n\t\t);\n\n\t}\n\n\tequals( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis._x = attribute.getX( index );\n\t\tthis._y = attribute.getY( index );\n\t\tthis._z = attribute.getZ( index );\n\t\tthis._w = attribute.getW( index );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.toArray();\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this._x;\n\t\tyield this._y;\n\t\tyield this._z;\n\t\tyield this._w;\n\n\t}\n\n}\n\nexport { Quaternion };\n","import { clamp } from './MathUtils.js';\nimport { Quaternion } from './Quaternion.js';\n\nclass Vector3 {\n\n\tconstructor( x = 0, y = 0, z = 0 ) {\n\n\t\tVector3.prototype.isVector3 = true;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t}\n\n\tset( x, y, z ) {\n\n\t\tif ( z === undefined ) z = this.z; // sprite.scale.set(x,y)\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v ) {\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v ) {\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyVectors( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyEuler( euler ) {\n\n\t\treturn this.applyQuaternion( _quaternion.setFromEuler( euler ) );\n\n\t}\n\n\tapplyAxisAngle( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion.setFromAxisAngle( axis, angle ) );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tconst w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\t// quaternion q is assumed to have unit length\n\n\t\tconst vx = this.x, vy = this.y, vz = this.z;\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// t = 2 * cross( q.xyz, v );\n\t\tconst tx = 2 * ( qy * vz - qz * vy );\n\t\tconst ty = 2 * ( qz * vx - qx * vz );\n\t\tconst tz = 2 * ( qx * vy - qy * vx );\n\n\t\t// v + q.w * t + cross( q.xyz, t );\n\t\tthis.x = vx + qw * tx + qy * tz - qz * ty;\n\t\tthis.y = vy + qw * ty + qz * tx - qx * tz;\n\t\tthis.z = vz + qw * tz + qx * ty - qy * tx;\n\n\t\treturn this;\n\n\t}\n\n\tproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t}\n\n\tunproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = clamp( this.x, min.x, max.x );\n\t\tthis.y = clamp( this.y, min.y, max.y );\n\t\tthis.z = clamp( this.z, min.z, max.z );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = clamp( this.x, minVal, maxVal );\n\t\tthis.y = clamp( this.y, minVal, maxVal );\n\t\tthis.z = clamp( this.z, minVal, maxVal );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( clamp( length, min, max ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = Math.trunc( this.x );\n\t\tthis.y = Math.trunc( this.y );\n\t\tthis.z = Math.trunc( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t}\n\n\t// TODO lengthSquared?\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.crossVectors( this, v );\n\n\t}\n\n\tcrossVectors( a, b ) {\n\n\t\tconst ax = a.x, ay = a.y, az = a.z;\n\t\tconst bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t}\n\n\tprojectOnVector( v ) {\n\n\t\tconst denominator = v.lengthSq();\n\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\n\n\t\tconst scalar = v.dot( this ) / denominator;\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t}\n\n\tprojectOnPlane( planeNormal ) {\n\n\t\t_vector.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector );\n\n\t}\n\n\treflect( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t}\n\n\tangleTo( v ) {\n\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tconst theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( clamp( theta, - 1, 1 ) );\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t}\n\n\tsetFromSpherical( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t}\n\n\tsetFromSphericalCoords( radius, phi, theta ) {\n\n\t\tconst sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCylindrical( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t}\n\n\tsetFromCylindricalCoords( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixPosition( m ) {\n\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixScale( m ) {\n\n\t\tconst sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tconst sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tconst sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixColumn( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t}\n\n\tsetFromMatrix3Column( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 3 );\n\n\t}\n\n\tsetFromEuler( e ) {\n\n\t\tthis.x = e._x;\n\t\tthis.y = e._y;\n\t\tthis.z = e._z;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromColor( c ) {\n\n\t\tthis.x = c.r;\n\t\tthis.y = c.g;\n\t\tthis.z = c.b;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\trandomDirection() {\n\n\t\t// https://mathworld.wolfram.com/SpherePointPicking.html\n\n\t\tconst theta = Math.random() * Math.PI * 2;\n\t\tconst u = Math.random() * 2 - 1;\n\t\tconst c = Math.sqrt( 1 - u * u );\n\n\t\tthis.x = c * Math.cos( theta );\n\t\tthis.y = u;\n\t\tthis.z = c * Math.sin( theta );\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\t\tyield this.z;\n\n\t}\n\n}\n\nconst _vector = /*@__PURE__*/ new Vector3();\nconst _quaternion = /*@__PURE__*/ new Quaternion();\n\nexport { Vector3 };\n","import { clamp } from './MathUtils.js';\n\nclass Vector4 {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tVector4.prototype.isVector4 = true;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.z;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.z = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.w;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.w = value;\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetW( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v ) {\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v ) {\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\t\tthis.w *= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\t\tthis.w /= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tsetAxisAngleFromQuaternion( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tconst s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetAxisAngleFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tlet angle, x, y, z; // variables for result\n\t\tconst epsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tconst xx = ( m11 + 1 ) / 2;\n\t\t\tconst yy = ( m22 + 1 ) / 2;\n\t\t\tconst zz = ( m33 + 1 ) / 2;\n\t\t\tconst xy = ( m12 + m21 ) / 4;\n\t\t\tconst xz = ( m13 + m31 ) / 4;\n\t\t\tconst yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tlet s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t\t( m13 - m31 ) * ( m13 - m31 ) +\n\t\t\t( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixPosition( m ) {\n\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\t\tthis.w = e[ 15 ];\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = clamp( this.x, min.x, max.x );\n\t\tthis.y = clamp( this.y, min.y, max.y );\n\t\tthis.z = clamp( this.z, min.z, max.z );\n\t\tthis.w = clamp( this.w, min.w, max.w );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = clamp( this.x, minVal, maxVal );\n\t\tthis.y = clamp( this.y, minVal, maxVal );\n\t\tthis.z = clamp( this.z, minVal, maxVal );\n\t\tthis.w = clamp( this.w, minVal, maxVal );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( clamp( length, min, max ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = Math.trunc( this.x );\n\t\tthis.y = Math.trunc( this.y );\n\t\tthis.z = Math.trunc( this.z );\n\t\tthis.w = Math.trunc( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\t\tthis.w = v1.w + ( v2.w - v1.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\t\tthis.w = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\t\tyield this.z;\n\t\tyield this.w;\n\n\t}\n\n}\n\nexport { Vector4 };\n","class Matrix3 {\n\n\tconstructor( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tMatrix3.prototype.isMatrix3 = true;\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t];\n\n\t\tif ( n11 !== undefined ) {\n\n\t\t\tthis.set( n11, n12, n13, n21, n22, n23, n31, n32, n33 );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrix3Column( this, 0 );\n\t\tyAxis.setFromMatrix3Column( this, 1 );\n\t\tzAxis.setFromMatrix3Column( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix4( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t}\n\n\tinvert() {\n\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ],\n\t\t\tn12 = te[ 3 ], n22 = te[ 4 ], n32 = te[ 5 ],\n\t\t\tn13 = te[ 6 ], n23 = te[ 7 ], n33 = te[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\ttranspose() {\n\n\t\tlet tmp;\n\t\tconst m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tgetNormalMatrix( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).invert().transpose();\n\n\t}\n\n\ttransposeIntoArray( r ) {\n\n\t\tconst m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetUvTransform( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tconst c = Math.cos( rotation );\n\t\tconst s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\t//\n\n\tscale( sx, sy ) {\n\n\t\tthis.premultiply( _m3.makeScale( sx, sy ) );\n\n\t\treturn this;\n\n\t}\n\n\trotate( theta ) {\n\n\t\tthis.premultiply( _m3.makeRotation( - theta ) );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( tx, ty ) {\n\n\t\tthis.premultiply( _m3.makeTranslation( tx, ty ) );\n\n\t\treturn this;\n\n\t}\n\n\t// for 2D Transforms\n\n\tmakeTranslation( x, y ) {\n\n\t\tif ( x.isVector2 ) {\n\n\t\t\tthis.set(\n\n\t\t\t\t1, 0, x.x,\n\t\t\t\t0, 1, x.y,\n\t\t\t\t0, 0, 1\n\n\t\t\t);\n\n\t\t} else {\n\n\t\t\tthis.set(\n\n\t\t\t\t1, 0, x,\n\t\t\t\t0, 1, y,\n\t\t\t\t0, 0, 1\n\n\t\t\t);\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotation( theta ) {\n\n\t\t// counterclockwise\n\n\t\tconst c = Math.cos( theta );\n\t\tconst s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0,\n\t\t\ts, c, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeScale( x, y ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0,\n\t\t\t0, y, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\t//\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t}\n\n}\n\nconst _m3 = /*@__PURE__*/ new Matrix3();\n\nexport { Matrix3 };\n","export const REVISION = '173';\n\nexport const MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };\nexport const TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };\nexport const CullFaceNone = 0;\nexport const CullFaceBack = 1;\nexport const CullFaceFront = 2;\nexport const CullFaceFrontBack = 3;\nexport const BasicShadowMap = 0;\nexport const PCFShadowMap = 1;\nexport const PCFSoftShadowMap = 2;\nexport const VSMShadowMap = 3;\nexport const FrontSide = 0;\nexport const BackSide = 1;\nexport const DoubleSide = 2;\nexport const NoBlending = 0;\nexport const NormalBlending = 1;\nexport const AdditiveBlending = 2;\nexport const SubtractiveBlending = 3;\nexport const MultiplyBlending = 4;\nexport const CustomBlending = 5;\nexport const AddEquation = 100;\nexport const SubtractEquation = 101;\nexport const ReverseSubtractEquation = 102;\nexport const MinEquation = 103;\nexport const MaxEquation = 104;\nexport const ZeroFactor = 200;\nexport const OneFactor = 201;\nexport const SrcColorFactor = 202;\nexport const OneMinusSrcColorFactor = 203;\nexport const SrcAlphaFactor = 204;\nexport const OneMinusSrcAlphaFactor = 205;\nexport const DstAlphaFactor = 206;\nexport const OneMinusDstAlphaFactor = 207;\nexport const DstColorFactor = 208;\nexport const OneMinusDstColorFactor = 209;\nexport const SrcAlphaSaturateFactor = 210;\nexport const ConstantColorFactor = 211;\nexport const OneMinusConstantColorFactor = 212;\nexport const ConstantAlphaFactor = 213;\nexport const OneMinusConstantAlphaFactor = 214;\nexport const NeverDepth = 0;\nexport const AlwaysDepth = 1;\nexport const LessDepth = 2;\nexport const LessEqualDepth = 3;\nexport const EqualDepth = 4;\nexport const GreaterEqualDepth = 5;\nexport const GreaterDepth = 6;\nexport const NotEqualDepth = 7;\nexport const MultiplyOperation = 0;\nexport const MixOperation = 1;\nexport const AddOperation = 2;\nexport const NoToneMapping = 0;\nexport const LinearToneMapping = 1;\nexport const ReinhardToneMapping = 2;\nexport const CineonToneMapping = 3;\nexport const ACESFilmicToneMapping = 4;\nexport const CustomToneMapping = 5;\nexport const AgXToneMapping = 6;\nexport const NeutralToneMapping = 7;\nexport const AttachedBindMode = 'attached';\nexport const DetachedBindMode = 'detached';\n\nexport const UVMapping = 300;\nexport const CubeReflectionMapping = 301;\nexport const CubeRefractionMapping = 302;\nexport const EquirectangularReflectionMapping = 303;\nexport const EquirectangularRefractionMapping = 304;\nexport const CubeUVReflectionMapping = 306;\nexport const RepeatWrapping = 1000;\nexport const ClampToEdgeWrapping = 1001;\nexport const MirroredRepeatWrapping = 1002;\nexport const NearestFilter = 1003;\nexport const NearestMipmapNearestFilter = 1004;\nexport const NearestMipMapNearestFilter = 1004;\nexport const NearestMipmapLinearFilter = 1005;\nexport const NearestMipMapLinearFilter = 1005;\nexport const LinearFilter = 1006;\nexport const LinearMipmapNearestFilter = 1007;\nexport const LinearMipMapNearestFilter = 1007;\nexport const LinearMipmapLinearFilter = 1008;\nexport const LinearMipMapLinearFilter = 1008;\nexport const UnsignedByteType = 1009;\nexport const ByteType = 1010;\nexport const ShortType = 1011;\nexport const UnsignedShortType = 1012;\nexport const IntType = 1013;\nexport const UnsignedIntType = 1014;\nexport const FloatType = 1015;\nexport const HalfFloatType = 1016;\nexport const UnsignedShort4444Type = 1017;\nexport const UnsignedShort5551Type = 1018;\nexport const UnsignedInt248Type = 1020;\nexport const UnsignedInt5999Type = 35902;\nexport const AlphaFormat = 1021;\nexport const RGBFormat = 1022;\nexport const RGBAFormat = 1023;\nexport const LuminanceFormat = 1024;\nexport const LuminanceAlphaFormat = 1025;\nexport const DepthFormat = 1026;\nexport const DepthStencilFormat = 1027;\nexport const RedFormat = 1028;\nexport const RedIntegerFormat = 1029;\nexport const RGFormat = 1030;\nexport const RGIntegerFormat = 1031;\nexport const RGBIntegerFormat = 1032;\nexport const RGBAIntegerFormat = 1033;\n\nexport const RGB_S3TC_DXT1_Format = 33776;\nexport const RGBA_S3TC_DXT1_Format = 33777;\nexport const RGBA_S3TC_DXT3_Format = 33778;\nexport const RGBA_S3TC_DXT5_Format = 33779;\nexport const RGB_PVRTC_4BPPV1_Format = 35840;\nexport const RGB_PVRTC_2BPPV1_Format = 35841;\nexport const RGBA_PVRTC_4BPPV1_Format = 35842;\nexport const RGBA_PVRTC_2BPPV1_Format = 35843;\nexport const RGB_ETC1_Format = 36196;\nexport const RGB_ETC2_Format = 37492;\nexport const RGBA_ETC2_EAC_Format = 37496;\nexport const RGBA_ASTC_4x4_Format = 37808;\nexport const RGBA_ASTC_5x4_Format = 37809;\nexport const RGBA_ASTC_5x5_Format = 37810;\nexport const RGBA_ASTC_6x5_Format = 37811;\nexport const RGBA_ASTC_6x6_Format = 37812;\nexport const RGBA_ASTC_8x5_Format = 37813;\nexport const RGBA_ASTC_8x6_Format = 37814;\nexport const RGBA_ASTC_8x8_Format = 37815;\nexport const RGBA_ASTC_10x5_Format = 37816;\nexport const RGBA_ASTC_10x6_Format = 37817;\nexport const RGBA_ASTC_10x8_Format = 37818;\nexport const RGBA_ASTC_10x10_Format = 37819;\nexport const RGBA_ASTC_12x10_Format = 37820;\nexport const RGBA_ASTC_12x12_Format = 37821;\nexport const RGBA_BPTC_Format = 36492;\nexport const RGB_BPTC_SIGNED_Format = 36494;\nexport const RGB_BPTC_UNSIGNED_Format = 36495;\nexport const RED_RGTC1_Format = 36283;\nexport const SIGNED_RED_RGTC1_Format = 36284;\nexport const RED_GREEN_RGTC2_Format = 36285;\nexport const SIGNED_RED_GREEN_RGTC2_Format = 36286;\nexport const LoopOnce = 2200;\nexport const LoopRepeat = 2201;\nexport const LoopPingPong = 2202;\nexport const InterpolateDiscrete = 2300;\nexport const InterpolateLinear = 2301;\nexport const InterpolateSmooth = 2302;\nexport const ZeroCurvatureEnding = 2400;\nexport const ZeroSlopeEnding = 2401;\nexport const WrapAroundEnding = 2402;\nexport const NormalAnimationBlendMode = 2500;\nexport const AdditiveAnimationBlendMode = 2501;\nexport const TrianglesDrawMode = 0;\nexport const TriangleStripDrawMode = 1;\nexport const TriangleFanDrawMode = 2;\nexport const BasicDepthPacking = 3200;\nexport const RGBADepthPacking = 3201;\nexport const RGBDepthPacking = 3202;\nexport const RGDepthPacking = 3203;\nexport const TangentSpaceNormalMap = 0;\nexport const ObjectSpaceNormalMap = 1;\n\n// Color space string identifiers, matching CSS Color Module Level 4 and WebGPU names where available.\nexport const NoColorSpace = '';\nexport const SRGBColorSpace = 'srgb';\nexport const LinearSRGBColorSpace = 'srgb-linear';\n\nexport const LinearTransfer = 'linear';\nexport const SRGBTransfer = 'srgb';\n\nexport const ZeroStencilOp = 0;\nexport const KeepStencilOp = 7680;\nexport const ReplaceStencilOp = 7681;\nexport const IncrementStencilOp = 7682;\nexport const DecrementStencilOp = 7683;\nexport const IncrementWrapStencilOp = 34055;\nexport const DecrementWrapStencilOp = 34056;\nexport const InvertStencilOp = 5386;\n\nexport const NeverStencilFunc = 512;\nexport const LessStencilFunc = 513;\nexport const EqualStencilFunc = 514;\nexport const LessEqualStencilFunc = 515;\nexport const GreaterStencilFunc = 516;\nexport const NotEqualStencilFunc = 517;\nexport const GreaterEqualStencilFunc = 518;\nexport const AlwaysStencilFunc = 519;\n\nexport const NeverCompare = 512;\nexport const LessCompare = 513;\nexport const EqualCompare = 514;\nexport const LessEqualCompare = 515;\nexport const GreaterCompare = 516;\nexport const NotEqualCompare = 517;\nexport const GreaterEqualCompare = 518;\nexport const AlwaysCompare = 519;\n\nexport const StaticDrawUsage = 35044;\nexport const DynamicDrawUsage = 35048;\nexport const StreamDrawUsage = 35040;\nexport const StaticReadUsage = 35045;\nexport const DynamicReadUsage = 35049;\nexport const StreamReadUsage = 35041;\nexport const StaticCopyUsage = 35046;\nexport const DynamicCopyUsage = 35050;\nexport const StreamCopyUsage = 35042;\n\nexport const GLSL1 = '100';\nexport const GLSL3 = '300 es';\n\nexport const WebGLCoordinateSystem = 2000;\nexport const WebGPUCoordinateSystem = 2001;\n\nexport const TimestampQuery = {\n\tCOMPUTE: 'compute',\n\tRENDER: 'render'\n};\n","import { WebGLCoordinateSystem, WebGPUCoordinateSystem } from '../constants.js';\nimport { Vector3 } from './Vector3.js';\n\nclass Matrix4 {\n\n\tconstructor( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tMatrix4.prototype.isMatrix4 = true;\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t];\n\n\t\tif ( n11 !== undefined ) {\n\n\t\t\tthis.set( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t}\n\n\tcopyPosition( m ) {\n\n\t\tconst te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix3( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ], 0,\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ], 0,\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ], 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmakeBasis( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractRotation( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tconst scaleX = 1 / _v1.setFromMatrixColumn( m, 0 ).length();\n\t\tconst scaleY = 1 / _v1.setFromMatrixColumn( m, 1 ).length();\n\t\tconst scaleZ = 1 / _v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromEuler( euler ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = euler.x, y = euler.y, z = euler.z;\n\t\tconst a = Math.cos( x ), b = Math.sin( x );\n\t\tconst c = Math.cos( y ), d = Math.sin( y );\n\t\tconst e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromQuaternion( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t}\n\n\tlookAt( eye, target, up ) {\n\n\t\tconst te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tconst a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tconst b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tconst n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tconst n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tconst n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t}\n\n\ttranspose() {\n\n\t\tconst te = this.elements;\n\t\tlet tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tsetPosition( x, y, z ) {\n\n\t\tconst te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tinvert() {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ], n41 = te[ 3 ],\n\t\t\tn12 = te[ 4 ], n22 = te[ 5 ], n32 = te[ 6 ], n42 = te[ 7 ],\n\t\t\tn13 = te[ 8 ], n23 = te[ 9 ], n33 = te[ 10 ], n43 = te[ 11 ],\n\t\t\tn14 = te[ 12 ], n24 = te[ 13 ], n34 = te[ 14 ], n44 = te[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tconst det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\tscale( v ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t}\n\n\tgetMaxScaleOnAxis() {\n\n\t\tconst te = this.elements;\n\n\t\tconst scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tconst scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tconst scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t}\n\n\tmakeTranslation( x, y, z ) {\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tthis.set(\n\n\t\t\t\t1, 0, 0, x.x,\n\t\t\t\t0, 1, 0, x.y,\n\t\t\t\t0, 0, 1, x.z,\n\t\t\t\t0, 0, 0, 1\n\n\t\t\t);\n\n\t\t} else {\n\n\t\t\tthis.set(\n\n\t\t\t\t1, 0, 0, x,\n\t\t\t\t0, 1, 0, y,\n\t\t\t\t0, 0, 1, z,\n\t\t\t\t0, 0, 0, 1\n\n\t\t\t);\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationX( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationY( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationZ( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationAxis( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tconst c = Math.cos( angle );\n\t\tconst s = Math.sin( angle );\n\t\tconst t = 1 - c;\n\t\tconst x = axis.x, y = axis.y, z = axis.z;\n\t\tconst tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeScale( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeShear( xy, xz, yx, yz, zx, zy ) {\n\n\t\tthis.set(\n\n\t\t\t1, yx, zx, 0,\n\t\t\txy, 1, zy, 0,\n\t\t\txz, yz, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tconst x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tconst xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tconst yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tconst wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tconst sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tdecompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tlet sx = _v1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tconst sy = _v1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tconst sz = _v1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tconst det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1.copy( this );\n\n\t\tconst invSX = 1 / sx;\n\t\tconst invSY = 1 / sy;\n\t\tconst invSZ = 1 / sz;\n\n\t\t_m1.elements[ 0 ] *= invSX;\n\t\t_m1.elements[ 1 ] *= invSX;\n\t\t_m1.elements[ 2 ] *= invSX;\n\n\t\t_m1.elements[ 4 ] *= invSY;\n\t\t_m1.elements[ 5 ] *= invSY;\n\t\t_m1.elements[ 6 ] *= invSY;\n\n\t\t_m1.elements[ 8 ] *= invSZ;\n\t\t_m1.elements[ 9 ] *= invSZ;\n\t\t_m1.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tmakePerspective( left, right, top, bottom, near, far, coordinateSystem = WebGLCoordinateSystem ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = 2 * near / ( right - left );\n\t\tconst y = 2 * near / ( top - bottom );\n\n\t\tconst a = ( right + left ) / ( right - left );\n\t\tconst b = ( top + bottom ) / ( top - bottom );\n\n\t\tlet c, d;\n\n\t\tif ( coordinateSystem === WebGLCoordinateSystem ) {\n\n\t\t\tc = - ( far + near ) / ( far - near );\n\t\t\td = ( - 2 * far * near ) / ( far - near );\n\n\t\t} else if ( coordinateSystem === WebGPUCoordinateSystem ) {\n\n\t\t\tc = - far / ( far - near );\n\t\t\td = ( - far * near ) / ( far - near );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.Matrix4.makePerspective(): Invalid coordinate system: ' + coordinateSystem );\n\n\t\t}\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a; \tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b; \tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c; \tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t}\n\n\tmakeOrthographic( left, right, top, bottom, near, far, coordinateSystem = WebGLCoordinateSystem ) {\n\n\t\tconst te = this.elements;\n\t\tconst w = 1.0 / ( right - left );\n\t\tconst h = 1.0 / ( top - bottom );\n\t\tconst p = 1.0 / ( far - near );\n\n\t\tconst x = ( right + left ) * w;\n\t\tconst y = ( top + bottom ) * h;\n\n\t\tlet z, zInv;\n\n\t\tif ( coordinateSystem === WebGLCoordinateSystem ) {\n\n\t\t\tz = ( far + near ) * p;\n\t\t\tzInv = - 2 * p;\n\n\t\t} else if ( coordinateSystem === WebGPUCoordinateSystem ) {\n\n\t\t\tz = near * p;\n\t\t\tzInv = - 1 * p;\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.Matrix4.makeOrthographic(): Invalid coordinate system: ' + coordinateSystem );\n\n\t\t}\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\t\tte[ 8 ] = 0; \t\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0; \t\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0; \t\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0; \t\tte[ 6 ] = 0;\t\tte[ 10 ] = zInv;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0; \t\tte[ 7 ] = 0;\t\tte[ 11 ] = 0;\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n}\n\nconst _v1 = /*@__PURE__*/ new Vector3();\nconst _m1 = /*@__PURE__*/ new Matrix4();\nconst _zero = /*@__PURE__*/ new Vector3( 0, 0, 0 );\nconst _one = /*@__PURE__*/ new Vector3( 1, 1, 1 );\nconst _x = /*@__PURE__*/ new Vector3();\nconst _y = /*@__PURE__*/ new Vector3();\nconst _z = /*@__PURE__*/ new Vector3();\n\nexport { Matrix4 };\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n// AST node parsers\n\nimport { Vector2 } from \"three/src/math/Vector2.js\";\nimport { Vector3 } from \"three/src/math/Vector3.js\";\nimport { Vector4 } from \"three/src/math/Vector4.js\";\nimport { Matrix3 } from \"three/src/math/Matrix3.js\";\nimport { Matrix4 } from \"three/src/math/Matrix4.js\";\n\nexport const decl = {};\n\ndecl.in = 0;\ndecl.out = 1;\ndecl.inout = 2;\n\nconst get = (n) => n.token.data;\n\ndecl.node = function (node) {\n  if (\n    (node.children[5] != null ? node.children[5].type : undefined) ===\n    \"function\"\n  ) {\n    return decl.function(node);\n  } else if ((node.token != null ? node.token.type : undefined) === \"keyword\") {\n    return decl.external(node);\n  }\n};\n\ndecl.external = function (node) {\n  //    console.log 'external', node\n  let c = node.children;\n\n  let storage = get(c[1]);\n  const type = get(c[4]);\n  const list = c[5];\n\n  if (![\"attribute\", \"uniform\", \"varying\"].includes(storage)) {\n    storage = \"global\";\n  }\n\n  const out = [];\n\n  for (let i = 0; i < list.children.length; i++) {\n    c = list.children[i];\n    if (c.type === \"ident\") {\n      const ident = get(c);\n      const next = list.children[i + 1];\n      const quant = (next != null ? next.type : undefined) === \"quantifier\";\n\n      out.push({\n        decl: \"external\",\n        storage,\n        type,\n        ident,\n        quant: !!quant,\n        count: quant,\n      });\n    }\n  }\n\n  return out;\n};\n\ndecl.function = function (node) {\n  const c = node.children;\n\n  //    console.log 'function', node\n\n  const storage = get(c[1]);\n  const type = get(c[4]);\n  const func = c[5];\n  const ident = get(func.children[0]);\n  const args = func.children[1];\n  const body = func.children[2];\n\n  const decls = Array.from(args.children).map((child) => decl.argument(child));\n\n  return [\n    {\n      decl: \"function\",\n      storage,\n      type,\n      ident,\n      body: !!body,\n      args: decls,\n    },\n  ];\n};\n\ndecl.argument = function (node) {\n  const c = node.children;\n\n  //    console.log 'argument', node\n\n  const storage = get(c[1]);\n  const inout = get(c[2]);\n  const type = get(c[4]);\n  const list = c[5];\n  const ident = get(list.children[0]);\n  const quant = list.children[1];\n\n  const count = quant ? quant.children[0].token.data : undefined;\n\n  return {\n    decl: \"argument\",\n    storage,\n    inout,\n    type,\n    ident,\n    quant: !!quant,\n    count,\n  };\n};\n\ndecl.param = function (dir, storage, spec, quant, count) {\n  let prefix = [];\n  if (storage != null) {\n    prefix.push(storage);\n  }\n  if (spec != null) {\n    prefix.push(spec);\n  }\n  prefix.push(\"\");\n\n  prefix = prefix.join(\" \");\n  const suffix = quant ? \"[\" + count + \"]\" : \"\";\n  if (dir !== \"\") {\n    dir += \" \";\n  }\n\n  const f = (name, long) => (long ? dir : \"\") + `${prefix}${name}${suffix}`;\n  f.split = (dir) => decl.param(dir, storage, spec, quant, count);\n\n  return f;\n};\n\n// Three.js sugar\nconst win = typeof window !== \"undefined\";\nconst threejs = win && !!window.THREE;\n\nconst defaults = {\n  int: 0,\n  float: 0,\n  vec2: threejs ? Vector2 : null,\n  vec3: threejs ? Vector3 : null,\n  vec4: threejs ? Vector4 : null,\n  mat2: null,\n  mat3: threejs ? Matrix3 : null,\n  mat4: threejs ? Matrix4 : null,\n  sampler2D: 0,\n  samplerCube: 0,\n};\n\nconst three = {\n  int: \"i\",\n  float: \"f\",\n  vec2: \"v2\",\n  vec3: \"v3\",\n  vec4: \"v4\",\n  mat2: \"m2\",\n  mat3: \"m3\",\n  mat4: \"m4\",\n  sampler2D: \"t\",\n  samplerCube: \"t\",\n};\n\ndecl.type = function (name, spec, quant, count, dir, storage) {\n  const dirs = {\n    in: decl.in,\n    out: decl.out,\n    inout: decl.inout,\n  };\n\n  const storages = { const: \"const\" };\n\n  let type = three[spec];\n  if (quant) {\n    type += \"v\";\n  }\n\n  let value = defaults[spec];\n  if (value != null ? value.call : undefined) {\n    value = new value();\n  }\n  if (quant) {\n    value = [value];\n  }\n\n  const inout = dirs[dir] != null ? dirs[dir] : dirs.in;\n  storage = storages[storage];\n\n  const param = decl.param(dir, storage, spec, quant, count);\n  return new Definition(name, type, spec, param, value, inout);\n};\n\nclass Definition {\n  constructor(name, type, spec, param, value, inout, meta) {\n    this.name = name;\n    this.type = type;\n    this.spec = spec;\n    this.param = param;\n    this.value = value;\n    this.inout = inout;\n    this.meta = meta;\n  }\n\n  split() {\n    // Split inouts\n    const isIn = this.meta.shadowed != null;\n    const dir = isIn ? \"in\" : \"out\";\n    const inout = isIn ? decl.in : decl.out;\n    const param = this.param.split(dir);\n    return new Definition(\n      this.name,\n      this.type,\n      this.spec,\n      param,\n      this.value,\n      inout\n    );\n  }\n\n  copy(name, meta) {\n    return new Definition(\n      name != null ? name : this.name,\n      this.type,\n      this.spec,\n      this.param,\n      this.value,\n      this.inout,\n      meta\n    );\n  }\n}\n","export const SHADOW_ARG = \"_i_o\";\nexport const RETURN_ARG = \"return\";\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS201: Simplify complex destructure assignments\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport tokenize from \"glsl-tokenizer/string\";\nimport parser from \"@sicmutils/glsl-parser/direct\";\nimport { decl } from \"./decl\";\nimport { SHADOW_ARG, RETURN_ARG } from \"./constants\";\n\nlet debug = false;\n\n/*\nparse GLSL into AST\nextract all global symbols and make type signatures\n*/\n// Parse a GLSL snippet\nexport const parse = function (name, code) {\n  const ast = parseGLSL(name, code);\n  return processAST(ast, code);\n};\n\n// Parse GLSL language into AST\nconst parseGLSL = function (name, code) {\n  let ast, tock;\n  let errors = [];\n  if (debug) {\n    tock = tick();\n  }\n\n  try {\n    const tokens = tokenize(code);\n    ast = parser(tokens);\n  } catch (e) {\n    errors = [{ message: e }];\n  }\n\n  if (debug) {\n    tock(\"GLSL Tokenize & Parse\");\n  }\n\n  const fmt = function (code) {\n    code = code.split(\"\\n\");\n    const max = (\"\" + code.length).length;\n    const pad = function (v) {\n      if ((v = \"\" + v).length < max) {\n        return (\"       \" + v).slice(-max);\n      } else {\n        return v;\n      }\n    };\n    return code.map((line, i) => `${pad(i + 1)}: ${line}`).join(\"\\n\");\n  };\n\n  if (!ast || errors.length) {\n    if (!name) {\n      name = \"(inline code)\";\n    }\n    console.warn(fmt(code));\n    for (const error of errors) {\n      console.error(`${name} -`, error.message);\n    }\n    throw new Error(\"GLSL parse error\");\n  }\n\n  return ast;\n};\n\n// Process AST for compilation\nconst processAST = function (ast, code) {\n  let tock;\n  if (debug) {\n    tock = tick();\n  }\n\n  // Walk AST tree and collect global declarations\n  const symbols = [];\n  walk(mapSymbols, collect(symbols), ast, \"\");\n\n  // Sort symbols into bins\n  const [main, internals, externals] = Array.from(sortSymbols(symbols));\n\n  // Extract storage/type signatures of symbols\n  const signatures = extractSignatures(main, internals, externals);\n\n  if (debug) {\n    tock(\"GLSL AST\");\n  }\n\n  return { ast, code, signatures };\n};\n\n// Extract functions and external symbols from AST\nconst mapSymbols = function (node, collect) {\n  switch (node.type) {\n    case \"decl\":\n      collect(decl.node(node));\n      return false;\n  }\n  return true;\n};\n\nconst collect = (out) =>\n  function (value) {\n    if (value != null) {\n      Array.from(value).map((obj) => out.push(obj));\n    }\n  };\n\n// Identify internals, externals and main function\nconst sortSymbols = function (symbols) {\n  let main = null;\n  const internals = [];\n  let externals = [];\n  const maybe = {};\n  let found = false;\n\n  for (const s of Array.from(symbols)) {\n    if (!s.body) {\n      // Unmarked globals are definitely internal\n      if (s.storage === \"global\") {\n        internals.push(s);\n\n        // Possible external\n      } else {\n        externals.push(s);\n        maybe[s.ident] = true;\n      }\n    } else {\n      // Remove earlier forward declaration\n      if (maybe[s.ident]) {\n        externals = Array.from(externals).filter((e) => e.ident !== s.ident);\n        delete maybe[s.ident];\n      }\n\n      // Internal function\n      internals.push(s);\n\n      // Last function is main\n      // unless there is a function called 'main'\n      if (s.ident === \"main\") {\n        main = s;\n        found = true;\n      } else if (!found) {\n        main = s;\n      }\n    }\n  }\n\n  return [main, internals, externals];\n};\n\n// Generate type signatures and appropriate ins/outs\nconst extractSignatures = function (main, internals, externals) {\n  let symbol;\n  const sigs = {\n    uniform: [],\n    attribute: [],\n    varying: [],\n    external: [],\n    internal: [],\n    global: [],\n    main: null,\n  };\n\n  const defn = (symbol) =>\n    decl.type(\n      symbol.ident,\n      symbol.type,\n      symbol.quant,\n      symbol.count,\n      symbol.inout,\n      symbol.storage\n    );\n\n  const func = function (symbol, inout) {\n    let d;\n    const signature = Array.from(symbol.args).map((arg) => defn(arg));\n\n    // Split inouts into in and out\n    for (d of Array.from(signature)) {\n      if (d.inout === decl.inout) {\n        const a = d;\n        const b = d.copy();\n\n        a.inout = decl.in;\n        b.inout = decl.out;\n        b.meta = { shadow: a.name };\n        b.name += SHADOW_ARG;\n        a.meta = { shadowed: b.name };\n\n        signature.push(b);\n      }\n    }\n\n    // Add output for return type\n    if (symbol.type !== \"void\") {\n      signature.unshift(decl.type(RETURN_ARG, symbol.type, false, \"\", \"out\"));\n    }\n\n    // Make type string\n    const inTypes = (() => {\n      const result = [];\n      for (d of Array.from(signature)) {\n        if (d.inout === decl.in) {\n          result.push(d.type);\n        }\n      }\n      return result;\n    })().join(\",\");\n    const outTypes = (() => {\n      const result1 = [];\n      for (d of Array.from(signature)) {\n        if (d.inout === decl.out) {\n          result1.push(d.type);\n        }\n      }\n      return result1;\n    })().join(\",\");\n    const type = `(${inTypes})(${outTypes})`;\n\n    return {\n      name: symbol.ident,\n      type,\n      signature,\n      inout,\n      spec: symbol.type,\n    };\n  };\n\n  // Main\n  sigs.main = func(main, decl.out);\n\n  // Internals (for name replacement only)\n  for (symbol of Array.from(internals)) {\n    sigs.internal.push({\n      name: symbol.ident,\n    });\n  }\n\n  // Externals\n  for (symbol of Array.from(externals)) {\n    let def;\n    switch (symbol.decl) {\n      // Uniforms/attributes/varyings\n      case \"external\":\n        def = defn(symbol);\n        sigs[symbol.storage].push(def);\n        break;\n\n      // Callbacks\n      case \"function\":\n        def = func(symbol, decl.in);\n        sigs.external.push(def);\n        break;\n    }\n  }\n\n  return sigs;\n};\n\n// Walk AST, apply map and collect values\ndebug = false;\n\nexport const walk = function (map, collect, node, indent) {\n  debug &&\n    console.log(\n      indent,\n      node.type,\n      node.token != null ? node.token.data : undefined,\n      node.token != null ? node.token.type : undefined\n    );\n\n  const recurse = map(node, collect);\n\n  if (recurse) {\n    for (let i = 0; i < node.children.length; i++) {\n      const child = node.children[i];\n      walk(map, collect, child, indent + \"  \", debug);\n    }\n  }\n\n  return null;\n};\n\n// #####\n\nconst tick = function () {\n  const now = +new Date();\n  return function (label) {\n    const delta = +new Date() - now;\n    console.log(label, delta + \" ms\");\n    return delta;\n  };\n};\n","/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n\nimport * as Graph from \"../graph\";\nimport * as $ from \"./constants\";\n\n/*\n  GLSL code generator for compiler and linker stubs\n*/\n\n// Check if shadow outlet\nexport function unshadow(name) {\n  const real = name.replace($.SHADOW_ARG, \"\");\n  if (real !== name) {\n    return real;\n  } else {\n    return null;\n  }\n}\n\n// Line joiners\nexport function lines(lines) {\n  return lines.join(\"\\n\");\n}\nexport function list(lines) {\n  return lines.join(\", \");\n}\nexport function statements(lines) {\n  return lines.join(\";\\n\");\n}\n\n// Function body\nexport function body(entry) {\n  return {\n    entry,\n    type: \"void\",\n    params: [],\n    signature: [],\n    return: \"\",\n    vars: {},\n    calls: [],\n    post: [],\n    chain: {},\n  };\n}\n\n// Symbol define\nexport function define(a, b) {\n  return `#define ${a} ${b}`;\n}\n\n// Function define\nexport function fn(type, entry, params, vars, calls) {\n  return `${type} ${entry}(${params}) {\\n${vars}${calls}}`;\n}\n\n// Function invocation\nexport function invoke(ret, entry, args) {\n  ret = ret ? `${ret} = ` : \"\";\n  args = list(args);\n  return `  ${ret}${entry}(${args})`;\n}\n\n// Compare two signatures\nexport function same(a, b) {\n  for (let i = 0; i < a.length; i++) {\n    const A = a[i];\n    const B = b[i];\n    if (!B) {\n      return false;\n    }\n    if (A.type !== B.type) {\n      return false;\n    }\n    if ((A.name === $.RETURN_ARG) !== (B.name === $.RETURN_ARG)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n// Generate call signature for module invocation\nexport function call(lookup, dangling, entry, signature, body) {\n  const args = [];\n  let ret = \"\";\n\n  for (let arg of Array.from(signature)) {\n    let id, shadow;\n    const { name } = arg;\n\n    let copy = (id = lookup(name));\n    let other = null;\n    let meta = null;\n    let omit = false;\n\n    const isReturn = name === $.RETURN_ARG;\n\n    // Shadowed inout: input side\n    if ((shadow = arg.meta != null ? arg.meta.shadowed : undefined)) {\n      other = lookup(shadow);\n      if (other) {\n        body.vars[other] = \"  \" + arg.param(other);\n        body.calls.push(`  ${other} = ${id}`);\n\n        if (!dangling(shadow)) {\n          arg = arg.split();\n        } else {\n          meta = { shadowed: other };\n        }\n      }\n    }\n\n    // Shadowed inout: output side\n    if ((shadow = arg.meta != null ? arg.meta.shadow : undefined)) {\n      other = lookup(shadow);\n      if (other) {\n        if (!dangling(shadow)) {\n          arg = arg.split();\n          omit = true;\n        } else {\n          meta = { shadow: other };\n          continue;\n        }\n      }\n    }\n\n    if (isReturn) {\n      // Capture return value\n      ret = id;\n    } else if (!omit) {\n      // Pass all non return, non shadow args in\n      args.push(other != null ? other : id);\n    }\n\n    // Export argument if unconnected\n    if (dangling(name)) {\n      let op = \"push\";\n      if (isReturn) {\n        if (body.return === \"\") {\n          op = \"unshift\";\n          // Preserve 'return' arg name\n          copy = name;\n          body.type = arg.spec;\n          body.return = `  return ${id}`;\n          body.vars[id] = \"  \" + arg.param(id);\n        } else {\n          body.vars[id] = \"  \" + arg.param(id);\n          body.params.push(arg.param(id, true));\n        }\n      } else {\n        body.params.push(arg.param(id, true));\n      }\n\n      // Copy argument into new signature\n      arg = arg.copy(copy, meta);\n      body.signature[op](arg);\n    } else {\n      body.vars[id] = \"  \" + arg.param(id);\n    }\n  }\n\n  return body.calls.push(invoke(ret, entry, args));\n}\n\n// Assemble main() function from body and call reference\nexport function build(body, calls) {\n  const { entry } = body;\n  let code = null;\n\n  // Check if we're only calling one snippet with identical signature\n  // and not building void main();\n  if (calls && calls.length === 1 && entry !== \"main\") {\n    const b = calls[0].module;\n\n    if (same(body.signature, b.main.signature)) {\n      code = define(entry, b.entry);\n    }\n  }\n\n  // Otherwise build function body\n  if (code == null) {\n    let vars = (() => {\n      const result = [];\n      for (const v in body.vars) {\n        const decl = body.vars[v];\n        result.push(decl);\n      }\n      return result;\n    })();\n    ({ calls } = body);\n    const { post } = body;\n    let { params } = body;\n    const { type } = body;\n    const ret = body.return;\n\n    calls = calls.concat(post);\n    if (ret !== \"\") {\n      calls.push(ret);\n    }\n    calls.push(\"\");\n\n    if (vars.length) {\n      vars.push(\"\");\n      vars = statements(vars) + \"\\n\";\n    } else {\n      vars = \"\";\n    }\n\n    calls = statements(calls);\n    params = list(params);\n\n    code = fn(type, entry, params, vars, calls);\n  }\n\n  return {\n    signature: body.signature,\n    code,\n    name: entry,\n  };\n}\n\n// Build links to other callbacks\nexport function links(links) {\n  const out = {\n    defs: [],\n    bodies: [],\n  };\n\n  for (const l of Array.from(links)) {\n    link(l, out);\n  }\n\n  out.defs = lines(out.defs);\n  out.bodies = statements(out.bodies);\n\n  if (out.defs === \"\") {\n    delete out.defs;\n  }\n  if (out.bodies === \"\") {\n    delete out.bodies;\n  }\n\n  return out;\n}\n\n// Link a module's entry point as a callback\nexport const link = (link, out) => {\n  let arg, list;\n  const { module, name, external } = link;\n  const { main } = module;\n  const { entry } = module;\n\n  // If signatures match, #define alias for the symbol\n  if (same(main.signature, external.signature)) {\n    return out.defs.push(define(name, entry));\n  }\n\n  // Signatures differ, build one-line callback to match defined prototype\n\n  // Map names to names\n  const ins = [];\n  const outs = [];\n  let map = {};\n  const returnVar = [module.namespace, $.RETURN_ARG].join(\"\");\n\n  for (arg of Array.from(external.signature)) {\n    list = arg.inout === Graph.IN ? ins : outs;\n    list.push(arg);\n  }\n\n  for (arg of Array.from(main.signature)) {\n    list = arg.inout === Graph.IN ? ins : outs;\n    const other = list.shift();\n    let _name = other.name;\n\n    // Avoid 'return' keyword\n    if (_name === $.RETURN_ARG) {\n      _name = returnVar;\n    }\n\n    map[arg.name] = _name;\n  }\n\n  // Build function prototype to invoke the other side\n  let _lookup = (name) => map[name];\n  const _dangling = () => true;\n\n  const inner = body();\n  call(_lookup, _dangling, entry, main.signature, inner);\n  inner.entry = entry;\n\n  // Avoid 'return' keyword\n  map = { return: returnVar };\n  _lookup = (name) => (map[name] != null ? map[name] : name);\n\n  // Build wrapper function for the calling side\n  const outer = body();\n  call(_lookup, _dangling, entry, external.signature, outer);\n\n  outer.calls = inner.calls;\n  outer.entry = name;\n\n  out.bodies.push(build(inner).code.split(\" {\")[0]);\n  return out.bodies.push(build(outer).code);\n};\n\n// Remove all function prototypes to avoid redefinition errors\nexport function defuse(code) {\n  // Don't try this at home kids\n  const re =\n    /([A-Za-z0-9_]+\\s+)?[A-Za-z0-9_]+\\s+[A-Za-z0-9_]+\\s*\\([^)]*\\)\\s*;\\s*/gm;\n  const strip = (code) => code.replace(re, (_m) => \"\");\n\n  // Split into scopes by braces\n  const blocks = code.split(/(?=[{}])/g);\n  let level = 0;\n  for (let i = 0; i < blocks.length; i++) {\n    const b = blocks[i];\n    switch (b[0]) {\n      case \"{\":\n        level++;\n        break;\n      case \"}\":\n        level--;\n        break;\n    }\n\n    // Only mess with top level scope\n    if (level === 0) {\n      // Preprocessor lines will fuck us up. Split on them.\n      const hash = b.split(/^[ \\t]*#/m);\n      for (let j = 0; j < hash.length; j++) {\n        let line = hash[j];\n        if (j > 0) {\n          // Trim off preprocessor directive\n          line = line.split(/\\n/);\n          const head = line.shift();\n          const rest = line.join(\"\\n\");\n\n          // Process rest\n          hash[j] = [head, strip(rest)].join(\"\\n\");\n        } else {\n          // Process entire line\n          hash[j] = strip(line);\n        }\n      }\n\n      // Reassemble\n      blocks[i] = hash.join(\"#\");\n    }\n  }\n\n  return (code = blocks.join(\"\"));\n}\n\n// Remove duplicate uniforms / varyings / attributes\nexport function dedupe(code) {\n  const map = {};\n  const re =\n    /((attribute|uniform|varying)\\s+)[A-Za-z0-9_]+\\s+([A-Za-z0-9_]+)\\s*(\\[[^\\]]*\\]\\s*)?;\\s*/gm;\n  return code.replace(re, function (m, qual, type, name, _struct) {\n    if (map[name]) {\n      return \"\";\n    }\n    map[name] = true;\n    return m;\n  });\n}\n\n// Move definitions to top so they compile properly\nexport function hoist(code) {\n  const filter = function (lines, re) {\n    const defs = [];\n    const out = [];\n    for (const line of Array.from(lines)) {\n      const list = line.match(re) ? defs : out;\n      list.push(line);\n    }\n\n    return defs.concat(out);\n  };\n\n  let lines = code.split(\"\\n\");\n\n  // Hoist symbol defines to the top so (re)definitions use the right alias\n  lines = filter(lines, /^#define ([^ ]+ _pg_[0-9]+_|_pg_[0-9]+_ [^ ]+)$/);\n\n  // Hoist extensions\n  lines = filter(lines, /^#extension/);\n\n  return lines.join(\"\\n\");\n}\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nimport { Block } from \"./block\";\nimport * as Factory from \"./factory\";\nimport * as GLSL from \"./glsl\";\nimport * as Graph from \"./graph\";\nimport * as Linker from \"./linker\";\nimport * as Visualize from \"./visualize\";\n\nconst { library, cache } = Factory;\nexport const { visualize, inspect } = Visualize;\nconst { Snippet } = Linker;\n\nconst merge = function (a, b = {}) {\n  const out = {};\n  for (const key in a) {\n    out[key] = b[key] || a[key];\n  }\n  return out;\n};\n\nexport class ShaderGraph {\n  constructor(snippets, config) {\n    const defaults = {\n      globalUniforms: false,\n      globalVaryings: true,\n      globalAttributes: true,\n      globals: [],\n      autoInspect: false,\n    };\n\n    this.config = merge(defaults, config);\n    this.fetch = cache(library(GLSL, snippets, Snippet.load));\n  }\n\n  shader(config) {\n    if (config == null) {\n      config = {};\n    }\n    const _config = merge(this.config, config);\n    return new Factory.Factory(GLSL, this.fetch, _config);\n  }\n\n  material(config) {\n    return new Factory.Material(this.shader(config), this.shader(config));\n  }\n\n  inspect(shader) {\n    return ShaderGraph.inspect(shader);\n  }\n  visualize(shader) {\n    return ShaderGraph.visualize(shader);\n  }\n\n  // Static visualization method\n  static inspect(shader) {\n    return inspect(shader);\n  }\n  static visualize(shader) {\n    return visualize(shader);\n  }\n}\n\n// Expose class hierarchy\nShaderGraph.Block = Block;\nShaderGraph.Factory = Factory;\nShaderGraph.GLSL = GLSL;\nShaderGraph.Graph = Graph;\nShaderGraph.Linker = Linker;\nShaderGraph.Visualize = Visualize;\n\nexport function load(snippets, config = {}) {\n  return new ShaderGraph(snippets, config);\n}\n"],"names":["root","factory","exports","module","define","amd","self","parse","tokens","parser","i","length","state","token","idx","original_symbol","nud","this","children","fail","led","symbol_table","itself","symbol","id","binding_power","sym","lbp","Object","create","expression","rbp","left","t","advance","infix","bp","type","infixr","prefix","suffix","assignment","next","value","output","data","unexpected","scope","find","create_node","message","fake","push","incoming_state","incoming_tokens","result","parent","emit","node","unshift","len","shift","Error","stmtlist","n","STMTLIST","stmt","STMT","decllist","DECLLIST","precision","PRECISION","ident","IDENT","fn","KEYWORD_OR_IDENT","FUNCTION","fnargs","FUNCTIONARGS","forstmt","FORLOOP","ifstmt","IF","whilestmt","WHILELOOP","returnstmt","RETURN","dowhilestmt","DOWHILELOOP","quantifier","QUANTIFIER","parse_struct","parse_precision","parse_quantifier","parse_forloop","parse_if","parse_return","parse_whileloop","parse_dowhileloop","parse_function","parse_function_args","program","check","arguments","slice","call","complete","ended","nodes","whitespace","errored","_node","okay","DEBUG","pad","console","log","undefined","test","add_child","ret","x","Scope","mknode","reader","stative","position","Advance","advance_ident","enter","adhoc","exit","decl","DECL_STRUCT","assert","keyword","advance_expr","lookup","DECL_STATEMENT","maybe_stmtlist","advance_stmtlist","popstmt","expr","mode","name","struct","NO_ASSIGN_ALLOWED","NO_COMMA_ALLOWED","DECL_FUNCTION","setup_stative_parsers","expecting","write","end","input","preceding","concat","take","parse_stmt","parse_stmtlist","DECL","parse_decl","parse_decllist","EXPR","parse_expr","STRUCT","parse_ident","KEYWORD","parse_keyword","parse_keyword_or_ident","brace","got_eof","BREAK","CONTINUE","DISCARD","flags","DECL_ALLOW_INVARIANT","PLACEHOLDER","is_storage","DECL_ALLOW_STORAGE","is_parameter","DECL_NO_INOUT","is_precision","DECL_ALLOW_STRUCT","DECL_ALLOW_COMMA","stage","collected_name","DECL_ALLOW_ASSIGN","parenlevel","bracelevel","indexOf","full_parse_expr","err","parseexpr","token_map","_","allow_assign","allow_comma","default_value","str","line","assert_null_string_or_array","y","join","step","steps","current","op","last","last_node","succeeding","until","declare","skip","COMMENT","PREPROCESSOR","preprocessor","stmt_type","sourcetoken","Math","random","toString","constructor","scopes","proto","prototype","s","pop","hasOwnProperty","opt","c","total","NORMAL","content","col","start","isnum","isoperator","allBuiltins","builtins100","allLiterals","literals100","version","builtins300es","literals300es","builtinsDict","literalsDict","chunk","replace","BLOCK_COMMENT","block_comment","LINE_COMMENT","line_comment","OPERATOR","operator","INTEGER","integer","HEX","hex","FLOAT","decimal","TOKEN","readtoken","WHITESPACE","normal","EOF","map","column","determine_operator","is_composite_operator","buf","res","j","operators","contentstr","BUILTIN","v100","filter","b","tokenize","generator","make","Array","nest","a","compare","min","asc","p","q","max","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","d","definition","key","o","defineProperty","enumerable","get","obj","prop","r","Symbol","toStringTag","Graph","initClass","index","IN","OUT","add","inputs","from","outlet","outputs","getIn","getOut","ignore","graph","remove","disconnect","splice","adopt","Outlet","extra","meta","inout","hint","morph","dupe","connect","_name","owner","outlets","all","setOutlets","_add","hash","match","_remove","existing","_morph","empty","force","dest","dests","source","hints","typeHint","list","sources","_key","Snippet","namespace","load","language","code","sigs","compiler","compile","_signatures","_compiler","_original","main","entry","uniforms","externals","symbols","attributes","varyings","clone","bind","config","defines","def","v","exist","exceptions","global","local","globals","_u","globalUniforms","_v","globalVaryings","_a","globalAttributes","_e","u","e","redef","uniform","varying","external","attribute","body","defs","k","assemble","calls","requires","generate","library","handle","ns","sort","priority","include","isDangling","signature","record","lib","required","ext","copy","build","includes","lines","process","Program","exists","require","snippet","links","modules","exported","header","bodies","m","sorted","defuse","hoist","dedupe","Layout","visits","callback","visit","link","Block","previous","delay","construct","makeOutlets","refresh","layout","_include","export","_program","_depth","_layout","_external","_outlet","_info","string","props","_call","depth","_require","_inputs","arg","__guard__","_callback","_link","OutletError","child","block","_trace","transform","Call","super","params","callbacks","Callback","subroutine","ins","outs","Isolate","seen","done","set","Join","serialize","format","open","other","out","to","in","imul","al","bl","h","floor","charCodeAt","iterate","trim","hashColor","alpha","color","g","norm","round","cssColor","escapeText","el","_markup","update","_activate","codes","querySelectorAll","popup","parentNode","classList","addEventListener","_event","style","display","none","nodeMap","linkMap","recurse","_order","wrapper","document","createElement","columns","innerHTML","addOutlet","div","appendChild","querySelector","clear","sqr","path","x1","y1","x2","y2","dx","dy","sqrt","abs","mx","my","f","makeSVG","tag","createElementNS","element","ref","getBoundingClientRect","coords","right","top","bottom","svg","removeChild","box","offsetHeight","setAttribute","offsetWidth","overlay","contents","close","view","inside","wrap","markup","Node","innerText","merge","resolve","vertex","fragment","_graph","args","visualize","_visualize","inspect","apply","Factory","fetch","pipe","_concat","_import","import","split","_group","fan","isolate","_next","pass","_stack","_state","sub","_exit","_tail","State","error","autoInspect","_auto","_combine","multi","_isolate","_main","subgraph","_subgraph","tail","_push","_pop","_append","_insert","_prepend","Material","options","shader","vertexShader","vertexGraph","fragmentShader","fragmentGraph","snippets","used","inline","_used","queue","limit","head","count","item","prev","dead","cache","cached","expire","signatures","placeholders","replaced","string_compiler","sig","re","RegExp","compiled","result1","PI","clamp","Vector2","isVector2","width","height","setScalar","scalar","setX","setY","setComponent","getComponent","addScalar","addVectors","addScaledVector","subScalar","subVectors","multiply","multiplyScalar","divide","divideScalar","applyMatrix3","elements","clampScalar","minVal","maxVal","clampLength","ceil","roundToZero","trunc","negate","dot","cross","lengthSq","manhattanLength","normalize","angle","atan2","angleTo","denominator","theta","acos","distanceTo","distanceToSquared","manhattanDistanceTo","setLength","lerp","lerpVectors","v1","v2","equals","fromArray","array","offset","toArray","fromBufferAttribute","getX","getY","rotateAround","center","cos","sin","iterator","Quaternion","z","w","isQuaternion","_x","_y","_z","_w","slerpFlat","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","z1","w1","dir","sqrSin","Number","EPSILON","tDir","multiplyQuaternionsFlat","_onChangeCallback","quaternion","setFromEuler","euler","order","c1","c2","c3","s1","s2","s3","warn","setFromAxisAngle","axis","halfAngle","setFromRotationMatrix","te","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","setFromUnitVectors","vFrom","vTo","rotateTowards","slerp","identity","invert","conjugate","l","multiplyQuaternions","premultiply","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","qb","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","slerpQuaternions","qa","theta1","theta2","r1","r2","getZ","getW","toJSON","_onChange","Vector3","isVector3","setZ","multiplyVectors","applyEuler","applyQuaternion","_quaternion","applyAxisAngle","applyNormalMatrix","applyMatrix4","vx","vy","vz","qx","qy","qz","qw","tx","ty","tz","project","camera","matrixWorldInverse","projectionMatrix","unproject","projectionMatrixInverse","matrixWorld","transformDirection","crossVectors","ax","ay","az","bx","by","bz","projectOnVector","projectOnPlane","planeNormal","_vector","reflect","dz","setFromSpherical","setFromSphericalCoords","radius","phi","sinPhiRadius","setFromCylindrical","setFromCylindricalCoords","setFromMatrixPosition","setFromMatrixScale","sx","setFromMatrixColumn","sy","sz","setFromMatrix3Column","setFromColor","randomDirection","Vector4","isVector4","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","epsilon","epsilon2","xx","yy","zz","xy","xz","yz","Matrix3","n11","n12","n13","n21","n22","n23","n31","n32","n33","isMatrix3","me","extractBasis","xAxis","yAxis","zAxis","setFromMatrix4","multiplyMatrices","ae","be","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","determinant","t11","t12","t13","det","detInv","transpose","tmp","getNormalMatrix","matrix4","transposeIntoArray","setUvTransform","rotation","cx","cy","scale","_m3","makeScale","rotate","makeRotation","translate","makeTranslation","matrix","WebGLCoordinateSystem","Matrix4","n14","n24","n34","n41","n42","n43","n44","isMatrix4","copyPosition","setFromMatrix3","makeBasis","extractRotation","scaleX","_v1","scaleY","scaleZ","makeRotationFromEuler","af","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","compose","_zero","_one","lookAt","eye","target","up","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","setPosition","t14","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","makeShear","yx","zx","zy","z2","wx","wy","wz","decompose","_m1","invSX","invSY","invSZ","makePerspective","near","far","coordinateSystem","makeOrthographic","zInv","function","storage","quant","func","argument","param","spec","long","threejs","window","THREE","defaults","int","float","vec2","vec3","vec4","mat2","mat3","mat4","sampler2D","samplerCube","three","dirs","const","Definition","isIn","shadowed","SHADOW_ARG","RETURN_ARG","ast","parseGLSL","processAST","tock","errors","fmt","walk","mapSymbols","collect","internals","sortSymbols","extractSignatures","maybe","found","internal","defn","shadow","indent","now","Date","label","delta","unshadow","real","statements","return","vars","post","chain","invoke","same","A","B","dangling","omit","isReturn","returnVar","_lookup","_dangling","inner","outer","strip","_m","blocks","level","rest","qual","_struct","ShaderGraph","_config","material","GLSL","Linker","Visualize"],"sourceRoot":""}